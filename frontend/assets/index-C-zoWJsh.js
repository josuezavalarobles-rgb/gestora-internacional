var Ka=Object.defineProperty,Qa=Object.defineProperties;var Za=Object.getOwnPropertyDescriptors;var Zt=Object.getOwnPropertySymbols;var or=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable;var wt=(t,s)=>(s=Symbol[t])?s:Symbol.for("Symbol."+t),en=t=>{throw TypeError(t)};var ir=(t,s,r)=>s in t?Ka(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,M=(t,s)=>{for(var r in s||(s={}))or.call(s,r)&&ir(t,r,s[r]);if(Zt)for(var r of Zt(s))lr.call(s,r)&&ir(t,r,s[r]);return t},ne=(t,s)=>Qa(t,Za(s));var vt=(t,s)=>{var r={};for(var a in t)or.call(t,a)&&s.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&Zt)for(var a of Zt(t))s.indexOf(a)<0&&lr.call(t,a)&&(r[a]=t[a]);return r};var tn=(t,s)=>()=>(s||t((s={exports:{}}).exports,s),s.exports);var O=(t,s,r)=>new Promise((a,n)=>{var i=p=>{try{c(r.next(p))}catch(x){n(x)}},l=p=>{try{c(r.throw(p))}catch(x){n(x)}},c=p=>p.done?a(p.value):Promise.resolve(p.value).then(i,l);c((r=r.apply(t,s)).next())}),dt=function(t,s){this[0]=t,this[1]=s},Es=(t,s,r)=>{var a=(l,c,p,x)=>{try{var m=r[l](c),y=(c=m.value)instanceof dt,b=m.done;Promise.resolve(y?c[0]:c).then(D=>y?a(l==="return"?l:"next",c[1]?{done:D.done,value:D.value}:D,p,x):p({value:D,done:b})).catch(D=>a("throw",D,p,x))}catch(D){x(D)}},n=l=>i[l]=c=>new Promise((p,x)=>a(l,c,p,x)),i={};return r=r.apply(t,s),i[wt("asyncIterator")]=()=>i,n("next"),n("throw"),n("return"),i},Ss=t=>{var s=t[wt("asyncIterator")],r=!1,a,n={};return s==null?(s=t[wt("iterator")](),a=i=>n[i]=l=>s[i](l)):(s=s.call(t),a=i=>n[i]=l=>{if(r){if(r=!1,i==="throw")throw l;return l}return r=!0,{done:!1,value:new dt(new Promise(c=>{var p=s[i](l);p instanceof Object||en("Object expected"),c(p)}),1)}}),n[wt("iterator")]=()=>n,a("next"),"throw"in s?a("throw"):n.throw=i=>{throw i},"return"in s&&a("return"),n},cr=(t,s,r)=>(s=t[wt("asyncIterator")])?s.call(t):(t=t[wt("iterator")](),s={},r=(a,n)=>(n=t[a])&&(s[a]=i=>new Promise((l,c,p)=>(i=n.call(t,i),p=i.done,Promise.resolve(i.value).then(x=>l({value:x,done:p}),c)))),r("next"),r("return"),s);import{j as e,u as Zr,a as sn,Q as rn,b as an}from"./react-query-Q-T_6cTs.js";import{a as nn,u as on,L as lt,r as T,b as ln,R as Me,d as cn,c as dn,g as un,e as mn,f as Fe,N as xn,B as hn}from"./react-vendor-MSYtiB7J.js";import{L as fn,F as pn,P as Ft,S as ct,B as gn,C as qe,a as $e,U as ts,b as pt,H as $t,c as Os,T as it,d as fs,e as We,f as dr,A as bn,g as Hs,h as tt,M as Ht,i as gt,j as ea,k as ur,l as mr,m as ps,n as yn,o as jn,p as gs,q as Wt,r as Yt,s as xt,W as Nn,t as mt,u as yt,X as Bt,v as wn,w as Ys,x as At,y as ta,z as sa,D as vn,E as xr,G as Cn,I as hr,J as En,K as Sn,N as zt,O as fr,Q as kn,R as _n}from"./icons-BCODyPeG.js";import{R as kt,P as ra,a as aa,C as cs,T as _t,L as ss,B as Rs,b as rs,X as as,Y as ns,c as Fs,d as An,e as Dn}from"./charts-LI186px5.js";var td=tn(G=>{(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Ms={},pr=nn;Ms.createRoot=pr.createRoot,Ms.hydrateRoot=pr.hydrateRoot;function Pn(){const t=on(),s=a=>a==="/"?t.pathname===a:t.pathname.startsWith(a),r=[{path:"/",icon:fn,label:"Dashboard",exact:!0},{path:"/casos",icon:pn,label:"Casos"},{path:"/nuevo-caso",icon:Ft,label:"Nuevo Caso"},{path:"/prospecting",icon:ct,label:"Prospección"},{path:"/solicitudes-ia",icon:gn,label:"Solicitudes IA"},{path:"/citas",icon:qe,label:"Citas"},{path:"/aprobaciones",icon:$e,label:"Aprobaciones"},{path:"/tecnicos",icon:ts,label:"Tecnicos"},{path:"/usuarios",icon:pt,label:"Usuarios"},{path:"/propietarios",icon:$t,label:"Propietarios"},{path:"/reportes",icon:Os,label:"Reportes"},{path:"/calendario",icon:qe,label:"Calendario (Viejo)"}];return e.jsxs("div",{className:"w-64 bg-slate-900 border-r border-slate-700 min-h-screen fixed left-0 top-0",children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-slate-700",children:e.jsxs(lt,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg flex items-center justify-center glow-blue",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"A"})}),e.jsx("span",{className:"text-lg font-semibold text-white",children:"Amico"})]})}),e.jsx("nav",{className:"px-3 py-4 space-y-1",children:r.map(a=>{const n=a.icon,i=s(a.path);return e.jsxs(lt,{to:a.path,className:`flex items-center space-x-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${i?"bg-blue-600 text-white shadow-lg glow-blue":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e.jsx(n,{size:20,className:i?"text-blue-200":"text-gray-400"}),e.jsx("span",{children:a.label})]},a.path)})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-700",children:e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-700 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:"AD"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Admin"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Administrador"})]})]})})]})}function Tn({children:t}){return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Pn,{}),e.jsx("main",{className:"ml-64 p-8",children:t})]})}function rt({title:t,value:s,icon:r,iconColor:a,iconBgColor:n,gradient:i,glowClass:l,trend:c}){return e.jsxs("div",{className:`${i||"bg-gradient-to-br from-gray-800 to-gray-900"} rounded-xl shadow-2xl p-6 hover:scale-105 transition-all ${l||""}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`${n||"bg-white bg-opacity-20"} p-3 rounded-lg backdrop-blur-sm`,children:e.jsx(r,{className:a||"text-white",size:28})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-200 mb-2 uppercase tracking-wide",children:t}),e.jsx("p",{className:"text-6xl font-bold text-white mb-1",children:s}),c&&e.jsxs("p",{className:`text-sm mt-2 ${c.isPositive?"text-green-300":"text-red-300"}`,children:[c.isPositive?"+":"-",c.value]})]})]})}const gr={mantenimiento:"#3B82F6",pago:"#10B981",reserva:"#F59E0B",acceso:"#8B5CF6",emergencia:"#EF4444",consulta:"#06B6D4"},On={mantenimiento:"Mantenimiento",pago:"Pagos",reserva:"Reservas",acceso:"Accesos",emergencia:"Emergencias",consulta:"Consultas"};function Rn({data:t}){const s=t.map(r=>({name:On[r.tipo]||r.tipo,value:r.cantidad,tipo:r.tipo}));return e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-2xl p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Solicitudes por Tipo"}),e.jsx(kt,{width:"100%",height:350,children:e.jsxs(ra,{children:[e.jsx(aa,{data:s,cx:"50%",cy:"50%",labelLine:!1,label:({name:r,percent:a})=>`${r} (${(a*100).toFixed(0)}%)`,outerRadius:110,innerRadius:60,fill:"#8884d8",dataKey:"value",stroke:"#1e293b",strokeWidth:2,children:s.map((r,a)=>e.jsx(cs,{fill:gr[r.tipo]||"#06B6D4"},`cell-${a}`))}),e.jsx(_t,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#fff"}}),e.jsx(ss,{wrapperStyle:{color:"#fff"},iconType:"circle"})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3",children:s.map(r=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-700 bg-opacity-50 rounded-lg p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg",style:{backgroundColor:gr[r.tipo]||"#06B6D4"}}),e.jsx("span",{className:"text-sm text-gray-200 font-medium",children:r.name})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:r.value})]},r.tipo))})]})}const Fn={critica:"#DC2626",alta:"#EA580C",media:"#F59E0B",baja:"#3B82F6"},Mn={critica:"url(#gradientCritica)",alta:"url(#gradientAlta)",media:"url(#gradientMedia)",baja:"url(#gradientBaja)"},Ln={critica:"Crítica",alta:"Alta",media:"Media",baja:"Baja"};function zn({data:t}){const s=t.map(r=>({name:Ln[r.urgencia]||r.urgencia,value:r.cantidad,urgencia:r.urgencia}));return e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-2xl p-6 border border-slate-700",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Solicitudes por Urgencia"}),e.jsx(kt,{width:"100%",height:350,children:e.jsxs(Rs,{data:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"gradientCritica",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#DC2626",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#991B1B",stopOpacity:1})]}),e.jsxs("linearGradient",{id:"gradientAlta",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#EA580C",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#C2410C",stopOpacity:1})]}),e.jsxs("linearGradient",{id:"gradientMedia",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#F59E0B",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#D97706",stopOpacity:1})]}),e.jsxs("linearGradient",{id:"gradientBaja",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3B82F6",stopOpacity:1}),e.jsx("stop",{offset:"100%",stopColor:"#1D4ED8",stopOpacity:1})]})]}),e.jsx(rs,{strokeDasharray:"3 3",stroke:"#475569",opacity:.3}),e.jsx(as,{dataKey:"name",stroke:"#94a3b8",style:{fontSize:"14px",fontWeight:500}}),e.jsx(ns,{stroke:"#94a3b8",style:{fontSize:"14px",fontWeight:500}}),e.jsx(_t,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px",color:"#fff"}}),e.jsx(Fs,{dataKey:"value",radius:[12,12,0,0],children:s.map((r,a)=>e.jsx(cs,{fill:Mn[r.urgencia]||"#3B82F6"},`cell-${a}`))})]})}),e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-3",children:s.map(r=>e.jsxs("div",{className:"flex items-center justify-between bg-slate-700 bg-opacity-50 rounded-lg p-3 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full shadow-lg",style:{backgroundColor:Fn[r.urgencia]||"#3B82F6"}}),e.jsx("span",{className:"text-sm text-gray-200 font-medium",children:r.name})]}),e.jsx("span",{className:"text-lg font-bold text-white",children:r.value})]},r.urgencia))})]})}function na(t,s){return function(){return t.apply(s,arguments)}}const{toString:Un}=Object.prototype,{getPrototypeOf:Xs}=Object,{iterator:bs,toStringTag:ia}=Symbol,ys=(t=>s=>{const r=Un.call(s);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Je=t=>(t=t.toLowerCase(),s=>ys(s)===t),js=t=>s=>typeof s===t,{isArray:Mt}=Array,Ot=js("undefined");function Xt(t){return t!==null&&!Ot(t)&&t.constructor!==null&&!Ot(t.constructor)&&Ue(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const oa=Je("ArrayBuffer");function In(t){let s;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&oa(t.buffer),s}const Bn=js("string"),Ue=js("function"),la=js("number"),Jt=t=>t!==null&&typeof t=="object",Vn=t=>t===!0||t===!1,is=t=>{if(ys(t)!=="object")return!1;const s=Xs(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(ia in t)&&!(bs in t)},qn=t=>{if(!Jt(t)||Xt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch(s){return!1}},$n=Je("Date"),Wn=Je("File"),Hn=Je("Blob"),Yn=Je("FileList"),Xn=t=>Jt(t)&&Ue(t.pipe),Jn=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Ue(t.append)&&((s=ys(t))==="formdata"||s==="object"&&Ue(t.toString)&&t.toString()==="[object FormData]"))},Gn=Je("URLSearchParams"),[Kn,Qn,Zn,ei]=["ReadableStream","Request","Response","Headers"].map(Je),ti=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gt(t,s,{allOwnKeys:r=!1}={}){if(t===null||typeof t=="undefined")return;let a,n;if(typeof t!="object"&&(t=[t]),Mt(t))for(a=0,n=t.length;a<n;a++)s.call(null,t[a],a,t);else{if(Xt(t))return;const i=r?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let c;for(a=0;a<l;a++)c=i[a],s.call(null,t[c],c,t)}}function ca(t,s){if(Xt(t))return null;s=s.toLowerCase();const r=Object.keys(t);let a=r.length,n;for(;a-- >0;)if(n=r[a],s===n.toLowerCase())return n;return null}const ht=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,da=t=>!Ot(t)&&t!==ht;function Ls(){const{caseless:t,skipUndefined:s}=da(this)&&this||{},r={},a=(n,i)=>{const l=t&&ca(r,i)||i;is(r[l])&&is(n)?r[l]=Ls(r[l],n):is(n)?r[l]=Ls({},n):Mt(n)?r[l]=n.slice():(!s||!Ot(n))&&(r[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Gt(arguments[n],a);return r}const si=(t,s,r,{allOwnKeys:a}={})=>(Gt(s,(n,i)=>{r&&Ue(n)?t[i]=na(n,r):t[i]=n},{allOwnKeys:a}),t),ri=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ai=(t,s,r,a)=>{t.prototype=Object.create(s.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),r&&Object.assign(t.prototype,r)},ni=(t,s,r,a)=>{let n,i,l;const c={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!a||a(l,t,s))&&!c[l]&&(s[l]=t[l],c[l]=!0);t=r!==!1&&Xs(t)}while(t&&(!r||r(t,s))&&t!==Object.prototype);return s},ii=(t,s,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=s.length;const a=t.indexOf(s,r);return a!==-1&&a===r},oi=t=>{if(!t)return null;if(Mt(t))return t;let s=t.length;if(!la(s))return null;const r=new Array(s);for(;s-- >0;)r[s]=t[s];return r},li=(t=>s=>t&&s instanceof t)(typeof Uint8Array!="undefined"&&Xs(Uint8Array)),ci=(t,s)=>{const a=(t&&t[bs]).call(t);let n;for(;(n=a.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},di=(t,s)=>{let r;const a=[];for(;(r=t.exec(s))!==null;)a.push(r);return a},ui=Je("HTMLFormElement"),mi=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,n){return a.toUpperCase()+n}),br=(({hasOwnProperty:t})=>(s,r)=>t.call(s,r))(Object.prototype),xi=Je("RegExp"),ua=(t,s)=>{const r=Object.getOwnPropertyDescriptors(t),a={};Gt(r,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(a[i]=l||n)}),Object.defineProperties(t,a)},hi=t=>{ua(t,(s,r)=>{if(Ue(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=t[r];if(Ue(a)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},fi=(t,s)=>{const r={},a=n=>{n.forEach(i=>{r[i]=!0})};return Mt(t)?a(t):a(String(t).split(s)),r},pi=()=>{},gi=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function bi(t){return!!(t&&Ue(t.append)&&t[ia]==="FormData"&&t[bs])}const yi=t=>{const s=new Array(10),r=(a,n)=>{if(Jt(a)){if(s.indexOf(a)>=0)return;if(Xt(a))return a;if(!("toJSON"in a)){s[n]=a;const i=Mt(a)?[]:{};return Gt(a,(l,c)=>{const p=r(l,n+1);!Ot(p)&&(i[c]=p)}),s[n]=void 0,i}}return a};return r(t,0)},ji=Je("AsyncFunction"),Ni=t=>t&&(Jt(t)||Ue(t))&&Ue(t.then)&&Ue(t.catch),ma=((t,s)=>t?setImmediate:s?((r,a)=>(ht.addEventListener("message",({source:n,data:i})=>{n===ht&&i===r&&a.length&&a.shift()()},!1),n=>{a.push(n),ht.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ue(ht.postMessage)),wi=typeof queueMicrotask!="undefined"?queueMicrotask.bind(ht):typeof process!="undefined"&&process.nextTick||ma,vi=t=>t!=null&&Ue(t[bs]),v={isArray:Mt,isArrayBuffer:oa,isBuffer:Xt,isFormData:Jn,isArrayBufferView:In,isString:Bn,isNumber:la,isBoolean:Vn,isObject:Jt,isPlainObject:is,isEmptyObject:qn,isReadableStream:Kn,isRequest:Qn,isResponse:Zn,isHeaders:ei,isUndefined:Ot,isDate:$n,isFile:Wn,isBlob:Hn,isRegExp:xi,isFunction:Ue,isStream:Xn,isURLSearchParams:Gn,isTypedArray:li,isFileList:Yn,forEach:Gt,merge:Ls,extend:si,trim:ti,stripBOM:ri,inherits:ai,toFlatObject:ni,kindOf:ys,kindOfTest:Je,endsWith:ii,toArray:oi,forEachEntry:ci,matchAll:di,isHTMLForm:ui,hasOwnProperty:br,hasOwnProp:br,reduceDescriptors:ua,freezeMethods:hi,toObjectSet:fi,toCamelCase:mi,noop:pi,toFiniteNumber:gi,findKey:ca,global:ht,isContextDefined:da,isSpecCompliantForm:bi,toJSONObject:yi,isAsyncFn:ji,isThenable:Ni,setImmediate:ma,asap:wi,isIterable:vi};function re(t,s,r,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),r&&(this.config=r),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}v.inherits(re,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.status}}});const xa=re.prototype,ha={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ha[t]={value:t}});Object.defineProperties(re,ha);Object.defineProperty(xa,"isAxiosError",{value:!0});re.from=(t,s,r,a,n,i)=>{const l=Object.create(xa);v.toFlatObject(t,l,function(m){return m!==Error.prototype},x=>x!=="isAxiosError");const c=t&&t.message?t.message:"Error",p=s==null&&t?t.code:s;return re.call(l,c,p,r,a,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const Ci=null;function zs(t){return v.isPlainObject(t)||v.isArray(t)}function fa(t){return v.endsWith(t,"[]")?t.slice(0,-2):t}function yr(t,s,r){return t?t.concat(s).map(function(n,i){return n=fa(n),!r&&i?"["+n+"]":n}).join(r?".":""):s}function Ei(t){return v.isArray(t)&&!t.some(zs)}const Si=v.toFlatObject(v,{},null,function(s){return/^is[A-Z]/.test(s)});function Ns(t,s,r){if(!v.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,r=v.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,g){return!v.isUndefined(g[A])});const a=r.metaTokens,n=r.visitor||m,i=r.dots,l=r.indexes,p=(r.Blob||typeof Blob!="undefined"&&Blob)&&v.isSpecCompliantForm(s);if(!v.isFunction(n))throw new TypeError("visitor must be a function");function x(j){if(j===null)return"";if(v.isDate(j))return j.toISOString();if(v.isBoolean(j))return j.toString();if(!p&&v.isBlob(j))throw new re("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(j)||v.isTypedArray(j)?p&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function m(j,A,g){let C=j;if(j&&!g&&typeof j=="object"){if(v.endsWith(A,"{}"))A=a?A:A.slice(0,-2),j=JSON.stringify(j);else if(v.isArray(j)&&Ei(j)||(v.isFileList(j)||v.endsWith(A,"[]"))&&(C=v.toArray(j)))return A=fa(A),C.forEach(function(B,Y){!(v.isUndefined(B)||B===null)&&s.append(l===!0?yr([A],Y,i):l===null?A:A+"[]",x(B))}),!1}return zs(j)?!0:(s.append(yr(g,A,i),x(j)),!1)}const y=[],b=Object.assign(Si,{defaultVisitor:m,convertValue:x,isVisitable:zs});function D(j,A){if(!v.isUndefined(j)){if(y.indexOf(j)!==-1)throw Error("Circular reference detected in "+A.join("."));y.push(j),v.forEach(j,function(C,S){(!(v.isUndefined(C)||C===null)&&n.call(s,C,v.isString(S)?S.trim():S,A,b))===!0&&D(C,A?A.concat(S):[S])}),y.pop()}}if(!v.isObject(t))throw new TypeError("data must be an object");return D(t),s}function jr(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return s[a]})}function Js(t,s){this._pairs=[],t&&Ns(t,this,s)}const pa=Js.prototype;pa.append=function(s,r){this._pairs.push([s,r])};pa.toString=function(s){const r=s?function(a){return s.call(this,a,jr)}:jr;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function ki(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ga(t,s,r){if(!s)return t;const a=r&&r.encode||ki;v.isFunction(r)&&(r={serialize:r});const n=r&&r.serialize;let i;if(n?i=n(s,r):i=v.isURLSearchParams(s)?s.toString():new Js(s,r).toString(a),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class Nr{constructor(){this.handlers=[]}use(s,r,a){return this.handlers.push({fulfilled:s,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){v.forEach(this.handlers,function(a){a!==null&&s(a)})}}const ba={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_i=typeof URLSearchParams!="undefined"?URLSearchParams:Js,Ai=typeof FormData!="undefined"?FormData:null,Di=typeof Blob!="undefined"?Blob:null,Pi={isBrowser:!0,classes:{URLSearchParams:_i,FormData:Ai,Blob:Di},protocols:["http","https","file","blob","url","data"]},Gs=typeof window!="undefined"&&typeof document!="undefined",Us=typeof navigator=="object"&&navigator||void 0,Ti=Gs&&(!Us||["ReactNative","NativeScript","NS"].indexOf(Us.product)<0),Oi=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ri=Gs&&window.location.href||"http://localhost",Fi=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gs,hasStandardBrowserEnv:Ti,hasStandardBrowserWebWorkerEnv:Oi,navigator:Us,origin:Ri},Symbol.toStringTag,{value:"Module"})),De=M(M({},Fi),Pi);function Mi(t,s){return Ns(t,new De.classes.URLSearchParams,M({visitor:function(r,a,n,i){return De.isNode&&v.isBuffer(r)?(this.append(a,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},s))}function Li(t){return v.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function zi(t){const s={},r=Object.keys(t);let a;const n=r.length;let i;for(a=0;a<n;a++)i=r[a],s[i]=t[i];return s}function ya(t){function s(r,a,n,i){let l=r[i++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),p=i>=r.length;return l=!l&&v.isArray(n)?n.length:l,p?(v.hasOwnProp(n,l)?n[l]=[n[l],a]:n[l]=a,!c):((!n[l]||!v.isObject(n[l]))&&(n[l]=[]),s(r,a,n[l],i)&&v.isArray(n[l])&&(n[l]=zi(n[l])),!c)}if(v.isFormData(t)&&v.isFunction(t.entries)){const r={};return v.forEachEntry(t,(a,n)=>{s(Li(a),n,r,0)}),r}return null}function Ui(t,s,r){if(v.isString(t))try{return(s||JSON.parse)(t),v.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(t)}const Kt={transitional:ba,adapter:["xhr","http","fetch"],transformRequest:[function(s,r){const a=r.getContentType()||"",n=a.indexOf("application/json")>-1,i=v.isObject(s);if(i&&v.isHTMLForm(s)&&(s=new FormData(s)),v.isFormData(s))return n?JSON.stringify(ya(s)):s;if(v.isArrayBuffer(s)||v.isBuffer(s)||v.isStream(s)||v.isFile(s)||v.isBlob(s)||v.isReadableStream(s))return s;if(v.isArrayBufferView(s))return s.buffer;if(v.isURLSearchParams(s))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let c;if(i){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Mi(s,this.formSerializer).toString();if((c=v.isFileList(s))||a.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ns(c?{"files[]":s}:s,p&&new p,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),Ui(s)):s}],transformResponse:[function(s){const r=this.transitional||Kt.transitional,a=r&&r.forcedJSONParsing,n=this.responseType==="json";if(v.isResponse(s)||v.isReadableStream(s))return s;if(s&&v.isString(s)&&(a&&!this.responseType||n)){const l=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?re.from(c,re.ERR_BAD_RESPONSE,this,null,this.response):c}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:De.classes.FormData,Blob:De.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],t=>{Kt.headers[t]={}});const Ii=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Bi=t=>{const s={};let r,a,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),r=l.substring(0,n).trim().toLowerCase(),a=l.substring(n+1).trim(),!(!r||s[r]&&Ii[r])&&(r==="set-cookie"?s[r]?s[r].push(a):s[r]=[a]:s[r]=s[r]?s[r]+", "+a:a)}),s},wr=Symbol("internals");function Ut(t){return t&&String(t).trim().toLowerCase()}function os(t){return t===!1||t==null?t:v.isArray(t)?t.map(os):String(t)}function Vi(t){const s=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(t);)s[a[1]]=a[2];return s}const qi=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ks(t,s,r,a,n){if(v.isFunction(a))return a.call(this,s,r);if(n&&(s=r),!!v.isString(s)){if(v.isString(a))return s.indexOf(a)!==-1;if(v.isRegExp(a))return a.test(s)}}function $i(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,r,a)=>r.toUpperCase()+a)}function Wi(t,s){const r=v.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+r,{value:function(n,i,l){return this[a].call(this,s,n,i,l)},configurable:!0})})}let Ie=class{constructor(s){s&&this.set(s)}set(s,r,a){const n=this;function i(c,p,x){const m=Ut(p);if(!m)throw new Error("header name must be a non-empty string");const y=v.findKey(n,m);(!y||n[y]===void 0||x===!0||x===void 0&&n[y]!==!1)&&(n[y||p]=os(c))}const l=(c,p)=>v.forEach(c,(x,m)=>i(x,m,p));if(v.isPlainObject(s)||s instanceof this.constructor)l(s,r);else if(v.isString(s)&&(s=s.trim())&&!qi(s))l(Bi(s),r);else if(v.isObject(s)&&v.isIterable(s)){let c={},p,x;for(const m of s){if(!v.isArray(m))throw TypeError("Object iterator must return a key-value pair");c[x=m[0]]=(p=c[x])?v.isArray(p)?[...p,m[1]]:[p,m[1]]:m[1]}l(c,r)}else s!=null&&i(r,s,a);return this}get(s,r){if(s=Ut(s),s){const a=v.findKey(this,s);if(a){const n=this[a];if(!r)return n;if(r===!0)return Vi(n);if(v.isFunction(r))return r.call(this,n,a);if(v.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,r){if(s=Ut(s),s){const a=v.findKey(this,s);return!!(a&&this[a]!==void 0&&(!r||ks(this,this[a],a,r)))}return!1}delete(s,r){const a=this;let n=!1;function i(l){if(l=Ut(l),l){const c=v.findKey(a,l);c&&(!r||ks(a,a[c],c,r))&&(delete a[c],n=!0)}}return v.isArray(s)?s.forEach(i):i(s),n}clear(s){const r=Object.keys(this);let a=r.length,n=!1;for(;a--;){const i=r[a];(!s||ks(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const r=this,a={};return v.forEach(this,(n,i)=>{const l=v.findKey(a,i);if(l){r[l]=os(n),delete r[i];return}const c=s?$i(i):String(i).trim();c!==i&&delete r[i],r[c]=os(n),a[c]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const r=Object.create(null);return v.forEach(this,(a,n)=>{a!=null&&a!==!1&&(r[n]=s&&v.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,r])=>s+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...r){const a=new this(s);return r.forEach(n=>a.set(n)),a}static accessor(s){const a=(this[wr]=this[wr]={accessors:{}}).accessors,n=this.prototype;function i(l){const c=Ut(l);a[c]||(Wi(n,l),a[c]=!0)}return v.isArray(s)?s.forEach(i):i(s),this}};Ie.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(Ie.prototype,({value:t},s)=>{let r=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(a){this[r]=a}}});v.freezeMethods(Ie);function _s(t,s){const r=this||Kt,a=s||r,n=Ie.from(a.headers);let i=a.data;return v.forEach(t,function(c){i=c.call(r,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function ja(t){return!!(t&&t.__CANCEL__)}function Lt(t,s,r){re.call(this,t==null?"canceled":t,re.ERR_CANCELED,s,r),this.name="CanceledError"}v.inherits(Lt,re,{__CANCEL__:!0});function Na(t,s,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?t(r):s(new re("Request failed with status code "+r.status,[re.ERR_BAD_REQUEST,re.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Hi(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Yi(t,s){t=t||10;const r=new Array(t),a=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(p){const x=Date.now(),m=a[i];l||(l=x),r[n]=p,a[n]=x;let y=i,b=0;for(;y!==n;)b+=r[y++],y=y%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),x-l<s)return;const D=m&&x-m;return D?Math.round(b*1e3/D):void 0}}function Xi(t,s){let r=0,a=1e3/s,n,i;const l=(x,m=Date.now())=>{r=m,n=null,i&&(clearTimeout(i),i=null),t(...x)};return[(...x)=>{const m=Date.now(),y=m-r;y>=a?l(x,m):(n=x,i||(i=setTimeout(()=>{i=null,l(n)},a-y)))},()=>n&&l(n)]}const ds=(t,s,r=3)=>{let a=0;const n=Yi(50,250);return Xi(i=>{const l=i.loaded,c=i.lengthComputable?i.total:void 0,p=l-a,x=n(p),m=l<=c;a=l;const y={loaded:l,total:c,progress:c?l/c:void 0,bytes:p,rate:x||void 0,estimated:x&&c&&m?(c-l)/x:void 0,event:i,lengthComputable:c!=null,[s?"download":"upload"]:!0};t(y)},r)},vr=(t,s)=>{const r=t!=null;return[a=>s[0]({lengthComputable:r,total:t,loaded:a}),s[1]]},Cr=t=>(...s)=>v.asap(()=>t(...s)),Ji=De.hasStandardBrowserEnv?((t,s)=>r=>(r=new URL(r,De.origin),t.protocol===r.protocol&&t.host===r.host&&(s||t.port===r.port)))(new URL(De.origin),De.navigator&&/(msie|trident)/i.test(De.navigator.userAgent)):()=>!0,Gi=De.hasStandardBrowserEnv?{write(t,s,r,a,n,i,l){if(typeof document=="undefined")return;const c=[`${t}=${encodeURIComponent(s)}`];v.isNumber(r)&&c.push(`expires=${new Date(r).toUTCString()}`),v.isString(a)&&c.push(`path=${a}`),v.isString(n)&&c.push(`domain=${n}`),i===!0&&c.push("secure"),v.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(t){if(typeof document=="undefined")return null;const s=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return s?decodeURIComponent(s[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function Ki(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Qi(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function wa(t,s,r){let a=!Ki(s);return t&&(a||r==!1)?Qi(t,s):s}const Er=t=>t instanceof Ie?M({},t):t;function jt(t,s){s=s||{};const r={};function a(x,m,y,b){return v.isPlainObject(x)&&v.isPlainObject(m)?v.merge.call({caseless:b},x,m):v.isPlainObject(m)?v.merge({},m):v.isArray(m)?m.slice():m}function n(x,m,y,b){if(v.isUndefined(m)){if(!v.isUndefined(x))return a(void 0,x,y,b)}else return a(x,m,y,b)}function i(x,m){if(!v.isUndefined(m))return a(void 0,m)}function l(x,m){if(v.isUndefined(m)){if(!v.isUndefined(x))return a(void 0,x)}else return a(void 0,m)}function c(x,m,y){if(y in s)return a(x,m);if(y in t)return a(void 0,x)}const p={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(x,m,y)=>n(Er(x),Er(m),y,!0)};return v.forEach(Object.keys(M(M({},t),s)),function(m){const y=p[m]||n,b=y(t[m],s[m],m);v.isUndefined(b)&&y!==c||(r[m]=b)}),r}const va=t=>{const s=jt({},t);let{data:r,withXSRFToken:a,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:c}=s;if(s.headers=l=Ie.from(l),s.url=ga(wa(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),v.isFormData(r)){if(De.hasStandardBrowserEnv||De.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(v.isFunction(r.getHeaders)){const p=r.getHeaders(),x=["content-type","content-length"];Object.entries(p).forEach(([m,y])=>{x.includes(m.toLowerCase())&&l.set(m,y)})}}if(De.hasStandardBrowserEnv&&(a&&v.isFunction(a)&&(a=a(s)),a||a!==!1&&Ji(s.url))){const p=n&&i&&Gi.read(i);p&&l.set(n,p)}return s},Zi=typeof XMLHttpRequest!="undefined",eo=Zi&&function(t){return new Promise(function(r,a){const n=va(t);let i=n.data;const l=Ie.from(n.headers).normalize();let{responseType:c,onUploadProgress:p,onDownloadProgress:x}=n,m,y,b,D,j;function A(){D&&D(),j&&j(),n.cancelToken&&n.cancelToken.unsubscribe(m),n.signal&&n.signal.removeEventListener("abort",m)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function C(){if(!g)return;const B=Ie.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),w={data:!c||c==="text"||c==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:B,config:t,request:g};Na(function(z){r(z),A()},function(z){a(z),A()},w),g=null}"onloadend"in g?g.onloadend=C:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(C)},g.onabort=function(){g&&(a(new re("Request aborted",re.ECONNABORTED,t,g)),g=null)},g.onerror=function(Y){const w=Y&&Y.message?Y.message:"Network Error",U=new re(w,re.ERR_NETWORK,t,g);U.event=Y||null,a(U),g=null},g.ontimeout=function(){let Y=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const w=n.transitional||ba;n.timeoutErrorMessage&&(Y=n.timeoutErrorMessage),a(new re(Y,w.clarifyTimeoutError?re.ETIMEDOUT:re.ECONNABORTED,t,g)),g=null},i===void 0&&l.setContentType(null),"setRequestHeader"in g&&v.forEach(l.toJSON(),function(Y,w){g.setRequestHeader(w,Y)}),v.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),c&&c!=="json"&&(g.responseType=n.responseType),x&&([b,j]=ds(x,!0),g.addEventListener("progress",b)),p&&g.upload&&([y,D]=ds(p),g.upload.addEventListener("progress",y),g.upload.addEventListener("loadend",D)),(n.cancelToken||n.signal)&&(m=B=>{g&&(a(!B||B.type?new Lt(null,t,g):B),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(m),n.signal&&(n.signal.aborted?m():n.signal.addEventListener("abort",m)));const S=Hi(n.url);if(S&&De.protocols.indexOf(S)===-1){a(new re("Unsupported protocol "+S+":",re.ERR_BAD_REQUEST,t));return}g.send(i||null)})},to=(t,s)=>{const{length:r}=t=t?t.filter(Boolean):[];if(s||r){let a=new AbortController,n;const i=function(x){if(!n){n=!0,c();const m=x instanceof Error?x:this.reason;a.abort(m instanceof re?m:new Lt(m instanceof Error?m.message:m))}};let l=s&&setTimeout(()=>{l=null,i(new re(`timeout ${s} of ms exceeded`,re.ETIMEDOUT))},s);const c=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(x=>{x.unsubscribe?x.unsubscribe(i):x.removeEventListener("abort",i)}),t=null)};t.forEach(x=>x.addEventListener("abort",i));const{signal:p}=a;return p.unsubscribe=()=>v.asap(c),p}},so=function*(t,s){let r=t.byteLength;if(r<s){yield t;return}let a=0,n;for(;a<r;)n=a+s,yield t.slice(a,n),a=n},ro=function(t,s){return Es(this,null,function*(){try{for(var r=cr(ao(t)),a,n,i;a=!(n=yield new dt(r.next())).done;a=!1){const l=n.value;yield*Ss(so(l,s))}}catch(n){i=[n]}finally{try{a&&(n=r.return)&&(yield new dt(n.call(r)))}finally{if(i)throw i[0]}}})},ao=function(t){return Es(this,null,function*(){if(t[Symbol.asyncIterator]){yield*Ss(t);return}const s=t.getReader();try{for(;;){const{done:r,value:a}=yield new dt(s.read());if(r)break;yield a}}finally{yield new dt(s.cancel())}})},Sr=(t,s,r,a)=>{const n=ro(t,s);let i=0,l,c=x=>{l||(l=!0,a&&a(x))};return new ReadableStream({pull(x){return O(this,null,function*(){try{const{done:m,value:y}=yield n.next();if(m){c(),x.close();return}let b=y.byteLength;if(r){let D=i+=b;r(D)}x.enqueue(new Uint8Array(y))}catch(m){throw c(m),m}})},cancel(x){return c(x),n.return()}},{highWaterMark:2})},kr=64*1024,{isFunction:es}=v,no=(({Request:t,Response:s})=>({Request:t,Response:s}))(v.global),{ReadableStream:_r,TextEncoder:Ar}=v.global,Dr=(t,...s)=>{try{return!!t(...s)}catch(r){return!1}},io=t=>{t=v.merge.call({skipUndefined:!0},no,t);const{fetch:s,Request:r,Response:a}=t,n=s?es(s):typeof fetch=="function",i=es(r),l=es(a);if(!n)return!1;const c=n&&es(_r),p=n&&(typeof Ar=="function"?(j=>A=>j.encode(A))(new Ar):j=>O(G,null,function*(){return new Uint8Array(yield new r(j).arrayBuffer())})),x=i&&c&&Dr(()=>{let j=!1;const A=new r(De.origin,{body:new _r,method:"POST",get duplex(){return j=!0,"half"}}).headers.has("Content-Type");return j&&!A}),m=l&&c&&Dr(()=>v.isReadableStream(new a("").body)),y={stream:m&&(j=>j.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(j=>{!y[j]&&(y[j]=(A,g)=>{let C=A&&A[j];if(C)return C.call(A);throw new re(`Response type '${j}' is not supported`,re.ERR_NOT_SUPPORT,g)})});const b=j=>O(G,null,function*(){if(j==null)return 0;if(v.isBlob(j))return j.size;if(v.isSpecCompliantForm(j))return(yield new r(De.origin,{method:"POST",body:j}).arrayBuffer()).byteLength;if(v.isArrayBufferView(j)||v.isArrayBuffer(j))return j.byteLength;if(v.isURLSearchParams(j)&&(j=j+""),v.isString(j))return(yield p(j)).byteLength}),D=(j,A)=>O(G,null,function*(){const g=v.toFiniteNumber(j.getContentLength());return g==null?b(A):g});return j=>O(G,null,function*(){let{url:A,method:g,data:C,signal:S,cancelToken:B,timeout:Y,onDownloadProgress:w,onUploadProgress:U,responseType:z,headers:o,withCredentials:u="same-origin",fetchOptions:d}=va(j),E=s||fetch;z=z?(z+"").toLowerCase():"text";let f=to([S,B&&B.toAbortSignal()],Y),_=null;const I=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let P;try{if(U&&x&&g!=="get"&&g!=="head"&&(P=yield D(o,C))!==0){let J=new r(A,{method:"POST",body:C,duplex:"half"}),Q;if(v.isFormData(C)&&(Q=J.headers.get("content-type"))&&o.setContentType(Q),J.body){const[H,xe]=vr(P,ds(Cr(U)));C=Sr(J.body,kr,H,xe)}}v.isString(u)||(u=u?"include":"omit");const R=i&&"credentials"in r.prototype,V=ne(M({},d),{signal:f,method:g.toUpperCase(),headers:o.normalize().toJSON(),body:C,duplex:"half",credentials:R?u:void 0});_=i&&new r(A,V);let K=yield i?E(_,d):E(A,V);const W=m&&(z==="stream"||z==="response");if(m&&(w||W&&I)){const J={};["status","statusText","headers"].forEach(he=>{J[he]=K[he]});const Q=v.toFiniteNumber(K.headers.get("content-length")),[H,xe]=w&&vr(Q,ds(Cr(w),!0))||[];K=new a(Sr(K.body,kr,H,()=>{xe&&xe(),I&&I()}),J)}z=z||"text";let ce=yield y[v.findKey(y,z)||"text"](K,j);return!W&&I&&I(),yield new Promise((J,Q)=>{Na(J,Q,{data:ce,headers:Ie.from(K.headers),status:K.status,statusText:K.statusText,config:j,request:_})})}catch(R){throw I&&I(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new re("Network Error",re.ERR_NETWORK,j,_),{cause:R.cause||R}):re.from(R,R&&R.code,j,_)}})},oo=new Map,Ca=t=>{let s=t&&t.env||{};const{fetch:r,Request:a,Response:n}=s,i=[a,n,r];let l=i.length,c=l,p,x,m=oo;for(;c--;)p=i[c],x=m.get(p),x===void 0&&m.set(p,x=c?new Map:io(s)),m=x;return x};Ca();const Ks={http:Ci,xhr:eo,fetch:{get:Ca}};v.forEach(Ks,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch(r){}Object.defineProperty(t,"adapterName",{value:s})}});const Pr=t=>`- ${t}`,lo=t=>v.isFunction(t)||t===null||t===!1;function co(t,s){t=v.isArray(t)?t:[t];const{length:r}=t;let a,n;const i={};for(let l=0;l<r;l++){a=t[l];let c;if(n=a,!lo(a)&&(n=Ks[(c=String(a)).toLowerCase()],n===void 0))throw new re(`Unknown adapter '${c}'`);if(n&&(v.isFunction(n)||(n=n.get(s))))break;i[c||"#"+l]=n}if(!n){const l=Object.entries(i).map(([p,x])=>`adapter ${p} `+(x===!1?"is not supported by the environment":"is not available in the build"));let c=r?l.length>1?`since :
`+l.map(Pr).join(`
`):" "+Pr(l[0]):"as no adapter specified";throw new re("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return n}const Ea={getAdapter:co,adapters:Ks};function As(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Lt(null,t)}function Tr(t){return As(t),t.headers=Ie.from(t.headers),t.data=_s.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ea.getAdapter(t.adapter||Kt.adapter,t)(t).then(function(a){return As(t),a.data=_s.call(t,t.transformResponse,a),a.headers=Ie.from(a.headers),a},function(a){return ja(a)||(As(t),a&&a.response&&(a.response.data=_s.call(t,t.transformResponse,a.response),a.response.headers=Ie.from(a.response.headers))),Promise.reject(a)})}const Sa="1.13.1",ws={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{ws[t]=function(a){return typeof a===t||"a"+(s<1?"n ":" ")+t}});const Or={};ws.transitional=function(s,r,a){function n(i,l){return"[Axios v"+Sa+"] Transitional option '"+i+"'"+l+(a?". "+a:"")}return(i,l,c)=>{if(s===!1)throw new re(n(l," has been removed"+(r?" in "+r:"")),re.ERR_DEPRECATED);return r&&!Or[l]&&(Or[l]=!0,console.warn(n(l," has been deprecated since v"+r+" and will be removed in the near future"))),s?s(i,l,c):!0}};ws.spelling=function(s){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${s}`),!0)};function uo(t,s,r){if(typeof t!="object")throw new re("options must be an object",re.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let n=a.length;for(;n-- >0;){const i=a[n],l=s[i];if(l){const c=t[i],p=c===void 0||l(c,i,t);if(p!==!0)throw new re("option "+i+" must be "+p,re.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new re("Unknown option "+i,re.ERR_BAD_OPTION)}}const ls={assertOptions:uo,validators:ws},Ke=ls.validators;let bt=class{constructor(s){this.defaults=s||{},this.interceptors={request:new Nr,response:new Nr}}request(s,r){return O(this,null,function*(){try{return yield this._request(s,r)}catch(a){if(a instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{a.stack?i&&!String(a.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+i):a.stack=i}catch(l){}}throw a}})}_request(s,r){typeof s=="string"?(r=r||{},r.url=s):r=s||{},r=jt(this.defaults,r);const{transitional:a,paramsSerializer:n,headers:i}=r;a!==void 0&&ls.assertOptions(a,{silentJSONParsing:Ke.transitional(Ke.boolean),forcedJSONParsing:Ke.transitional(Ke.boolean),clarifyTimeoutError:Ke.transitional(Ke.boolean)},!1),n!=null&&(v.isFunction(n)?r.paramsSerializer={serialize:n}:ls.assertOptions(n,{encode:Ke.function,serialize:Ke.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ls.assertOptions(r,{baseUrl:Ke.spelling("baseURL"),withXsrfToken:Ke.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=i&&v.merge(i.common,i[r.method]);i&&v.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),r.headers=Ie.concat(l,i);const c=[];let p=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(p=p&&A.synchronous,c.unshift(A.fulfilled,A.rejected))});const x=[];this.interceptors.response.forEach(function(A){x.push(A.fulfilled,A.rejected)});let m,y=0,b;if(!p){const j=[Tr.bind(this),void 0];for(j.unshift(...c),j.push(...x),b=j.length,m=Promise.resolve(r);y<b;)m=m.then(j[y++],j[y++]);return m}b=c.length;let D=r;for(;y<b;){const j=c[y++],A=c[y++];try{D=j(D)}catch(g){A.call(this,g);break}}try{m=Tr.call(this,D)}catch(j){return Promise.reject(j)}for(y=0,b=x.length;y<b;)m=m.then(x[y++],x[y++]);return m}getUri(s){s=jt(this.defaults,s);const r=wa(s.baseURL,s.url,s.allowAbsoluteUrls);return ga(r,s.params,s.paramsSerializer)}};v.forEach(["delete","get","head","options"],function(s){bt.prototype[s]=function(r,a){return this.request(jt(a||{},{method:s,url:r,data:(a||{}).data}))}});v.forEach(["post","put","patch"],function(s){function r(a){return function(i,l,c){return this.request(jt(c||{},{method:s,headers:a?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}bt.prototype[s]=r(),bt.prototype[s+"Form"]=r(!0)});let mo=class ka{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const a=this;this.promise.then(n=>{if(!a._listeners)return;let i=a._listeners.length;for(;i-- >0;)a._listeners[i](n);a._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(c=>{a.subscribe(c),i=c}).then(n);return l.cancel=function(){a.unsubscribe(i)},l},s(function(i,l,c){a.reason||(a.reason=new Lt(i,l,c),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const r=this._listeners.indexOf(s);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const s=new AbortController,r=a=>{s.abort(a)};return this.subscribe(r),s.signal.unsubscribe=()=>this.unsubscribe(r),s.signal}static source(){let s;return{token:new ka(function(n){s=n}),cancel:s}}};function xo(t){return function(r){return t.apply(null,r)}}function ho(t){return v.isObject(t)&&t.isAxiosError===!0}const Is={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Is).forEach(([t,s])=>{Is[s]=t});function _a(t){const s=new bt(t),r=na(bt.prototype.request,s);return v.extend(r,bt.prototype,s,{allOwnKeys:!0}),v.extend(r,s,null,{allOwnKeys:!0}),r.create=function(n){return _a(jt(t,n))},r}const we=_a(Kt);we.Axios=bt;we.CanceledError=Lt;we.CancelToken=mo;we.isCancel=ja;we.VERSION=Sa;we.toFormData=Ns;we.AxiosError=re;we.Cancel=we.CanceledError;we.all=function(s){return Promise.all(s)};we.spread=xo;we.isAxiosError=ho;we.mergeConfig=jt;we.AxiosHeaders=Ie;we.formToJSON=t=>ya(v.isHTMLForm(t)?new FormData(t):t);we.getAdapter=Ea.getAdapter;we.HttpStatusCode=Is;we.default=we;const{Axios:cd,AxiosError:dd,CanceledError:ud,isCancel:md,CancelToken:xd,VERSION:hd,all:fd,Cancel:pd,isAxiosError:gd,spread:bd,toFormData:yd,AxiosHeaders:jd,HttpStatusCode:Nd,formToJSON:wd,getAdapter:vd,mergeConfig:Cd}=we,fo="https://amico-management-production.up.railway.app/api/v1",ee=we.create({baseURL:fo,headers:{"Content-Type":"application/json"},timeout:3e4});ee.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Bearer ${s}`),t},t=>Promise.reject(t));ee.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});const ot={getAll:()=>O(G,null,function*(){return(yield ee.get("/casos")).data}),getById:t=>O(G,null,function*(){return(yield ee.get(`/casos/${t}`)).data}),create:t=>O(G,null,function*(){return(yield ee.post("/casos",t)).data}),update:(t,s)=>O(G,null,function*(){return(yield ee.put(`/casos/${t}`,s)).data}),asignarTecnico:(t,s)=>O(G,null,function*(){return(yield ee.put(`/casos/${t}/asignar`,{tecnicoId:s})).data}),actualizarEstado:(t,s,r)=>O(G,null,function*(){return(yield ee.put(`/casos/${t}/estado`,{estado:s,notas:r})).data})},po={getDashboard:()=>O(G,null,function*(){return(yield ee.get("/kpis/dashboard")).data})},Pe={obtenerTecnicos:()=>O(G,null,function*(){return(yield ee.get("/usuarios/tecnicos")).data}),getAll:()=>O(G,null,function*(){return(yield ee.get("/usuarios")).data}),create:t=>O(G,null,function*(){return(yield ee.post("/usuarios",t)).data}),update:(t,s)=>O(G,null,function*(){return(yield ee.put(`/usuarios/${t}`,s)).data}),delete:t=>O(G,null,function*(){yield ee.delete(`/usuarios/${t}`)}),getPropietarios:()=>O(G,null,function*(){return(yield ee.get("/usuarios?tipoUsuario=propietario")).data})},go={getAll:()=>O(G,null,function*(){return(yield ee.get("/condominios")).data})},Bs={getAll:t=>O(G,null,function*(){return(yield ee.get("/solicitudes",{params:t})).data}),getEstadisticas:()=>O(G,null,function*(){return(yield ee.get("/solicitudes/estadisticas")).data}),getByCodigo:t=>O(G,null,function*(){return(yield ee.get(`/solicitudes/codigo/${t}`)).data}),actualizarEstado:(t,s,r,a)=>O(G,null,function*(){return(yield ee.patch(`/solicitudes/${t}/estado`,{estado:s,asignadoA:r,comentario:a})).data}),calificar:(t,s,r)=>O(G,null,function*(){return(yield ee.post(`/solicitudes/${t}/calificar`,{calificacion:s,comentario:r})).data})},Aa={getStatus:()=>O(G,null,function*(){return(yield ee.get("/prospecting/status")).data}),configure:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/configure",{provider:t,apiKey:s,isActive:r})).data}),hunterFindEmail:t=>O(G,null,function*(){return(yield ee.post("/prospecting/hunter/find-email",t)).data}),hunterSearchDomain:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/hunter/search-domain",{domain:t,type:s,limit:r})).data}),hunterVerifyEmail:t=>O(G,null,function*(){return(yield ee.post("/prospecting/hunter/verify-email",{email:t})).data}),hunterVerifyBatch:t=>O(G,null,function*(){return(yield ee.post("/prospecting/hunter/verify-batch",{emails:t})).data}),hunterEnrichLead:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/hunter/enrich-lead",{companyDomain:t,firstName:s,lastName:r})).data}),hunterGetAccount:()=>O(G,null,function*(){return(yield ee.get("/prospecting/hunter/account")).data}),apolloSearchPeople:t=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/search-people",t)).data}),apolloSearchOrganizations:t=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/search-organizations",t)).data}),apolloEnrichPerson:(t,s,r,a,n)=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/enrich-person",{firstName:t,lastName:s,organizationDomain:r,email:a,linkedinUrl:n})).data}),apolloEnrichOrganization:t=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/enrich-organization",{domain:t})).data}),apolloGetCompanyContacts:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/company-contacts",{companyDomain:t,titles:s,limit:r})).data}),apolloFindDecisionMakers:(t,s,r,a,n)=>O(G,null,function*(){return(yield ee.post("/prospecting/apollo/find-decision-makers",{industry:t,location:s,companySize:r,titles:a,limit:n})).data}),apolloGetAccount:()=>O(G,null,function*(){return(yield ee.get("/prospecting/apollo/account")).data}),phantomBusterListAgents:()=>O(G,null,function*(){return(yield ee.get("/prospecting/phantombuster/agents")).data}),phantomBusterLaunchAgent:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/launch",{agentId:t,argument:s,saveToCloud:r})).data}),phantomBusterGetContainerStatus:t=>O(G,null,function*(){return(yield ee.get(`/prospecting/phantombuster/container/${t}`)).data}),phantomBusterExtractLinkedInProfiles:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/linkedin/extract-profiles",{searchUrl:t,numberOfPages:s,emailDiscovery:r})).data}),phantomBusterSearchLinkedIn:t=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/linkedin/search",t)).data}),phantomBusterExtractLinkedInCompany:(t,s)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/linkedin/extract-company",{companyUrl:t,extractEmployees:s})).data}),phantomBusterSendLinkedInMessages:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/linkedin/send-messages",{profileUrls:t,message:s,useProfileTag:r})).data}),phantomBusterSendConnectionRequests:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/linkedin/send-connections",{profileUrls:t,personalizedMessage:s,maxRequestsPerDay:r})).data}),phantomBusterExtractInstagramFollowers:(t,s)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/instagram/extract-followers",{username:t,maxFollowers:s})).data}),phantomBusterExtractFacebookPosts:(t,s)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/facebook/extract-posts",{pageUrl:t,maxPosts:s})).data}),phantomBusterScrapeWebsite:(t,s,r)=>O(G,null,function*(){return(yield ee.post("/prospecting/phantombuster/web-scrape",{url:t,selectors:s,waitTime:r})).data}),phantomBusterGetAccount:()=>O(G,null,function*(){return(yield ee.get("/prospecting/phantombuster/account")).data}),smartEnrich:t=>O(G,null,function*(){return(yield ee.post("/prospecting/smart-enrich",t)).data})};function bo(){var z;const[t,s]=T.useState([]),[r,a]=T.useState(null),[n,i]=T.useState(null),[l,c]=T.useState(!0),[p,x]=T.useState(null),[m,y]=T.useState("todos"),[b,D]=T.useState("todas"),[j,A]=T.useState("");T.useEffect(()=>{g()},[]);const g=()=>O(this,null,function*(){try{c(!0),x(null);const[o,u,d]=yield Promise.all([ot.getAll(),po.getDashboard(),Bs.getEstadisticas().catch(()=>null)]);s(o),a(u),i((d==null?void 0:d.estadisticas)||null)}catch(o){console.error("Error cargando datos:",o),x("Error al cargar los datos. Por favor verifica que el backend esté corriendo.")}finally{c(!1)}}),C=t.filter(o=>{if(m!=="todos"&&o.estado!==m||b!=="todas"&&o.prioridad!==b)return!1;if(j){const u=j.toLowerCase(),d=o.numeroCaso.toLowerCase().includes(u),E=o.usuario.nombreCompleto.toLowerCase().includes(u);if(!d&&!E)return!1}return!0}),S=t.filter(o=>o.prioridad==="urgente"),B=o=>{const u=new Date(o);return new Intl.DateTimeFormat("es-DO",{year:"numeric",month:"short",day:"numeric"}).format(u)},Y=o=>({nuevo:"bg-blue-600 text-white",asignado:"bg-purple-600 text-white",en_proceso:"bg-yellow-600 text-white",en_visita:"bg-orange-600 text-white",resuelto:"bg-green-600 text-white",cerrado:"bg-gray-600 text-white"})[o]||"bg-gray-600 text-white",w=o=>({baja:"bg-gray-600 text-white",media:"bg-blue-600 text-white",alta:"bg-orange-600 text-white",urgente:"bg-red-600 text-white"})[o]||"bg-gray-600 text-white",U=o=>o.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase());return l?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-300",children:"Cargando datos..."})]})}):p?e.jsx("div",{className:"bg-red-900 bg-opacity-20 border border-red-500 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(it,{className:"text-red-400",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-200 font-semibold",children:"Error"}),e.jsx("p",{className:"text-red-300",children:p})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-gray-900 p-8 space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Vista general del sistema de gestion de casos"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(rt,{title:"Casos Nuevos",value:(r==null?void 0:r.casosNuevos)||0,icon:fs,iconColor:"text-blue-200",iconBgColor:"bg-blue-500 bg-opacity-20",gradient:"bg-gradient-to-br from-blue-600 to-blue-800",glowClass:"glow-blue"}),e.jsx(rt,{title:"En Proceso",value:(r==null?void 0:r.casosEnProceso)||0,icon:We,iconColor:"text-purple-200",iconBgColor:"bg-purple-500 bg-opacity-20",gradient:"bg-gradient-to-br from-purple-600 to-purple-800",glowClass:"glow-purple"}),e.jsx(rt,{title:"Resueltos",value:(r==null?void 0:r.casosResueltos)||0,icon:$e,iconColor:"text-green-200",iconBgColor:"bg-green-500 bg-opacity-20",gradient:"bg-gradient-to-br from-green-600 to-green-800",glowClass:"glow-green"}),e.jsx(rt,{title:"Satisfaccion",value:`${(r==null?void 0:r.satisfaccionPromedio.toFixed(1))||"0.0"}/5`,icon:dr,iconColor:"text-orange-200",iconBgColor:"bg-orange-500 bg-opacity-20",gradient:"bg-gradient-to-br from-orange-600 to-orange-800",glowClass:"glow-orange"})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(rt,{title:"Total Solicitudes IA",value:n.totalSolicitudes||0,icon:bn,iconColor:"text-indigo-200",iconBgColor:"bg-indigo-500 bg-opacity-20",gradient:"bg-gradient-to-br from-indigo-600 to-indigo-800"}),e.jsx(rt,{title:"Tiempo Promedio Resolucion",value:`${Math.round(n.tiempoPromedioResolucionHoras||0)}h`,icon:We,iconColor:"text-cyan-200",iconBgColor:"bg-cyan-500 bg-opacity-20",gradient:"bg-gradient-to-br from-cyan-600 to-cyan-800",glowClass:"glow-cyan"}),e.jsx(rt,{title:"Satisfaccion IA",value:`${((z=n.satisfaccionPromedio)==null?void 0:z.toFixed(1))||"0.0"}/5`,icon:dr,iconColor:"text-pink-200",iconBgColor:"bg-pink-500 bg-opacity-20",gradient:"bg-gradient-to-br from-pink-600 to-pink-800",glowClass:"glow-pink"}),e.jsx(rt,{title:"Tasa de Conversion",value:`${(n.totalSolicitudes/(t.length+n.totalSolicitudes)*100).toFixed(0)}%`,icon:Hs,iconColor:"text-emerald-200",iconBgColor:"bg-emerald-500 bg-opacity-20",gradient:"bg-gradient-to-br from-emerald-600 to-emerald-800",glowClass:"glow-green"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.solicitudesPorTipo&&n.solicitudesPorTipo.length>0&&e.jsx(Rn,{data:n.solicitudesPorTipo}),n.solicitudesPorUrgencia&&n.solicitudesPorUrgencia.length>0&&e.jsx(zn,{data:n.solicitudesPorUrgencia})]})]}),S.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx(it,{className:"text-red-400",size:28}),e.jsx("span",{children:"Casos Urgentes"}),e.jsx("span",{className:"bg-red-600 text-white text-sm font-bold px-3 py-1 rounded-full shadow-lg",children:S.length})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:S.map(o=>e.jsxs(lt,{to:`/casos/${o.id}`,className:"bg-gradient-to-br from-red-900 to-red-950 border-2 border-red-600 rounded-xl p-6 hover:shadow-2xl hover:scale-105 transition-all glow-orange",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-xl mb-2",children:o.numeroCaso}),e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-slate-700 text-white",children:U(o.estado)})]}),e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg",children:"URGENTE"})]}),e.jsx("p",{className:"text-gray-200 mb-4 line-clamp-2",children:o.descripcion}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{size:16,className:"text-red-400"}),e.jsx("span",{children:o.usuario.nombreCompleto})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{size:16,className:"text-red-400"}),e.jsxs("span",{children:[o.condominio.nombre," - ",o.unidad]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qe,{size:16,className:"text-red-400"}),e.jsx("span",{children:B(o.fechaCreacion)})]})]})]},o.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center space-x-3",children:[e.jsx(gt,{size:24}),e.jsx("span",{children:"Todos los Casos"})]}),e.jsxs("span",{className:"text-sm text-gray-400 bg-slate-800 px-4 py-2 rounded-lg",children:["Mostrando ",C.length," de ",t.length," casos"]})]}),e.jsx("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-xl border border-slate-700 p-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Estado"}),e.jsxs("select",{value:m,onChange:o=>y(o.target.value),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"nuevo",children:"Nuevo"}),e.jsx("option",{value:"asignado",children:"Asignado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"resuelto",children:"Resuelto"}),e.jsx("option",{value:"cerrado",children:"Cerrado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Prioridad"}),e.jsxs("select",{value:b,onChange:o=>D(o.target.value),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 text-white rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",children:[e.jsx("option",{value:"todas",children:"Todas"}),e.jsx("option",{value:"baja",children:"Baja"}),e.jsx("option",{value:"media",children:"Media"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"urgente",children:"Urgente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Numero de caso o cliente...",value:j,onChange:o=>A(o.target.value),className:"w-full px-4 py-3 pl-10 bg-slate-700 border border-slate-600 text-white placeholder-gray-400 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),e.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18})]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-2xl border border-slate-700 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-700",children:[e.jsx("thead",{className:"bg-slate-800 bg-opacity-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Caso"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Ubicacion"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Prioridad"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-200 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-gray-400",children:[e.jsx(it,{className:"mx-auto mb-2 text-gray-500",size:48}),e.jsx("p",{className:"text-lg font-medium text-gray-300",children:"No se encontraron casos"}),e.jsx("p",{className:"text-sm",children:"Intenta ajustar los filtros de busqueda"})]})})}):C.map(o=>e.jsxs("tr",{className:"hover:bg-slate-700 hover:bg-opacity-30 transition-all",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold text-white",children:o.numeroCaso}),e.jsx("div",{className:"text-sm text-gray-400 max-w-xs truncate",children:o.categoria})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:o.usuario.nombreCompleto}),e.jsx("div",{className:"text-sm text-gray-400",children:o.usuario.telefono})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-white",children:o.condominio.nombre}),e.jsx("div",{className:"text-sm text-gray-400",children:o.unidad})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-lg ${Y(o.estado)}`,children:U(o.estado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-bold shadow-lg ${w(o.prioridad)}`,children:o.prioridad.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:B(o.fechaCreacion)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs(lt,{to:`/casos/${o.id}`,className:"text-blue-400 hover:text-blue-300 font-bold flex items-center space-x-1 hover:scale-110 transition-transform",children:[e.jsx("span",{children:"Ver detalles"}),e.jsx(ea,{size:16})]})})]},o.id))})]})})})]})]})}const yo={all:["casos"]};function jo(){return Zr({queryKey:yo.all,queryFn:ot.getAll,staleTime:1e3*60*5})}function Se(t){const s=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&s==="[object Date]"?new t.constructor(+t):typeof t=="number"||s==="[object Number]"||typeof t=="string"||s==="[object String]"?new Date(t):new Date(NaN)}function Xe(t,s){return t instanceof Date?new t.constructor(s):new Date(s)}function No(t,s){const r=Se(t);return isNaN(s)?Xe(t,NaN):(r.setDate(r.getDate()+s),r)}function Da(t,s){const r=Se(t);if(isNaN(s))return Xe(t,NaN);if(!s)return r;const a=r.getDate(),n=Xe(t,r.getTime());n.setMonth(r.getMonth()+s+1,0);const i=n.getDate();return a>=i?n:(r.setFullYear(n.getFullYear(),n.getMonth(),a),r)}const Pa=6048e5,wo=864e5;let vo={};function vs(){return vo}function Rt(t,s){var c,p,x,m,y,b,D,j;const r=vs(),a=(j=(D=(m=(x=s==null?void 0:s.weekStartsOn)!=null?x:(p=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:p.weekStartsOn)!=null?m:r.weekStartsOn)!=null?D:(b=(y=r.locale)==null?void 0:y.options)==null?void 0:b.weekStartsOn)!=null?j:0,n=Se(t),i=n.getDay(),l=(i<a?7:0)+i-a;return n.setDate(n.getDate()-l),n.setHours(0,0,0,0),n}function us(t){return Rt(t,{weekStartsOn:1})}function Ta(t){const s=Se(t),r=s.getFullYear(),a=Xe(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=us(a),i=Xe(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=us(i);return s.getTime()>=n.getTime()?r+1:s.getTime()>=l.getTime()?r:r-1}function ms(t){const s=Se(t);return s.setHours(0,0,0,0),s}function Rr(t){const s=Se(t),r=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return r.setUTCFullYear(s.getFullYear()),+t-+r}function Co(t,s){const r=ms(t),a=ms(s),n=+r-Rr(r),i=+a-Rr(a);return Math.round((n-i)/wo)}function Eo(t){const s=Ta(t),r=Xe(t,0);return r.setFullYear(s,0,4),r.setHours(0,0,0,0),us(r)}function So(t){return Xe(t,Date.now())}function Dt(t,s){const r=ms(t),a=ms(s);return+r==+a}function ko(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function _o(t){if(!ko(t)&&typeof t!="number")return!1;const s=Se(t);return!isNaN(Number(s))}function Vs(t){const s=Se(t),r=s.getMonth();return s.setFullYear(s.getFullYear(),r+1,0),s.setHours(23,59,59,999),s}function Oa(t,s){const r=Se(t.start),a=Se(t.end);let n=+r>+a;const i=n?+r:+a,l=n?a:r;l.setHours(0,0,0,0);let c=1;const p=[];for(;+l<=i;)p.push(Se(l)),l.setDate(l.getDate()+c),l.setHours(0,0,0,0);return n?p.reverse():p}function qs(t){const s=Se(t);return s.setDate(1),s.setHours(0,0,0,0),s}function Ao(t){const s=Se(t),r=Xe(t,0);return r.setFullYear(s.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Do(t,s){const r=s==null?void 0:s.weekStartsOn,a=Se(t),n=a.getDay(),i=(n<r?-7:0)+6-(n-r);return a.setDate(a.getDate()+i),a.setHours(23,59,59,999),a}const Po={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},To=(t,s,r)=>{let a;const n=Po[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function Pt(t){return(s={})=>{const r=s.width?String(s.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Oo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ro={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fo={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Mo={date:Pt({formats:Oo,defaultWidth:"full"}),time:Pt({formats:Ro,defaultWidth:"full"}),dateTime:Pt({formats:Fo,defaultWidth:"full"})},Lo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zo=(t,s,r,a)=>Lo[t];function Ze(t){return(s,r)=>{const a=r!=null&&r.context?String(r.context):"standalone";let n;if(a==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,c=r!=null&&r.width?String(r.width):l;n=t.formattingValues[c]||t.formattingValues[l]}else{const l=t.defaultWidth,c=r!=null&&r.width?String(r.width):t.defaultWidth;n=t.values[c]||t.values[l]}const i=t.argumentCallback?t.argumentCallback(s):s;return n[i]}}const Uo={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Io={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bo={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vo={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},qo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$o={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wo=(t,s)=>{const r=Number(t),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Ho={ordinalNumber:Wo,era:Ze({values:Uo,defaultWidth:"wide"}),quarter:Ze({values:Io,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ze({values:Bo,defaultWidth:"wide"}),day:Ze({values:Vo,defaultWidth:"wide"}),dayPeriod:Ze({values:qo,defaultWidth:"wide",formattingValues:$o,defaultFormattingWidth:"wide"})};function et(t){return(s,r={})=>{const a=r.width,n=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],i=s.match(n);if(!i)return null;const l=i[0],c=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],p=Array.isArray(c)?Xo(c,y=>y.test(l)):Yo(c,y=>y.test(l));let x;x=t.valueCallback?t.valueCallback(p):p,x=r.valueCallback?r.valueCallback(x):x;const m=s.slice(l.length);return{value:x,rest:m}}}function Yo(t,s){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&s(t[r]))return r}function Xo(t,s){for(let r=0;r<t.length;r++)if(s(t[r]))return r}function Ra(t){return(s,r={})=>{const a=s.match(t.matchPattern);if(!a)return null;const n=a[0],i=s.match(t.parsePattern);if(!i)return null;let l=t.valueCallback?t.valueCallback(i[0]):i[0];l=r.valueCallback?r.valueCallback(l):l;const c=s.slice(n.length);return{value:l,rest:c}}}const Jo=/^(\d+)(th|st|nd|rd)?/i,Go=/\d+/i,Ko={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Qo={any:[/^b/i,/^(a|c)/i]},Zo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},el={any:[/1/i,/2/i,/3/i,/4/i]},tl={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},sl={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},rl={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},al={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},nl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},il={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ol={ordinalNumber:Ra({matchPattern:Jo,parsePattern:Go,valueCallback:t=>parseInt(t,10)}),era:et({matchPatterns:Ko,defaultMatchWidth:"wide",parsePatterns:Qo,defaultParseWidth:"any"}),quarter:et({matchPatterns:Zo,defaultMatchWidth:"wide",parsePatterns:el,defaultParseWidth:"any",valueCallback:t=>t+1}),month:et({matchPatterns:tl,defaultMatchWidth:"wide",parsePatterns:sl,defaultParseWidth:"any"}),day:et({matchPatterns:rl,defaultMatchWidth:"wide",parsePatterns:al,defaultParseWidth:"any"}),dayPeriod:et({matchPatterns:nl,defaultMatchWidth:"any",parsePatterns:il,defaultParseWidth:"any"})},ll={code:"en-US",formatDistance:To,formatLong:Mo,formatRelative:zo,localize:Ho,match:ol,options:{weekStartsOn:0,firstWeekContainsDate:1}};function cl(t){const s=Se(t);return Co(s,Ao(s))+1}function dl(t){const s=Se(t),r=+us(s)-+Eo(s);return Math.round(r/Pa)+1}function Fa(t,s){var m,y,b,D,j,A,g,C;const r=Se(t),a=r.getFullYear(),n=vs(),i=(C=(g=(D=(b=s==null?void 0:s.firstWeekContainsDate)!=null?b:(y=(m=s==null?void 0:s.locale)==null?void 0:m.options)==null?void 0:y.firstWeekContainsDate)!=null?D:n.firstWeekContainsDate)!=null?g:(A=(j=n.locale)==null?void 0:j.options)==null?void 0:A.firstWeekContainsDate)!=null?C:1,l=Xe(t,0);l.setFullYear(a+1,0,i),l.setHours(0,0,0,0);const c=Rt(l,s),p=Xe(t,0);p.setFullYear(a,0,i),p.setHours(0,0,0,0);const x=Rt(p,s);return r.getTime()>=c.getTime()?a+1:r.getTime()>=x.getTime()?a:a-1}function ul(t,s){var c,p,x,m,y,b,D,j;const r=vs(),a=(j=(D=(m=(x=s==null?void 0:s.firstWeekContainsDate)!=null?x:(p=(c=s==null?void 0:s.locale)==null?void 0:c.options)==null?void 0:p.firstWeekContainsDate)!=null?m:r.firstWeekContainsDate)!=null?D:(b=(y=r.locale)==null?void 0:y.options)==null?void 0:b.firstWeekContainsDate)!=null?j:1,n=Fa(t,s),i=Xe(t,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),Rt(i,s)}function ml(t,s){const r=Se(t),a=+Rt(r,s)-+ul(r,s);return Math.round(a/Pa)+1}function me(t,s){const r=t<0?"-":"",a=Math.abs(t).toString().padStart(s,"0");return r+a}const at={y(t,s){const r=t.getFullYear(),a=r>0?r:1-r;return me(s==="yy"?a%100:a,s.length)},M(t,s){const r=t.getMonth();return s==="M"?String(r+1):me(r+1,2)},d(t,s){return me(t.getDate(),s.length)},a(t,s){const r=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,s){return me(t.getHours()%12||12,s.length)},H(t,s){return me(t.getHours(),s.length)},m(t,s){return me(t.getMinutes(),s.length)},s(t,s){return me(t.getSeconds(),s.length)},S(t,s){const r=s.length,a=t.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return me(n,s.length)}},Ct={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fr={G:function(t,s,r){const a=t.getFullYear()>0?1:0;switch(s){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(t,s,r){if(s==="yo"){const a=t.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return at.y(t,s)},Y:function(t,s,r,a){const n=Fa(t,a),i=n>0?n:1-n;if(s==="YY"){const l=i%100;return me(l,2)}return s==="Yo"?r.ordinalNumber(i,{unit:"year"}):me(i,s.length)},R:function(t,s){const r=Ta(t);return me(r,s.length)},u:function(t,s){const r=t.getFullYear();return me(r,s.length)},Q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"Q":return String(a);case"QQ":return me(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,s,r){const a=Math.ceil((t.getMonth()+1)/3);switch(s){case"q":return String(a);case"qq":return me(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,s,r){const a=t.getMonth();switch(s){case"M":case"MM":return at.M(t,s);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(t,s,r){const a=t.getMonth();switch(s){case"L":return String(a+1);case"LL":return me(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(t,s,r,a){const n=ml(t,a);return s==="wo"?r.ordinalNumber(n,{unit:"week"}):me(n,s.length)},I:function(t,s,r){const a=dl(t);return s==="Io"?r.ordinalNumber(a,{unit:"week"}):me(a,s.length)},d:function(t,s,r){return s==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):at.d(t,s)},D:function(t,s,r){const a=cl(t);return s==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):me(a,s.length)},E:function(t,s,r){const a=t.getDay();switch(s){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"e":return String(i);case"ee":return me(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(t,s,r,a){const n=t.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(s){case"c":return String(i);case"cc":return me(i,s.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(t,s,r){const a=t.getDay(),n=a===0?7:a;switch(s){case"i":return String(n);case"ii":return me(n,s.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(t,s,r){const n=t.getHours()/12>=1?"pm":"am";switch(s){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(t,s,r){const a=t.getHours();let n;switch(a===12?n=Ct.noon:a===0?n=Ct.midnight:n=a/12>=1?"pm":"am",s){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(t,s,r){const a=t.getHours();let n;switch(a>=17?n=Ct.evening:a>=12?n=Ct.afternoon:a>=4?n=Ct.morning:n=Ct.night,s){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(t,s,r){if(s==="ho"){let a=t.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return at.h(t,s)},H:function(t,s,r){return s==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):at.H(t,s)},K:function(t,s,r){const a=t.getHours()%12;return s==="Ko"?r.ordinalNumber(a,{unit:"hour"}):me(a,s.length)},k:function(t,s,r){let a=t.getHours();return a===0&&(a=24),s==="ko"?r.ordinalNumber(a,{unit:"hour"}):me(a,s.length)},m:function(t,s,r){return s==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):at.m(t,s)},s:function(t,s,r){return s==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):at.s(t,s)},S:function(t,s){return at.S(t,s)},X:function(t,s,r){const a=t.getTimezoneOffset();if(a===0)return"Z";switch(s){case"X":return Lr(a);case"XXXX":case"XX":return ut(a);case"XXXXX":case"XXX":default:return ut(a,":")}},x:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"x":return Lr(a);case"xxxx":case"xx":return ut(a);case"xxxxx":case"xxx":default:return ut(a,":")}},O:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"O":case"OO":case"OOO":return"GMT"+Mr(a,":");case"OOOO":default:return"GMT"+ut(a,":")}},z:function(t,s,r){const a=t.getTimezoneOffset();switch(s){case"z":case"zz":case"zzz":return"GMT"+Mr(a,":");case"zzzz":default:return"GMT"+ut(a,":")}},t:function(t,s,r){const a=Math.trunc(t.getTime()/1e3);return me(a,s.length)},T:function(t,s,r){const a=t.getTime();return me(a,s.length)}};function Mr(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+s+me(i,2)}function Lr(t,s){return t%60===0?(t>0?"-":"+")+me(Math.abs(t)/60,2):ut(t,s)}function ut(t,s=""){const r=t>0?"-":"+",a=Math.abs(t),n=me(Math.trunc(a/60),2),i=me(a%60,2);return r+n+s+i}const zr=(t,s)=>{switch(t){case"P":return s.date({width:"short"});case"PP":return s.date({width:"medium"});case"PPP":return s.date({width:"long"});case"PPPP":default:return s.date({width:"full"})}},Ma=(t,s)=>{switch(t){case"p":return s.time({width:"short"});case"pp":return s.time({width:"medium"});case"ppp":return s.time({width:"long"});case"pppp":default:return s.time({width:"full"})}},xl=(t,s)=>{const r=t.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return zr(t,s);let i;switch(a){case"P":i=s.dateTime({width:"short"});break;case"PP":i=s.dateTime({width:"medium"});break;case"PPP":i=s.dateTime({width:"long"});break;case"PPPP":default:i=s.dateTime({width:"full"});break}return i.replace("{{date}}",zr(a,s)).replace("{{time}}",Ma(n,s))},hl={p:Ma,P:xl},fl=/^D+$/,pl=/^Y+$/,gl=["D","DD","YY","YYYY"];function bl(t){return fl.test(t)}function yl(t){return pl.test(t)}function jl(t,s,r){const a=Nl(t,s,r);if(console.warn(a),gl.includes(t))throw new RangeError(a)}function Nl(t,s,r){const a=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${s}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const wl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,vl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cl=/^'([^]*?)'?$/,El=/''/g,Sl=/[a-zA-Z]/;function Oe(t,s,r){var m,y,b,D,j,A,g,C,S,B,Y,w,U,z,o,u,d,E;const a=vs(),n=(y=(m=r==null?void 0:r.locale)!=null?m:a.locale)!=null?y:ll,i=(B=(S=(A=(j=r==null?void 0:r.firstWeekContainsDate)!=null?j:(D=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:D.firstWeekContainsDate)!=null?A:a.firstWeekContainsDate)!=null?S:(C=(g=a.locale)==null?void 0:g.options)==null?void 0:C.firstWeekContainsDate)!=null?B:1,l=(E=(d=(z=(U=r==null?void 0:r.weekStartsOn)!=null?U:(w=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:w.weekStartsOn)!=null?z:a.weekStartsOn)!=null?d:(u=(o=a.locale)==null?void 0:o.options)==null?void 0:u.weekStartsOn)!=null?E:0,c=Se(t);if(!_o(c))throw new RangeError("Invalid time value");let p=s.match(vl).map(f=>{const _=f[0];if(_==="p"||_==="P"){const I=hl[_];return I(f,n.formatLong)}return f}).join("").match(wl).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const _=f[0];if(_==="'")return{isToken:!1,value:kl(f)};if(Fr[_])return{isToken:!0,value:f};if(_.match(Sl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");return{isToken:!1,value:f}});n.localize.preprocessor&&(p=n.localize.preprocessor(c,p));const x={firstWeekContainsDate:i,weekStartsOn:l,locale:n};return p.map(f=>{if(!f.isToken)return f.value;const _=f.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&yl(_)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&bl(_))&&jl(_,s,String(t));const I=Fr[_[0]];return I(c,_,n.localize,x)}).join("")}function kl(t){const s=t.match(Cl);return s?s[1].replace(El,"'"):t}function La(t){return Dt(t,So(t))}function _l(t,s){return No(t,-30)}function Al(t,s){return Da(t,-1)}const Dl={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},Pl=(t,s,r)=>{let a;const n=Dl[t];return typeof n=="string"?a=n:s===1?a=n.one:a=n.other.replace("{{count}}",s.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"en "+a:"hace "+a:a},Tl={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},Ol={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Rl={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fl={date:Pt({formats:Tl,defaultWidth:"full"}),time:Pt({formats:Ol,defaultWidth:"full"}),dateTime:Pt({formats:Rl,defaultWidth:"full"})},Ml={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Ll={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},zl=(t,s,r,a)=>s.getHours()!==1?Ll[t]:Ml[t],Ul={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},Il={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},Bl={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},Vl={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},ql={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},$l={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},Wl=(t,s)=>Number(t)+"º",Hl={ordinalNumber:Wl,era:Ze({values:Ul,defaultWidth:"wide"}),quarter:Ze({values:Il,defaultWidth:"wide",argumentCallback:t=>Number(t)-1}),month:Ze({values:Bl,defaultWidth:"wide"}),day:Ze({values:Vl,defaultWidth:"wide"}),dayPeriod:Ze({values:ql,defaultWidth:"wide",formattingValues:$l,defaultFormattingWidth:"wide"})},Yl=/^(\d+)(º)?/i,Xl=/\d+/i,Jl={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},Gl={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},Kl={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},Ql={any:[/1/i,/2/i,/3/i,/4/i]},Zl={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},ec={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},tc={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},sc={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},rc={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},ac={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},nc={ordinalNumber:Ra({matchPattern:Yl,parsePattern:Xl,valueCallback:function(t){return parseInt(t,10)}}),era:et({matchPatterns:Jl,defaultMatchWidth:"wide",parsePatterns:Gl,defaultParseWidth:"any"}),quarter:et({matchPatterns:Kl,defaultMatchWidth:"wide",parsePatterns:Ql,defaultParseWidth:"any",valueCallback:t=>t+1}),month:et({matchPatterns:Zl,defaultMatchWidth:"wide",parsePatterns:ec,defaultParseWidth:"any"}),day:et({matchPatterns:tc,defaultMatchWidth:"wide",parsePatterns:sc,defaultParseWidth:"any"}),dayPeriod:et({matchPatterns:rc,defaultMatchWidth:"any",parsePatterns:ac,defaultParseWidth:"any"})},Tt={code:"es",formatDistance:Pl,formatLong:Fl,formatRelative:zl,localize:Hl,match:nc,options:{weekStartsOn:1,firstWeekContainsDate:1}};function ic(){const{data:t=[],isLoading:s,isError:r}=jo(),[a,n]=T.useState("todos"),[i,l]=T.useState("todas"),[c,p]=T.useState(""),[x,m]=T.useState("todos"),y=t.filter(g=>{if(a!=="todos"&&g.estado!==a||i!=="todas"&&g.prioridad!==i||x!=="todos"&&g.tipo!==x)return!1;if(c){const C=c.toLowerCase(),S=g.numeroCaso.toLowerCase().includes(C),B=g.usuario.nombreCompleto.toLowerCase().includes(C),Y=g.descripcion.toLowerCase().includes(C);if(!S&&!B&&!Y)return!1}return!0}),b=g=>{try{return Oe(new Date(g),"dd MMM yyyy",{locale:Tt})}catch(C){return g}},D=g=>({nuevo:"bg-blue-100 text-blue-800 border-blue-200",asignado:"bg-purple-100 text-purple-800 border-purple-200",en_proceso:"bg-yellow-100 text-yellow-800 border-yellow-200",en_visita:"bg-orange-100 text-orange-800 border-orange-200",resuelto:"bg-green-100 text-green-800 border-green-200",cerrado:"bg-gray-100 text-gray-800 border-gray-200"})[g]||"bg-gray-100 text-gray-800 border-gray-200",j=g=>({baja:"bg-gray-100 text-gray-700 border-gray-200",media:"bg-blue-100 text-blue-700 border-blue-200",alta:"bg-orange-100 text-orange-700 border-orange-200",urgente:"bg-red-100 text-red-700 border-red-200"})[g]||"bg-gray-100 text-gray-700 border-gray-200",A=g=>g.replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase());return s?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Cargando casos..."})]})}):r?e.jsx("div",{className:"bg-destructive/10 border border-destructive rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(it,{className:"text-destructive",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-destructive font-semibold",children:"Error al cargar casos"}),e.jsx("p",{className:"text-destructive/80",children:"Por favor, intente nuevamente m�s tarde."})]})]})}):e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Casos"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona todos los casos y tickets del sistema"})]}),e.jsxs(lt,{to:"/nuevo-caso",className:"inline-flex items-center space-x-2 bg-primary text-primary-foreground px-6 py-3 rounded-lg hover:bg-primary/90 transition-colors font-medium shadow-lg hover:shadow-xl",children:[e.jsx(Ft,{size:20}),e.jsx("span",{children:"Nuevo Caso"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:t.length})]}),e.jsx(fs,{className:"text-primary",size:24})]})}),e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nuevos"}),e.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:t.filter(g=>g.estado==="nuevo").length})]}),e.jsx(We,{className:"text-blue-600",size:24})]})}),e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"En Proceso"}),e.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:t.filter(g=>["asignado","en_proceso","en_visita"].includes(g.estado)).length})]}),e.jsx(We,{className:"text-yellow-600",size:24})]})}),e.jsx("div",{className:"bg-card border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Urgentes"}),e.jsx("p",{className:"text-2xl font-bold text-card-foreground",children:t.filter(g=>g.prioridad==="urgente").length})]}),e.jsx(it,{className:"text-red-600",size:24})]})})]}),e.jsxs("div",{className:"bg-card border rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(gt,{size:20,className:"text-muted-foreground"}),e.jsx("h2",{className:"text-lg font-semibold text-card-foreground",children:"Filtros"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"Estado"}),e.jsxs("select",{value:a,onChange:g=>n(g.target.value),className:"w-full px-3 py-2 bg-background border border-input text-foreground rounded-md focus:ring-2 focus:ring-ring focus:border-input",children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"nuevo",children:"Nuevo"}),e.jsx("option",{value:"asignado",children:"Asignado"}),e.jsx("option",{value:"en_proceso",children:"En Proceso"}),e.jsx("option",{value:"en_visita",children:"En Visita"}),e.jsx("option",{value:"resuelto",children:"Resuelto"}),e.jsx("option",{value:"cerrado",children:"Cerrado"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"Prioridad"}),e.jsxs("select",{value:i,onChange:g=>l(g.target.value),className:"w-full px-3 py-2 bg-background border border-input text-foreground rounded-md focus:ring-2 focus:ring-ring focus:border-input",children:[e.jsx("option",{value:"todas",children:"Todas"}),e.jsx("option",{value:"baja",children:"Baja"}),e.jsx("option",{value:"media",children:"Media"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"urgente",children:"Urgente"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"Tipo"}),e.jsxs("select",{value:x,onChange:g=>m(g.target.value),className:"w-full px-3 py-2 bg-background border border-input text-foreground rounded-md focus:ring-2 focus:ring-ring focus:border-input",children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"garantia",children:"Garant�a"}),e.jsx("option",{value:"condominio",children:"Condominio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-card-foreground mb-2",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"N�mero, cliente o descripci�n...",value:c,onChange:g=>p(g.target.value),className:"w-full px-3 py-2 pl-10 bg-background border border-input text-foreground placeholder-muted-foreground rounded-md focus:ring-2 focus:ring-ring focus:border-input"}),e.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:18})]})]})]})]}),e.jsxs("div",{className:"bg-card border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b bg-muted/50",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Mostrando ",e.jsx("span",{className:"font-semibold text-foreground",children:y.length})," de"," ",e.jsx("span",{className:"font-semibold text-foreground",children:t.length})," casos"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-border",children:[e.jsx("thead",{className:"bg-muted/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Caso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Cliente"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Ubicaci�n"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Prioridad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-card divide-y divide-border",children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center",children:e.jsxs("div",{className:"text-muted-foreground",children:[e.jsx(it,{className:"mx-auto mb-2 text-muted-foreground",size:48}),e.jsx("p",{className:"text-lg font-medium text-foreground",children:"No se encontraron casos"}),e.jsx("p",{className:"text-sm",children:"Intenta ajustar los filtros de b�squeda"})]})})}):y.map(g=>e.jsxs("tr",{className:"hover:bg-muted/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:g.numeroCaso}),e.jsx("div",{className:"text-sm text-muted-foreground",children:g.categoria})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(tt,{size:16,className:"text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:g.usuario.nombreCompleto}),e.jsx("div",{className:"text-sm text-muted-foreground",children:g.usuario.telefono})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ht,{size:16,className:"text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-foreground",children:g.condominio.nombre}),e.jsx("div",{className:"text-sm text-muted-foreground",children:g.unidad})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${D(g.estado)}`,children:A(g.estado)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${j(g.prioridad)}`,children:g.prioridad.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:b(g.fechaCreacion)})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs(lt,{to:`/casos/${g.id}`,className:"inline-flex items-center space-x-1 text-primary hover:text-primary/80 font-medium",children:[e.jsx("span",{children:"Ver detalles"}),e.jsx(ea,{size:16})]})})]},g.id))})]})})]})]})}function oc(){const{id:t}=ln(),[s,r]=T.useState(null),[a,n]=T.useState(!0),[i,l]=T.useState(null),[c,p]=T.useState([]),[x,m]=T.useState(""),[y,b]=T.useState(!1),[D,j]=T.useState(null);T.useEffect(()=>{t&&(A(t),g())},[t]);const A=o=>O(this,null,function*(){try{n(!0),l(null);const u=yield ot.getById(o);r(u)}catch(u){console.error("Error cargando caso:",u),l("Error al cargar el caso. Por favor verifica que el backend este corriendo.")}finally{n(!1)}}),g=()=>O(this,null,function*(){try{const o=yield Pe.obtenerTecnicos();p(o)}catch(o){console.error("Error cargando tecnicos:",o)}}),C=()=>O(this,null,function*(){if(!(!x||!t))try{b(!0),j(null),yield ot.asignarTecnico(t,x),j({tipo:"success",texto:"Tecnico asignado exitosamente"}),yield A(t),m("")}catch(o){console.error("Error asignando tecnico:",o),j({tipo:"error",texto:"Error al asignar el tecnico. Intenta de nuevo."})}finally{b(!1),setTimeout(()=>j(null),5e3)}}),S=o=>O(this,null,function*(){if(t)try{b(!0),j(null),yield ot.actualizarEstado(t,o),j({tipo:"success",texto:`Estado actualizado a ${U(o)}`}),yield A(t)}catch(u){console.error("Error actualizando estado:",u),j({tipo:"error",texto:"Error al actualizar el estado. Intenta de nuevo."})}finally{b(!1),setTimeout(()=>j(null),5e3)}}),B=o=>{const u=new Date(o);return new Intl.DateTimeFormat("es-DO",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(u)},Y=o=>({nuevo:"bg-blue-100 text-blue-800 border-blue-200",asignado:"bg-purple-100 text-purple-800 border-purple-200",en_proceso:"bg-yellow-100 text-yellow-800 border-yellow-200",en_visita:"bg-orange-100 text-orange-800 border-orange-200",resuelto:"bg-green-100 text-green-800 border-green-200",cerrado:"bg-gray-100 text-gray-800 border-gray-200"})[o]||"bg-gray-100 text-gray-800 border-gray-200",w=o=>({baja:"bg-gray-100 text-gray-800 border-gray-200",media:"bg-blue-100 text-blue-800 border-blue-200",alta:"bg-orange-100 text-orange-800 border-orange-200",urgente:"bg-red-100 text-red-800 border-red-200"})[o]||"bg-gray-100 text-gray-800 border-gray-200",U=o=>o.replace(/_/g," ").replace(/\b\w/g,u=>u.toUpperCase()),z=o=>({creacion:fs,asignacion:tt,actualizacion:mr,visita:$t,resolucion:$e,comentario:mt})[o]||yt;return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando caso..."})]})}):i||!s?e.jsxs("div",{children:[e.jsxs(lt,{to:"/",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800 mb-6",children:[e.jsx(ur,{size:20}),e.jsx("span",{children:"Volver al Dashboard"})]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(it,{className:"text-red-600",size:24}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-red-900 font-semibold",children:"Error"}),e.jsx("p",{className:"text-red-700",children:i||"Caso no encontrado"})]})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(lt,{to:"/",className:"inline-flex items-center space-x-2 text-blue-600 hover:text-blue-800",children:[e.jsx(ur,{size:20}),e.jsx("span",{children:"Volver al Dashboard"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[e.jsx(mr,{size:18}),e.jsx("span",{children:"Editar"})]}),e.jsxs("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center space-x-2",children:[e.jsx(ps,{size:18}),e.jsx("span",{children:"Eliminar"})]})]})]}),D&&e.jsx("div",{className:`rounded-lg p-4 border ${D.tipo==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[D.tipo==="success"?e.jsx($e,{size:20}):e.jsx(it,{size:20}),e.jsx("span",{className:"font-medium",children:D.texto})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rapidas"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignar Tecnico"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:x,onChange:o=>m(o.target.value),disabled:y,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Seleccionar tecnico..."}),c.map(o=>e.jsxs("option",{value:o.id,children:[o.nombreCompleto," - ",o.telefono]},o.id))]}),e.jsxs("button",{onClick:C,disabled:!x||y,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(yn,{size:18}),e.jsx("span",{children:y?"Asignando...":"Asignar"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cambiar Estado"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[((s==null?void 0:s.estado)==="nuevo"||(s==null?void 0:s.estado)==="asignado")&&e.jsxs("button",{onClick:()=>S("en_proceso"),disabled:y,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(jn,{size:18}),e.jsx("span",{children:"Marcar En Proceso"})]}),(s==null?void 0:s.estado)==="en_proceso"&&e.jsxs("button",{onClick:()=>S("resuelto"),disabled:y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(gs,{size:18}),e.jsx("span",{children:"Marcar como Resuelto"})]}),(s==null?void 0:s.estado)==="resuelto"&&e.jsxs("button",{onClick:()=>S("cerrado"),disabled:y,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors flex items-center space-x-2 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[e.jsx(Wt,{size:18}),e.jsx("span",{children:"Cerrar Caso"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s.numeroCaso}),e.jsx("p",{className:"text-gray-600 text-lg",children:s.categoria})]}),e.jsxs("div",{className:"flex flex-col space-y-2 items-end",children:[e.jsx("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border ${Y(s.estado)}`,children:U(s.estado)}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium border ${w(s.prioridad)}`,children:["Prioridad: ",s.prioridad.toUpperCase()]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Descripcion del Problema"}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.descripcion})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(tt,{size:20}),e.jsx("span",{children:"Informacion del Cliente"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(tt,{className:"text-gray-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.usuario.nombreCompleto})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Yt,{className:"text-gray-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telefono"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.usuario.telefono})]})]}),s.usuario.email&&e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(xt,{className:"text-gray-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.usuario.email})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ht,{className:"text-gray-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Condominio"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.condominio.nombre}),e.jsx("p",{className:"text-sm text-gray-600",children:s.condominio.direccion})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($t,{className:"text-gray-400 mt-0.5",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Unidad"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.unidad})]})]})]})]})]}),(s.diagnostico||s.solucionAplicada)&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Nn,{size:20}),e.jsx("span",{children:"Diagnostico y Solucion"})]}),e.jsxs("div",{className:"space-y-4",children:[s.diagnostico&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Diagnostico"}),e.jsx("p",{className:"text-gray-900 bg-gray-50 p-3 rounded-lg",children:s.diagnostico})]}),s.solucionAplicada&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Solucion Aplicada"}),e.jsx("p",{className:"text-gray-900 bg-green-50 p-3 rounded-lg",children:s.solucionAplicada})]})]})]}),s.timelineEventos&&s.timelineEventos.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(We,{size:20}),e.jsx("span",{children:"Timeline de Eventos"})]}),e.jsx("div",{className:"space-y-4",children:s.timelineEventos.map((o,u)=>{const d=z(o.tipoEvento),E=u===s.timelineEventos.length-1;return e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(d,{className:"text-blue-600",size:20})}),!E&&e.jsx("div",{className:"w-0.5 h-full bg-gray-200 mt-2"})]}),e.jsxs("div",{className:"flex-1 pb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:o.titulo}),e.jsx("span",{className:"text-sm text-gray-500",children:B(o.fecha)})]}),o.descripcion&&e.jsx("p",{className:"text-gray-600 text-sm",children:o.descripcion}),o.usuarioNombre&&e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:["Por: ",o.usuarioNombre]})]})]},o.id)})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles del Caso"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Tipo de Caso"}),e.jsx("p",{className:"text-gray-900 font-medium capitalize",children:s.tipo})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Fecha de Creacion"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:B(s.fechaCreacion)})]})]}),s.fechaVisita&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Fecha de Visita"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900",children:[e.jsx(qe,{size:16}),e.jsx("span",{children:B(s.fechaVisita)})]})]}),s.fechaResolucion&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Fecha de Resolucion"}),e.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[e.jsx($e,{size:16}),e.jsx("span",{children:B(s.fechaResolucion)})]})]}),s.tiempoEstimado&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Tiempo Estimado"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-900",children:[e.jsx(We,{size:16}),e.jsx("span",{children:s.tiempoEstimado})]})]})]})]}),s.tecnicoAsignado&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tecnico Asignado"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-semibold text-lg",children:s.tecnicoAsignado.nombreCompleto.charAt(0)})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.tecnicoAsignado.nombreCompleto}),e.jsx("p",{className:"text-sm text-gray-500",children:s.tecnicoAsignado.telefono})]})]}),s.tecnicoAsignado.email&&e.jsx("p",{className:"text-sm text-gray-600",children:s.tecnicoAsignado.email})]}),s.satisfaccionCliente&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Satisfaccion del Cliente"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600",children:s.satisfaccionCliente.toFixed(1)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex space-x-1 mb-1",children:[1,2,3,4,5].map(o=>e.jsx("span",{className:`text-2xl ${o<=s.satisfaccionCliente?"text-yellow-400":"text-gray-300"}`,children:"★"},o))}),e.jsx("p",{className:"text-sm text-gray-600",children:"de 5 estrellas"})]})]})]})]})]})]})}var Qt=t=>t.type==="checkbox",ft=t=>t instanceof Date,ze=t=>t==null;const za=t=>typeof t=="object";var Ce=t=>!ze(t)&&!Array.isArray(t)&&za(t)&&!ft(t),lc=t=>Ce(t)&&t.target?Qt(t.target)?t.target.checked:t.target.value:t,cc=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,dc=(t,s)=>t.has(cc(s)),uc=t=>{const s=t.constructor&&t.constructor.prototype;return Ce(s)&&s.hasOwnProperty("isPrototypeOf")},Qs=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function _e(t){let s;const r=Array.isArray(t),a=typeof FileList!="undefined"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(Qs&&(t instanceof Blob||a))&&(r||Ce(t)))if(s=r?[]:Object.create(Object.getPrototypeOf(t)),!r&&!uc(t))s=t;else for(const n in t)t.hasOwnProperty(n)&&(s[n]=_e(t[n]));else return t;return s}var Cs=t=>/^\w*$/.test(t),Ne=t=>t===void 0,Zs=t=>Array.isArray(t)?t.filter(Boolean):[],er=t=>Zs(t.replace(/["|']|\]/g,"").split(/\.|\[/)),X=(t,s,r)=>{if(!s||!Ce(t))return r;const a=(Cs(s)?[s]:er(s)).reduce((n,i)=>ze(n)?n:n[i],t);return Ne(a)||a===t?Ne(t[s])?r:t[s]:a},Qe=t=>typeof t=="boolean",ye=(t,s,r)=>{let a=-1;const n=Cs(s)?[s]:er(s),i=n.length,l=i-1;for(;++a<i;){const c=n[a];let p=r;if(a!==l){const x=t[c];p=Ce(x)||Array.isArray(x)?x:isNaN(+n[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=p,t=t[c]}};const Ur={BLUR:"blur",FOCUS_OUT:"focusout"},He={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},st={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},mc=Me.createContext(null);mc.displayName="HookFormContext";var xc=(t,s,r,a=!0)=>{const n={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const l=i;return s._proxyFormState[l]!==He.all&&(s._proxyFormState[l]=!a||He.all),t[l]}});return n};const hc=typeof window!="undefined"?Me.useLayoutEffect:Me.useEffect;var Ve=t=>typeof t=="string",fc=(t,s,r,a,n)=>Ve(t)?(a&&s.watch.add(t),X(r,t,n)):Array.isArray(t)?t.map(i=>(a&&s.watch.add(i),X(r,i))):(a&&(s.watchAll=!0),r),$s=t=>ze(t)||!za(t);function nt(t,s,r=new WeakSet){if($s(t)||$s(s))return t===s;if(ft(t)&&ft(s))return t.getTime()===s.getTime();const a=Object.keys(t),n=Object.keys(s);if(a.length!==n.length)return!1;if(r.has(t)||r.has(s))return!0;r.add(t),r.add(s);for(const i of a){const l=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const c=s[i];if(ft(l)&&ft(c)||Ce(l)&&Ce(c)||Array.isArray(l)&&Array.isArray(c)?!nt(l,c,r):l!==c)return!1}}return!0}var pc=(t,s,r,a,n)=>s?ne(M({},r[t]),{types:ne(M({},r[t]&&r[t].types?r[t].types:{}),{[a]:n||!0})}):{},Vt=t=>Array.isArray(t)?t:[t],Ir=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}};function Ua(t,s){const r={};for(const a in t)if(t.hasOwnProperty(a)){const n=t[a],i=s[a];if(n&&Ce(n)&&i){const l=Ua(n,i);Ce(l)&&(r[a]=l)}else t[a]&&(r[a]=i)}return r}var Le=t=>Ce(t)&&!Object.keys(t).length,tr=t=>t.type==="file",Ye=t=>typeof t=="function",xs=t=>{if(!Qs)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ia=t=>t.type==="select-multiple",sr=t=>t.type==="radio",gc=t=>sr(t)||Qt(t),Ds=t=>xs(t)&&t.isConnected;function bc(t,s){const r=s.slice(0,-1).length;let a=0;for(;a<r;)t=Ne(t)?a++:t[s[a++]];return t}function yc(t){for(const s in t)if(t.hasOwnProperty(s)&&!Ne(t[s]))return!1;return!0}function ve(t,s){const r=Array.isArray(s)?s:Cs(s)?[s]:er(s),a=r.length===1?t:bc(t,r),n=r.length-1,i=r[n];return a&&delete a[i],n!==0&&(Ce(a)&&Le(a)||Array.isArray(a)&&yc(a))&&ve(t,r.slice(0,-1)),t}var jc=t=>{for(const s in t)if(Ye(t[s]))return!0;return!1};function Ba(t){return Array.isArray(t)||Ce(t)&&!jc(t)}function Ws(t,s={}){for(const r in t)Ba(t[r])?(s[r]=Array.isArray(t[r])?[]:{},Ws(t[r],s[r])):Ne(t[r])||(s[r]=!0);return s}function St(t,s,r){r||(r=Ws(s));for(const a in t)Ba(t[a])?Ne(s)||$s(r[a])?r[a]=Ws(t[a],Array.isArray(t[a])?[]:{}):St(t[a],ze(s)?{}:s[a],r[a]):r[a]=!nt(t[a],s[a]);return r}const Br={value:!1,isValid:!1},Vr={value:!0,isValid:!0};var Va=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ne(t[0].attributes.value)?Ne(t[0].value)||t[0].value===""?Vr:{value:t[0].value,isValid:!0}:Vr:Br}return Br},qa=(t,{valueAsNumber:s,valueAsDate:r,setValueAs:a})=>Ne(t)?t:s?t===""?NaN:t&&+t:r&&Ve(t)?new Date(t):a?a(t):t;const qr={isValid:!1,value:null};var $a=t=>Array.isArray(t)?t.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,qr):qr;function $r(t){const s=t.ref;return tr(s)?s.files:sr(s)?$a(t.refs).value:Ia(s)?[...s.selectedOptions].map(({value:r})=>r):Qt(s)?Va(t.refs).value:qa(Ne(s.value)?t.ref.value:s.value,t)}var Nc=(t,s,r,a)=>{const n={};for(const i of t){const l=X(s,i);l&&ye(n,i,l._f)}return{criteriaMode:r,names:[...t],fields:n,shouldUseNativeValidation:a}},hs=t=>t instanceof RegExp,It=t=>Ne(t)?t:hs(t)?t.source:Ce(t)?hs(t.value)?t.value.source:t.value:t,Wr=t=>({isOnSubmit:!t||t===He.onSubmit,isOnBlur:t===He.onBlur,isOnChange:t===He.onChange,isOnAll:t===He.all,isOnTouch:t===He.onTouched});const Hr="AsyncFunction";var wc=t=>!!t&&!!t.validate&&!!(Ye(t.validate)&&t.validate.constructor.name===Hr||Ce(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Hr)),vc=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Yr=(t,s,r)=>!r&&(s.watchAll||s.watch.has(t)||[...s.watch].some(a=>t.startsWith(a)&&/^\.\w+/.test(t.slice(a.length))));const qt=(t,s,r,a)=>{for(const i of r||Object.keys(t)){const l=X(t,i);if(l){const n=l,{_f:c}=n,p=vt(n,["_f"]);if(c){if(c.refs&&c.refs[0]&&s(c.refs[0],i)&&!a)return!0;if(c.ref&&s(c.ref,c.name)&&!a)return!0;if(qt(p,s))break}else if(Ce(p)&&qt(p,s))break}}};function Xr(t,s,r){const a=X(t,r);if(a||Cs(r))return{error:a,name:r};const n=r.split(".");for(;n.length;){const i=n.join("."),l=X(s,i),c=X(t,i);if(l&&!Array.isArray(l)&&r!==i)return{name:r};if(c&&c.type)return{name:i,error:c};if(c&&c.root&&c.root.type)return{name:`${i}.root`,error:c.root};n.pop()}return{name:r}}var Cc=(t,s,r,a)=>{r(t);const l=t,{name:n}=l,i=vt(l,["name"]);return Le(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(c=>s[c]===(!a||He.all))},Ec=(t,s,r)=>!t||!s||t===s||Vt(t).some(a=>a&&(r?a===s:a.startsWith(s)||s.startsWith(a))),Sc=(t,s,r,a,n)=>n.isOnAll?!1:!r&&n.isOnTouch?!(s||t):(r?a.isOnBlur:n.isOnBlur)?!t:(r?a.isOnChange:n.isOnChange)?t:!0,kc=(t,s)=>!Zs(X(t,s)).length&&ve(t,s),_c=(t,s,r)=>{const a=Vt(X(t,r));return ye(a,"root",s[r]),ye(t,r,a),t};function Jr(t,s,r="validate"){if(Ve(t)||Array.isArray(t)&&t.every(Ve)||Qe(t)&&!t)return{type:r,message:Ve(t)?t:"",ref:s}}var Et=t=>Ce(t)&&!hs(t)?t:{value:t,message:""},Gr=(t,s,r,a,n,i)=>O(G,null,function*(){const{ref:l,refs:c,required:p,maxLength:x,minLength:m,min:y,max:b,pattern:D,validate:j,name:A,valueAsNumber:g,mount:C}=t._f,S=X(r,A);if(!C||s.has(A))return{};const B=c?c[0]:l,Y=f=>{n&&B.reportValidity&&(B.setCustomValidity(Qe(f)?"":f||""),B.reportValidity())},w={},U=sr(l),z=Qt(l),o=U||z,u=(g||tr(l))&&Ne(l.value)&&Ne(S)||xs(l)&&l.value===""||S===""||Array.isArray(S)&&!S.length,d=pc.bind(null,A,a,w),E=(f,_,I,P=st.maxLength,R=st.minLength)=>{const V=f?_:I;w[A]=M({type:f?P:R,message:V,ref:l},d(f?P:R,V))};if(i?!Array.isArray(S)||!S.length:p&&(!o&&(u||ze(S))||Qe(S)&&!S||z&&!Va(c).isValid||U&&!$a(c).isValid)){const{value:f,message:_}=Ve(p)?{value:!!p,message:p}:Et(p);if(f&&(w[A]=M({type:st.required,message:_,ref:B},d(st.required,_)),!a))return Y(_),w}if(!u&&(!ze(y)||!ze(b))){let f,_;const I=Et(b),P=Et(y);if(!ze(S)&&!isNaN(S)){const R=l.valueAsNumber||S&&+S;ze(I.value)||(f=R>I.value),ze(P.value)||(_=R<P.value)}else{const R=l.valueAsDate||new Date(S),V=ce=>new Date(new Date().toDateString()+" "+ce),K=l.type=="time",W=l.type=="week";Ve(I.value)&&S&&(f=K?V(S)>V(I.value):W?S>I.value:R>new Date(I.value)),Ve(P.value)&&S&&(_=K?V(S)<V(P.value):W?S<P.value:R<new Date(P.value))}if((f||_)&&(E(!!f,I.message,P.message,st.max,st.min),!a))return Y(w[A].message),w}if((x||m)&&!u&&(Ve(S)||i&&Array.isArray(S))){const f=Et(x),_=Et(m),I=!ze(f.value)&&S.length>+f.value,P=!ze(_.value)&&S.length<+_.value;if((I||P)&&(E(I,f.message,_.message),!a))return Y(w[A].message),w}if(D&&!u&&Ve(S)){const{value:f,message:_}=Et(D);if(hs(f)&&!S.match(f)&&(w[A]=M({type:st.pattern,message:_,ref:l},d(st.pattern,_)),!a))return Y(_),w}if(j){if(Ye(j)){const f=yield j(S,r),_=Jr(f,B);if(_&&(w[A]=M(M({},_),d(st.validate,_.message)),!a))return Y(_.message),w}else if(Ce(j)){let f={};for(const _ in j){if(!Le(f)&&!a)break;const I=Jr(yield j[_](S,r),B,_);I&&(f=M(M({},I),d(_,I.message)),Y(I.message),a&&(w[A]=f))}if(!Le(f)&&(w[A]=M({ref:B},f),!a))return w}}return Y(!0),w});const Ac={mode:He.onSubmit,reValidateMode:He.onChange,shouldFocusError:!0};function Dc(t={}){let s=M(M({},Ac),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ye(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},n=Ce(s.defaultValues)||Ce(s.values)?_e(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:_e(n),l={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,x=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let y=M({},m);const b={array:Ir(),state:Ir()},D=s.criteriaMode===He.all,j=h=>N=>{clearTimeout(x),x=setTimeout(h,N)},A=h=>O(this,null,function*(){if(!s.disabled&&(m.isValid||y.isValid||h)){const N=s.resolver?Le((yield z()).errors):yield u(a,!0);N!==r.isValid&&b.state.next({isValid:N})}}),g=(h,N)=>{!s.disabled&&(m.isValidating||m.validatingFields||y.isValidating||y.validatingFields)&&((h||Array.from(c.mount)).forEach(k=>{k&&(N?ye(r.validatingFields,k,N):ve(r.validatingFields,k))}),b.state.next({validatingFields:r.validatingFields,isValidating:!Le(r.validatingFields)}))},C=(h,N=[],k,$,F=!0,L=!0)=>{if($&&k&&!s.disabled){if(l.action=!0,L&&Array.isArray(X(a,h))){const q=k(X(a,h),$.argA,$.argB);F&&ye(a,h,q)}if(L&&Array.isArray(X(r.errors,h))){const q=k(X(r.errors,h),$.argA,$.argB);F&&ye(r.errors,h,q),kc(r.errors,h)}if((m.touchedFields||y.touchedFields)&&L&&Array.isArray(X(r.touchedFields,h))){const q=k(X(r.touchedFields,h),$.argA,$.argB);F&&ye(r.touchedFields,h,q)}(m.dirtyFields||y.dirtyFields)&&(r.dirtyFields=St(n,i)),b.state.next({name:h,isDirty:E(h,N),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else ye(i,h,N)},S=(h,N)=>{ye(r.errors,h,N),b.state.next({errors:r.errors})},B=h=>{r.errors=h,b.state.next({errors:r.errors,isValid:!1})},Y=(h,N,k,$)=>{const F=X(a,h);if(F){const L=X(i,h,Ne(k)?X(n,h):k);Ne(L)||$&&$.defaultChecked||N?ye(i,h,N?L:$r(F._f)):I(h,L),l.mount&&A()}},w=(h,N,k,$,F)=>{let L=!1,q=!1;const Z={name:h};if(!s.disabled){if(!k||$){(m.isDirty||y.isDirty)&&(q=r.isDirty,r.isDirty=Z.isDirty=E(),L=q!==Z.isDirty);const se=nt(X(n,h),N);q=!!X(r.dirtyFields,h),se?ve(r.dirtyFields,h):ye(r.dirtyFields,h,!0),Z.dirtyFields=r.dirtyFields,L=L||(m.dirtyFields||y.dirtyFields)&&q!==!se}if(k){const se=X(r.touchedFields,h);se||(ye(r.touchedFields,h,k),Z.touchedFields=r.touchedFields,L=L||(m.touchedFields||y.touchedFields)&&se!==k)}L&&F&&b.state.next(Z)}return L?Z:{}},U=(h,N,k,$)=>{const F=X(r.errors,h),L=(m.isValid||y.isValid)&&Qe(N)&&r.isValid!==N;if(s.delayError&&k?(p=j(()=>S(h,k)),p(s.delayError)):(clearTimeout(x),p=null,k?ye(r.errors,h,k):ve(r.errors,h)),(k?!nt(F,k):F)||!Le($)||L){const q=ne(M(M({},$),L&&Qe(N)?{isValid:N}:{}),{errors:r.errors,name:h});r=M(M({},r),q),b.state.next(q)}},z=h=>O(this,null,function*(){g(h,!0);const N=yield s.resolver(i,s.context,Nc(h||c.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return g(h),N}),o=h=>O(this,null,function*(){const{errors:N}=yield z(h);if(h)for(const k of h){const $=X(N,k);$?ye(r.errors,k,$):ve(r.errors,k)}else r.errors=N;return N}),u=($,F,...L)=>O(this,[$,F,...L],function*(h,N,k={valid:!0}){for(const Z in h){const se=h[Z];if(se){const q=se,{_f:be}=q,Ge=vt(q,["_f"]);if(be){const ke=c.array.has(be.name),Te=se._f&&wc(se._f);Te&&m.validatingFields&&g([be.name],!0);const Re=yield Gr(se,c.disabled,i,D,s.shouldUseNativeValidation&&!N,ke);if(Te&&m.validatingFields&&g([be.name]),Re[be.name]&&(k.valid=!1,N))break;!N&&(X(Re,be.name)?ke?_c(r.errors,Re,be.name):ye(r.errors,be.name,Re[be.name]):ve(r.errors,be.name))}!Le(Ge)&&(yield u(Ge,N,k))}}return k.valid}),d=()=>{for(const h of c.unMount){const N=X(a,h);N&&(N._f.refs?N._f.refs.every(k=>!Ds(k)):!Ds(N._f.ref))&&Ae(h)}c.unMount=new Set},E=(h,N)=>!s.disabled&&(h&&N&&ye(i,h,N),!nt(ce(),n)),f=(h,N,k)=>fc(h,c,M({},l.mount?i:Ne(N)?n:Ve(h)?{[h]:N}:N),k,N),_=h=>Zs(X(l.mount?i:n,h,s.shouldUnregister?X(n,h,[]):[])),I=(h,N,k={})=>{const $=X(a,h);let F=N;if($){const L=$._f;L&&(!L.disabled&&ye(i,h,qa(N,L)),F=xs(L.ref)&&ze(N)?"":N,Ia(L.ref)?[...L.ref.options].forEach(q=>q.selected=F.includes(q.value)):L.refs?Qt(L.ref)?L.refs.forEach(q=>{(!q.defaultChecked||!q.disabled)&&(Array.isArray(F)?q.checked=!!F.find(Z=>Z===q.value):q.checked=F===q.value||!!F)}):L.refs.forEach(q=>q.checked=q.value===F):tr(L.ref)?L.ref.value="":(L.ref.value=F,L.ref.type||b.state.next({name:h,values:_e(i)})))}(k.shouldDirty||k.shouldTouch)&&w(h,F,k.shouldTouch,k.shouldDirty,!0),k.shouldValidate&&W(h)},P=(h,N,k)=>{for(const $ in N){if(!N.hasOwnProperty($))return;const F=N[$],L=h+"."+$,q=X(a,L);(c.array.has(h)||Ce(F)||q&&!q._f)&&!ft(F)?P(L,F,k):I(L,F,k)}},R=(h,N,k={})=>{const $=X(a,h),F=c.array.has(h),L=_e(N);ye(i,h,L),F?(b.array.next({name:h,values:_e(i)}),(m.isDirty||m.dirtyFields||y.isDirty||y.dirtyFields)&&k.shouldDirty&&b.state.next({name:h,dirtyFields:St(n,i),isDirty:E(h,L)})):$&&!$._f&&!ze(L)?P(h,L,k):I(h,L,k),Yr(h,c)&&b.state.next(ne(M({},r),{name:h})),b.state.next({name:l.mount?h:void 0,values:_e(i)})},V=h=>O(this,null,function*(){l.mount=!0;const N=h.target;let k=N.name,$=!0;const F=X(a,k),L=se=>{$=Number.isNaN(se)||ft(se)&&isNaN(se.getTime())||nt(se,X(i,k,se))},q=Wr(s.mode),Z=Wr(s.reValidateMode);if(F){let se,be;const Ge=N.type?$r(F._f):lc(h),ke=h.type===Ur.BLUR||h.type===Ur.FOCUS_OUT,Te=!vc(F._f)&&!s.resolver&&!X(r.errors,k)&&!F._f.deps||Sc(ke,X(r.touchedFields,k),r.isSubmitted,Z,q),Re=Yr(k,c,ke);ye(i,k,Ge),ke?(!N||!N.readOnly)&&(F._f.onBlur&&F._f.onBlur(h),p&&p(0)):F._f.onChange&&F._f.onChange(h);const Nt=w(k,Ge,ke),Ja=!Le(Nt)||Re;if(!ke&&b.state.next({name:k,type:h.type,values:_e(i)}),Te)return(m.isValid||y.isValid)&&(s.mode==="onBlur"?ke&&A():ke||A()),Ja&&b.state.next(M({name:k},Re?{}:Nt));if(!ke&&Re&&b.state.next(M({},r)),s.resolver){const{errors:ar}=yield z([k]);if(L(Ge),$){const Ga=Xr(r.errors,a,k),nr=Xr(ar,a,Ga.name||k);se=nr.error,k=nr.name,be=Le(ar)}}else g([k],!0),se=(yield Gr(F,c.disabled,i,D,s.shouldUseNativeValidation))[k],g([k]),L(Ge),$&&(se?be=!1:(m.isValid||y.isValid)&&(be=yield u(a,!0)));$&&(F._f.deps&&(!Array.isArray(F._f.deps)||F._f.deps.length>0)&&W(F._f.deps),U(k,be,se,Nt))}}),K=(h,N)=>{if(X(r.errors,N)&&h.focus)return h.focus(),1},W=(k,...$)=>O(this,[k,...$],function*(h,N={}){let F,L;const q=Vt(h);if(s.resolver){const Z=yield o(Ne(h)?h:q);F=Le(Z),L=h?!q.some(se=>X(Z,se)):F}else h?(L=(yield Promise.all(q.map(Z=>O(this,null,function*(){const se=X(a,Z);return yield u(se&&se._f?{[Z]:se}:se)})))).every(Boolean),!(!L&&!r.isValid)&&A()):L=F=yield u(a);return b.state.next(ne(M(M({},!Ve(h)||(m.isValid||y.isValid)&&F!==r.isValid?{}:{name:h}),s.resolver||!h?{isValid:F}:{}),{errors:r.errors})),N.shouldFocus&&!L&&qt(a,K,h?q:c.mount),L}),ce=(h,N)=>{let k=M({},l.mount?i:n);return N&&(k=Ua(N.dirtyFields?r.dirtyFields:r.touchedFields,k)),Ne(h)?k:Ve(h)?X(k,h):h.map($=>X(k,$))},J=(h,N)=>({invalid:!!X((N||r).errors,h),isDirty:!!X((N||r).dirtyFields,h),error:X((N||r).errors,h),isValidating:!!X(r.validatingFields,h),isTouched:!!X((N||r).touchedFields,h)}),Q=h=>{h&&Vt(h).forEach(N=>ve(r.errors,N)),b.state.next({errors:h?r.errors:{}})},H=(h,N,k)=>{const $=(X(a,h,{_f:{}})._f||{}).ref,be=X(r.errors,h)||{},{ref:L,message:q,type:Z}=be,se=vt(be,["ref","message","type"]);ye(r.errors,h,ne(M(M({},se),N),{ref:$})),b.state.next({name:h,errors:r.errors,isValid:!1}),k&&k.shouldFocus&&$&&$.focus&&$.focus()},xe=(h,N)=>Ye(h)?b.state.subscribe({next:k=>"values"in k&&h(f(void 0,N),k)}):f(h,N,!0),he=h=>b.state.subscribe({next:N=>{Ec(h.name,N.name,h.exact)&&Cc(N,h.formState||m,Be,h.reRenderRoot)&&h.callback(ne(M(M({values:M({},i)},r),N),{defaultValues:n}))}}).unsubscribe,Ee=h=>(l.mount=!0,y=M(M({},y),h.formState),he(ne(M({},h),{formState:y}))),Ae=(h,N={})=>{for(const k of h?Vt(h):c.mount)c.mount.delete(k),c.array.delete(k),N.keepValue||(ve(a,k),ve(i,k)),!N.keepError&&ve(r.errors,k),!N.keepDirty&&ve(r.dirtyFields,k),!N.keepTouched&&ve(r.touchedFields,k),!N.keepIsValidating&&ve(r.validatingFields,k),!s.shouldUnregister&&!N.keepDefaultValue&&ve(n,k);b.state.next({values:_e(i)}),b.state.next(M(M({},r),N.keepDirty?{isDirty:E()}:{})),!N.keepIsValid&&A()},ie=({disabled:h,name:N})=>{(Qe(h)&&l.mount||h||c.disabled.has(N))&&(h?c.disabled.add(N):c.disabled.delete(N))},le=(h,N={})=>{let k=X(a,h);const $=Qe(N.disabled)||Qe(s.disabled);return ye(a,h,ne(M({},k||{}),{_f:M(ne(M({},k&&k._f?k._f:{ref:{name:h}}),{name:h,mount:!0}),N)})),c.mount.add(h),k?ie({disabled:Qe(N.disabled)?N.disabled:s.disabled,name:h}):Y(h,!0,N.value),ne(M(M({},$?{disabled:N.disabled||s.disabled}:{}),s.progressive?{required:!!N.required,min:It(N.min),max:It(N.max),minLength:It(N.minLength),maxLength:It(N.maxLength),pattern:It(N.pattern)}:{}),{name:h,onChange:V,onBlur:V,ref:F=>{if(F){le(h,N),k=X(a,h);const L=Ne(F.value)&&F.querySelectorAll&&F.querySelectorAll("input,select,textarea")[0]||F,q=gc(L),Z=k._f.refs||[];if(q?Z.find(se=>se===L):L===k._f.ref)return;ye(a,h,{_f:M(M({},k._f),q?{refs:[...Z.filter(Ds),L,...Array.isArray(X(n,h))?[{}]:[]],ref:{type:L.type,name:h}}:{ref:L})}),Y(h,!1,void 0,L)}else k=X(a,h,{}),k._f&&(k._f.mount=!1),(s.shouldUnregister||N.shouldUnregister)&&!(dc(c.array,h)&&l.action)&&c.unMount.add(h)}})},fe=()=>s.shouldFocusError&&qt(a,K,c.mount),te=h=>{Qe(h)&&(b.state.next({disabled:h}),qt(a,(N,k)=>{const $=X(a,k);$&&(N.disabled=$._f.disabled||h,Array.isArray($._f.refs)&&$._f.refs.forEach(F=>{F.disabled=$._f.disabled||h}))},0,!1))},ge=(h,N)=>k=>O(this,null,function*(){let $;k&&(k.preventDefault&&k.preventDefault(),k.persist&&k.persist());let F=_e(i);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:L,values:q}=yield z();r.errors=L,F=_e(q)}else yield u(a);if(c.disabled.size)for(const L of c.disabled)ve(F,L);if(ve(r.errors,"root"),Le(r.errors)){b.state.next({errors:{}});try{yield h(F,k)}catch(L){$=L}}else N&&(yield N(M({},r.errors),k)),fe(),setTimeout(fe);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Le(r.errors)&&!$,submitCount:r.submitCount+1,errors:r.errors}),$)throw $}),je=(h,N={})=>{X(a,h)&&(Ne(N.defaultValue)?R(h,_e(X(n,h))):(R(h,N.defaultValue),ye(n,h,_e(N.defaultValue))),N.keepTouched||ve(r.touchedFields,h),N.keepDirty||(ve(r.dirtyFields,h),r.isDirty=N.defaultValue?E(h,_e(X(n,h))):E()),N.keepError||(ve(r.errors,h),m.isValid&&A()),b.state.next(M({},r)))},de=(h,N={})=>{const k=h?_e(h):n,$=_e(k),F=Le(h),L=F?n:$;if(N.keepDefaultValues||(n=k),!N.keepValues){if(N.keepDirtyValues){const q=new Set([...c.mount,...Object.keys(St(n,i))]);for(const Z of Array.from(q))X(r.dirtyFields,Z)?ye(L,Z,X(i,Z)):R(Z,X(L,Z))}else{if(Qs&&Ne(h))for(const q of c.mount){const Z=X(a,q);if(Z&&Z._f){const se=Array.isArray(Z._f.refs)?Z._f.refs[0]:Z._f.ref;if(xs(se)){const be=se.closest("form");if(be){be.reset();break}}}}if(N.keepFieldsRef)for(const q of c.mount)R(q,X(L,q));else a={}}i=s.shouldUnregister?N.keepDefaultValues?_e(n):{}:_e(L),b.array.next({values:M({},L)}),b.state.next({values:M({},L)})}c={mount:N.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!m.isValid||!!N.keepIsValid||!!N.keepDirtyValues,l.watch=!!s.shouldUnregister,b.state.next({submitCount:N.keepSubmitCount?r.submitCount:0,isDirty:F?!1:N.keepDirty?r.isDirty:!!(N.keepDefaultValues&&!nt(h,n)),isSubmitted:N.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:F?{}:N.keepDirtyValues?N.keepDefaultValues&&i?St(n,i):r.dirtyFields:N.keepDefaultValues&&h?St(n,h):N.keepDirty?r.dirtyFields:{},touchedFields:N.keepTouched?r.touchedFields:{},errors:N.keepErrors?r.errors:{},isSubmitSuccessful:N.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},ue=(h,N)=>de(Ye(h)?h(i):h,N),oe=(h,N={})=>{const k=X(a,h),$=k&&k._f;if($){const F=$.refs?$.refs[0]:$.ref;F.focus&&(F.focus(),N.shouldSelect&&Ye(F.select)&&F.select())}},Be=h=>{r=M(M({},r),h)},pe={control:{register:le,unregister:Ae,getFieldState:J,handleSubmit:ge,setError:H,_subscribe:he,_runSchema:z,_focusError:fe,_getWatch:f,_getDirty:E,_setValid:A,_setFieldArray:C,_setDisabledField:ie,_setErrors:B,_getFieldArray:_,_reset:de,_resetDefaultValues:()=>Ye(s.defaultValues)&&s.defaultValues().then(h=>{ue(h,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:d,_disableForm:te,_subjects:b,_proxyFormState:m,get _fields(){return a},get _formValues(){return i},get _state(){return l},set _state(h){l=h},get _defaultValues(){return n},get _names(){return c},set _names(h){c=h},get _formState(){return r},get _options(){return s},set _options(h){s=M(M({},s),h)}},subscribe:Ee,trigger:W,register:le,handleSubmit:ge,watch:xe,setValue:R,getValues:ce,reset:ue,resetField:je,clearErrors:Q,unregister:Ae,setError:H,setFocus:oe,getFieldState:J};return ne(M({},pe),{formControl:pe})}function rr(t={}){const s=Me.useRef(void 0),r=Me.useRef(void 0),[a,n]=Me.useState({isDirty:!1,isValidating:!1,isLoading:Ye(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ye(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current=ne(M({},t.formControl),{formState:a}),t.defaultValues&&!Ye(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const l=Dc(t),{formControl:c}=l,p=vt(l,["formControl"]);s.current=ne(M({},p),{formState:a})}const i=s.current.control;return i._options=t,hc(()=>{const c=i._subscribe({formState:i._proxyFormState,callback:()=>n(M({},i._formState)),reRenderRoot:!0});return n(p=>ne(M({},p),{isReady:!0})),i._formState.isReady=!0,c},[i]),Me.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),Me.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),Me.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),Me.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),Me.useEffect(()=>{if(i._proxyFormState.isDirty){const c=i._getDirty();c!==a.isDirty&&i._subjects.state.next({isDirty:c})}},[i,a.isDirty]),Me.useEffect(()=>{t.values&&!nt(t.values,r.current)?(i._reset(t.values,M({keepFieldsRef:!0},i._options.resetOptions)),r.current=t.values,n(c=>M({},c))):i._resetDefaultValues()},[i,t.values]),Me.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(M({},i._formState))),i._removeUnmounted()}),s.current.formState=xc(a,i),s.current}function Wa({isOpen:t,onClose:s,title:r,children:a,size:n="md"}){if(T.useEffect(()=>{const l=c=>{c.key==="Escape"&&s()};return t&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[t,s]),!t)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:`relative bg-white rounded-lg shadow-xl w-full ${i[n]} transform transition-all`,onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-500 transition-colors",children:e.jsx(Bt,{size:20})})]}),e.jsx("div",{className:"px-6 py-4",children:a})]})})]})}function Pc(){const[t,s]=T.useState([]),[r,a]=T.useState(!0),[n,i]=T.useState(!1),[l,c]=T.useState(null),[p,x]=T.useState(""),[m,y]=T.useState(""),[b,D]=T.useState(""),{register:j,handleSubmit:A,reset:g,formState:{errors:C}}=rr();T.useEffect(()=>{S()},[]);const S=()=>O(this,null,function*(){try{a(!0);const o=yield Pe.obtenerTecnicos();s(o)}catch(o){D("Error al cargar tecnicos"),console.error("Error:",o)}finally{a(!1)}}),B=o=>O(this,null,function*(){try{l?(yield Pe.update(l.id,ne(M({},o),{tipoUsuario:"tecnico"})),y("Tecnico actualizado exitosamente")):(yield Pe.create(ne(M({},o),{tipoUsuario:"tecnico",estado:"activo"})),y("Tecnico creado exitosamente")),i(!1),g(),c(null),S(),setTimeout(()=>y(""),3e3)}catch(u){D("Error al guardar tecnico"),console.error("Error:",u),setTimeout(()=>D(""),3e3)}}),Y=o=>{c(o),g({nombreCompleto:o.nombreCompleto,telefono:o.telefono,email:o.email||""}),i(!0)},w=o=>O(this,null,function*(){if(window.confirm("Estas seguro de eliminar este tecnico?"))try{yield Pe.delete(o),y("Tecnico eliminado exitosamente"),S(),setTimeout(()=>y(""),3e3)}catch(u){D("Error al eliminar tecnico"),console.error("Error:",u),setTimeout(()=>D(""),3e3)}}),U=()=>{i(!1),c(null),g()},z=t.filter(o=>o.nombreCompleto.toLowerCase().includes(p.toLowerCase())||o.telefono.includes(p));return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(ts,{className:"text-blue-600"}),"Gestion de Tecnicos"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Administra el equipo de tecnicos y su disponibilidad"})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ft,{size:20}),"Nuevo Tecnico"]})]}),m&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:m}),b&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:b}),e.jsxs("div",{className:"relative",children:[e.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o telefono...",value:p,onChange:o=>x(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Tecnicos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Activos"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:t.filter(o=>o.estado==="activo").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(wn,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inactivos"}),e.jsx("p",{className:"text-2xl font-bold text-gray-600 mt-1",children:t.filter(o=>o.estado!=="activo").length})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"text-gray-600",size:24})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Telefono"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No se encontraron tecnicos"})}):z.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:o.nombreCompleto.split(" ").map(u=>u[0]).join("").substring(0,2)})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.nombreCompleto})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Yt,{size:16,className:"text-gray-400 mr-2"}),o.telefono]})}),e.jsx("td",{className:"px-6 py-4",children:o.email?e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(xt,{size:16,className:"text-gray-400 mr-2"}),o.email]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin email"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${o.estado==="activo"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:o.estado==="activo"?"Activo":"Inactivo"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>Y(o),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar",children:e.jsx(Ys,{size:18})}),e.jsx("button",{onClick:()=>w(o.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Eliminar",children:e.jsx(ps,{size:18})})]})})]},o.id))})]})})}),e.jsx(Wa,{isOpen:n,onClose:U,title:l?"Editar Tecnico":"Nuevo Tecnico",children:e.jsxs("form",{onSubmit:A(B),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre Completo *"}),e.jsx("input",ne(M({type:"text"},j("nombreCompleto",{required:"El nombre es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Juan Perez"})),C.nombreCompleto&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:C.nombreCompleto.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefono *"}),e.jsx("input",ne(M({type:"tel"},j("telefono",{required:"El telefono es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 8091234567"})),C.telefono&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:C.telefono.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",ne(M({type:"email"},j("email")),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: tecnico@ejemplo.com"}))]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:U,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:l?"Actualizar":"Crear"})]})]})})]})}function Tc(){const[t,s]=T.useState([]),[r,a]=T.useState([]),[n,i]=T.useState(!0),[l,c]=T.useState(!1),[p,x]=T.useState(null),[m,y]=T.useState(""),[b,D]=T.useState(""),[j,A]=T.useState(""),[g,C]=T.useState(""),{register:S,handleSubmit:B,reset:Y,formState:{errors:w}}=rr();T.useEffect(()=>{U()},[]);const U=()=>O(this,null,function*(){try{i(!0);const[f,_]=yield Promise.all([Pe.getPropietarios(),go.getAll()]);s(Array.isArray(f)?f:[]),a(Array.isArray(_)?_:[])}catch(f){C("Error al cargar datos"),s([]),a([]),console.error("Error:",f)}finally{i(!1)}}),z=f=>O(this,null,function*(){try{p?(yield Pe.update(p.id,ne(M({},f),{estado:"activo"})),A("Usuario actualizado exitosamente")):(yield Pe.create(ne(M({},f),{estado:"activo"})),A("Usuario creado exitosamente")),c(!1),Y(),x(null),U(),setTimeout(()=>A(""),3e3)}catch(_){C("Error al guardar usuario"),console.error("Error:",_),setTimeout(()=>C(""),3e3)}}),o=f=>{var _;x(f),Y({nombreCompleto:f.nombreCompleto,telefono:f.telefono,email:f.email||"",tipoUsuario:f.tipoUsuario,unidad:f.unidad||"",condominioId:((_=f.condominio)==null?void 0:_.id)||""}),c(!0)},u=f=>O(this,null,function*(){if(window.confirm("Estas seguro de eliminar este usuario?"))try{yield Pe.delete(f),A("Usuario eliminado exitosamente"),U(),setTimeout(()=>A(""),3e3)}catch(_){C("Error al eliminar usuario"),console.error("Error:",_),setTimeout(()=>C(""),3e3)}}),d=()=>{c(!1),x(null),Y()},E=t.filter(f=>{var P,R;const _=f.nombreCompleto.toLowerCase().includes(m.toLowerCase())||f.telefono.includes(m)||((P=f.unidad)==null?void 0:P.toLowerCase().includes(m.toLowerCase())),I=!b||((R=f.condominio)==null?void 0:R.id)===b;return _&&I});return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(pt,{className:"text-blue-600"}),"Gestion de Usuarios"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Administra propietarios e inquilinos de los condominios"})]}),e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ft,{size:20}),"Nuevo Usuario"]})]}),j&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg",children:j}),g&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg",children:g}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Usuarios"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(pt,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Propietarios"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:t.filter(f=>f.tipoUsuario==="propietario").length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx($t,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Inquilinos"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:t.filter(f=>f.tipoUsuario==="inquilino").length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(pt,{className:"text-purple-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Condominios"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:r.length})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(At,{className:"text-orange-600",size:24})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre, telefono o unidad...",value:m,onChange:f=>y(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:b,onChange:f=>D(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[e.jsx("option",{value:"",children:"Todos los condominios"}),r.map(f=>e.jsx("option",{value:f.id,children:f.nombre},f.id))]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Condominio"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unidad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:E.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-gray-500",children:"No se encontraron usuarios"})}):E.map(f=>{var _;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-medium text-sm",children:f.nombreCompleto.split(" ").map(I=>I[0]).join("").substring(0,2)})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.nombreCompleto})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(Yt,{size:14,className:"text-gray-400 mr-2"}),f.telefono]}),f.email&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx(xt,{size:14,className:"text-gray-400 mr-2"}),f.email]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(At,{size:14,className:"text-gray-400 mr-2"}),((_=f.condominio)==null?void 0:_.nombre)||"N/A"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx($t,{size:14,className:"text-gray-400 mr-2"}),f.unidad||"N/A"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f.tipoUsuario==="propietario"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:f.tipoUsuario==="propietario"?"Propietario":"Inquilino"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>o(f),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Editar",children:e.jsx(Ys,{size:18})}),e.jsx("button",{onClick:()=>u(f.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Eliminar",children:e.jsx(ps,{size:18})})]})})]},f.id)})})]})})}),e.jsx(Wa,{isOpen:l,onClose:d,title:p?"Editar Usuario":"Nuevo Usuario",size:"lg",children:e.jsxs("form",{onSubmit:B(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre Completo *"}),e.jsx("input",ne(M({type:"text"},S("nombreCompleto",{required:"El nombre es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Maria Rodriguez"})),w.nombreCompleto&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.nombreCompleto.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefono *"}),e.jsx("input",ne(M({type:"tel"},S("telefono",{required:"El telefono es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 8091234567"})),w.telefono&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.telefono.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",ne(M({type:"email"},S("email")),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: usuario@ejemplo.com"}))]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Usuario *"}),e.jsxs("select",ne(M({},S("tipoUsuario",{required:"El tipo es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),e.jsx("option",{value:"propietario",children:"Propietario"}),e.jsx("option",{value:"inquilino",children:"Inquilino"})]})),w.tipoUsuario&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.tipoUsuario.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Condominio *"}),e.jsxs("select",ne(M({},S("condominioId",{required:"El condominio es requerido"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar..."}),r.map(f=>e.jsx("option",{value:f.id,children:f.nombre},f.id))]})),w.condominioId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.condominioId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unidad/Apartamento *"}),e.jsx("input",ne(M({type:"text"},S("unidad",{required:"La unidad es requerida"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: 201, A-15, Villa 5"})),w.unidad&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:w.unidad.message})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:p?"Actualizar":"Crear"})]})]})})]})}const Oc=["Plomeria","Electricidad","Pintura","Carpinteria","Cerrajeria","Aire Acondicionado","Limpieza","Jardineria","Seguridad","Otros"];function Rc(){var Y,w,U,z;const t=cn(),[s,r]=T.useState([]),[a,n]=T.useState([]),[i,l]=T.useState(!0),[c,p]=T.useState(!1),[x,m]=T.useState(""),[y,b]=T.useState(""),{register:D,handleSubmit:j,watch:A,formState:{errors:g}}=rr(),C=A("usuarioId");T.useEffect(()=>{S()},[]);const S=()=>O(this,null,function*(){try{l(!0);const[o,u]=yield Promise.all([Pe.getPropietarios(),Pe.obtenerTecnicos()]);r(o),n(u)}catch(o){b("Error al cargar datos"),console.error("Error:",o)}finally{l(!1)}}),B=o=>O(this,null,function*(){var u;try{p(!0);const d=s.find(_=>_.id===o.usuarioId),E={usuarioId:o.usuarioId,condominioId:((u=d==null?void 0:d.condominio)==null?void 0:u.id)||o.condominioId,unidad:(d==null?void 0:d.unidad)||o.unidad,tipo:o.tipo,categoria:o.categoria,descripcion:o.descripcion,prioridad:o.prioridad,tecnicoAsignadoId:o.tecnicoAsignadoId||void 0},f=yield ot.create(E);m("Caso creado exitosamente!"),setTimeout(()=>{t(`/casos/${f.id}`)},1500)}catch(d){b("Error al crear el caso. Por favor intenta nuevamente."),console.error("Error:",d),setTimeout(()=>b(""),5e3)}finally{p(!1)}});return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Ft,{className:"text-blue-600"}),"Crear Nuevo Caso"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Registra un nuevo caso de garantia o condominio"})]})}),x&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(gs,{size:20}),x]}),y&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg flex items-center gap-2",children:[e.jsx(yt,{size:20}),y]}),e.jsxs("form",{onSubmit:j(B),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacion del Usuario"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seleccionar Usuario *"}),e.jsxs("select",ne(M({},D("usuarioId",{required:"Debes seleccionar un usuario"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Buscar y seleccionar usuario..."}),s.map(o=>{var u;return e.jsxs("option",{value:o.id,children:[o.nombreCompleto," - ",(u=o.condominio)==null?void 0:u.nombre," - ",o.unidad]},o.id)})]})),g.usuarioId&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:g.usuarioId.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Busca por nombre, condominio o unidad"})]}),C&&s.find(o=>o.id===C)&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-blue-900",children:[e.jsx("strong",{children:"Usuario seleccionado:"})," ",(Y=s.find(o=>o.id===C))==null?void 0:Y.nombreCompleto]}),e.jsxs("p",{className:"text-sm text-blue-800 mt-1",children:[e.jsx("strong",{children:"Condominio:"})," ",(U=(w=s.find(o=>o.id===C))==null?void 0:w.condominio)==null?void 0:U.nombre]}),e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Unidad:"})," ",(z=s.find(o=>o.id===C))==null?void 0:z.unidad]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tipo de Caso"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",ne(M({type:"radio",value:"garantia"},D("tipo",{required:"Debes seleccionar un tipo"})),{className:"w-4 h-4 text-blue-600"})),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Garantia"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Problemas cubiertos por la garantia del inmueble"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",ne(M({type:"radio",value:"condominio"},D("tipo",{required:"Debes seleccionar un tipo"})),{className:"w-4 h-4 text-blue-600"})),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Condominio"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Solicitudes de mantenimiento del condominio"})]})]})]}),g.tipo&&e.jsx("p",{className:"text-red-600 text-sm mt-2",children:g.tipo.message})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detalles del Caso"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),e.jsxs("select",ne(M({},D("categoria",{required:"La categoria es requerida"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar categoria..."}),Oc.map(o=>e.jsx("option",{value:o,children:o},o))]})),g.categoria&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:g.categoria.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad *"}),e.jsxs("select",ne(M({},D("prioridad",{required:"La prioridad es requerida"})),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Seleccionar prioridad..."}),e.jsx("option",{value:"baja",children:"Baja - Puede esperar"}),e.jsx("option",{value:"media",children:"Media - Atencion normal"}),e.jsx("option",{value:"alta",children:"Alta - Requiere atencion pronto"}),e.jsx("option",{value:"urgente",children:"Urgente - Atencion inmediata"})]})),g.prioridad&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:g.prioridad.message})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion del Problema *"}),e.jsx("textarea",ne(M({},D("descripcion",{required:"La descripcion es requerida",minLength:{value:10,message:"Minimo 10 caracteres"}})),{rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe el problema con el mayor detalle posible..."})),g.descripcion&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:g.descripcion.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Incluye detalles como: que ocurre, cuando empezo, area afectada, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Asignacion de Tecnico (Opcional)"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tecnico Asignado"}),e.jsxs("select",ne(M({},D("tecnicoAsignadoId")),{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Asignar mas tarde..."}),a.map(o=>e.jsxs("option",{value:o.id,children:[o.nombreCompleto," - ",o.telefono]},o.id))]})),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Puedes asignar un tecnico ahora o hacerlo mas tarde desde el detalle del caso"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/"),className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Creando caso..."]}):"Crear Caso"})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Informacion Importante"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"El usuario seleccionado recibira una notificacion automatica"}),e.jsx("li",{children:'El caso quedara en estado "Nuevo" hasta que sea asignado'}),e.jsx("li",{children:"Puedes agregar fotos y mas detalles desde el detalle del caso"}),e.jsx("li",{children:"Los casos urgentes seran priorizados automaticamente"})]})]})]})}const Kr=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];function Fc(){const[t,s]=T.useState(!0),[r,a]=T.useState([]),[n,i]=T.useState(Oe(_l(new Date),"yyyy-MM-dd")),[l,c]=T.useState(Oe(new Date,"yyyy-MM-dd"));T.useEffect(()=>{p()},[n,l]);const p=()=>O(this,null,function*(){try{s(!0);const U=(yield ot.getAll()).filter(z=>{const o=new Date(z.fechaCreacion),u=new Date(n),d=new Date(l);return o>=u&&o<=d});a(U)}catch(w){console.error("Error al cargar reportes:",w)}finally{s(!1)}}),x=r.length,m=r.filter(w=>w.estado==="resuelto"||w.estado==="cerrado").length,y=r.filter(w=>w.estado==="en_proceso"||w.estado==="en_visita").length,b=x>0?(m/x*100).toFixed(1):"0",D=r.filter(w=>w.fechaResolucion),j=D.length>0?D.reduce((w,U)=>{const z=new Date(U.fechaCreacion).getTime(),o=new Date(U.fechaResolucion).getTime();return w+(o-z)/(1e3*60*60*24)},0)/D.length:0,A=[{name:"Nuevo",value:r.filter(w=>w.estado==="nuevo").length},{name:"Asignado",value:r.filter(w=>w.estado==="asignado").length},{name:"En Proceso",value:r.filter(w=>w.estado==="en_proceso").length},{name:"En Visita",value:r.filter(w=>w.estado==="en_visita").length},{name:"Resuelto",value:r.filter(w=>w.estado==="resuelto").length},{name:"Cerrado",value:r.filter(w=>w.estado==="cerrado").length}].filter(w=>w.value>0),g=[{name:"Baja",value:r.filter(w=>w.prioridad==="baja").length,fill:"#10B981"},{name:"Media",value:r.filter(w=>w.prioridad==="media").length,fill:"#F59E0B"},{name:"Alta",value:r.filter(w=>w.prioridad==="alta").length,fill:"#EF4444"},{name:"Urgente",value:r.filter(w=>w.prioridad==="urgente").length,fill:"#DC2626"}].filter(w=>w.value>0),C={};r.forEach(w=>{const U=Oe(new Date(w.fechaCreacion),"dd/MM");C[U]=(C[U]||0)+1});const S=Object.entries(C).map(([w,U])=>({fecha:w,cantidad:U})),B={};r.forEach(w=>{if(w.tecnicoAsignado){const U=w.tecnicoAsignado.nombreCompleto;B[U]=(B[U]||0)+1}});const Y=Object.entries(B).map(([w,U])=>({tecnico:w,cantidad:U})).sort((w,U)=>U.cantidad-w.cantidad).slice(0,10);return t?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Os,{className:"text-blue-600"}),"Reportes y Estadisticas"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Analisis y metricas del sistema de casos"})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(qe,{className:"text-gray-400",size:20}),e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Inicio"}),e.jsx("input",{type:"date",value:n,onChange:w=>i(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Fin"}),e.jsx("input",{type:"date",value:l,onChange:w=>c(w.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{onClick:p,className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Aplicar Filtros"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Casos"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:x})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Os,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En Proceso"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:y})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Hs,{className:"text-orange-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Resueltos"}),e.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:m})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(gs,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Tiempo Promedio"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:j.toFixed(1)}),e.jsx("p",{className:"text-xs text-gray-500",children:"dias"})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"text-purple-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Casos por Dia"}),S.length>0?e.jsx(kt,{width:"100%",height:300,children:e.jsxs(An,{data:S,children:[e.jsx(rs,{strokeDasharray:"3 3"}),e.jsx(as,{dataKey:"fecha"}),e.jsx(ns,{}),e.jsx(_t,{}),e.jsx(ss,{}),e.jsx(Dn,{type:"monotone",dataKey:"cantidad",stroke:"#3B82F6",strokeWidth:2,name:"Casos"})]})}):e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No hay datos disponibles"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Casos por Estado"}),A.length>0?e.jsx(kt,{width:"100%",height:300,children:e.jsxs(ra,{children:[e.jsx(aa,{data:A,cx:"50%",cy:"50%",labelLine:!1,label:({name:w,percent:U})=>`${w}: ${(U*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:A.map((w,U)=>e.jsx(cs,{fill:Kr[U%Kr.length]},`cell-${U}`))}),e.jsx(_t,{})]})}):e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No hay datos disponibles"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Casos por Prioridad"}),g.length>0?e.jsx(kt,{width:"100%",height:300,children:e.jsxs(Rs,{data:g,children:[e.jsx(rs,{strokeDasharray:"3 3"}),e.jsx(as,{dataKey:"name"}),e.jsx(ns,{}),e.jsx(_t,{}),e.jsx(ss,{}),e.jsx(Fs,{dataKey:"value",name:"Casos",children:g.map(w=>e.jsx(cs,{fill:w.fill},`cell-${w.name}`))})]})}):e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No hay datos disponibles"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Casos por Tecnico (Top 10)"}),Y.length>0?e.jsx(kt,{width:"100%",height:300,children:e.jsxs(Rs,{data:Y,layout:"horizontal",children:[e.jsx(rs,{strokeDasharray:"3 3"}),e.jsx(as,{type:"number"}),e.jsx(ns,{dataKey:"tecnico",type:"category",width:100}),e.jsx(_t,{}),e.jsx(ss,{}),e.jsx(Fs,{dataKey:"cantidad",fill:"#3B82F6",name:"Casos"})]})}):e.jsx("p",{className:"text-center text-gray-500 py-12",children:"No hay datos disponibles"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Metricas de Rendimiento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Tasa de Resolucion"}),e.jsxs("p",{className:"text-4xl font-bold text-blue-900 mt-2",children:[b,"%"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"del total de casos"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Casos Nuevos"}),e.jsx("p",{className:"text-4xl font-bold text-green-900 mt-2",children:r.filter(w=>w.estado==="nuevo").length}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"pendientes de asignacion"})]}),e.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[e.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"Satisfaccion Promedio"}),e.jsx("p",{className:"text-4xl font-bold text-purple-900 mt-2",children:r.filter(w=>w.satisfaccionCliente).length>0?(r.reduce((w,U)=>w+(U.satisfaccionCliente||0),0)/r.filter(w=>w.satisfaccionCliente).length).toFixed(1):"N/A"}),e.jsx("p",{className:"text-xs text-purple-600 mt-1",children:"de 5 estrellas"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Casos en el Periodo Seleccionado"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Numero"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Prioridad"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoria"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tecnico"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.slice(0,20).map(w=>{var U;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-blue-600",children:w.numeroCaso}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.estado==="resuelto"||w.estado==="cerrado"?"bg-green-100 text-green-800":w.estado==="en_proceso"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:w.estado})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.prioridad==="urgente"?"bg-red-100 text-red-800":w.prioridad==="alta"?"bg-orange-100 text-orange-800":w.prioridad==="media"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.prioridad})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:w.categoria}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:((U=w.tecnicoAsignado)==null?void 0:U.nombreCompleto)||"Sin asignar"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:Oe(new Date(w.fechaCreacion),"dd/MM/yyyy")})]},w.id)})})]})}),r.length>20&&e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 text-center text-sm text-gray-600",children:["Mostrando 20 de ",r.length," casos totales"]})]})]})}function Mc(){const[t,s]=T.useState([]),[r,a]=T.useState(!0),[n,i]=T.useState(new Date),[l,c]=T.useState(null);T.useEffect(()=>{p()},[]);const p=()=>O(this,null,function*(){try{a(!0);const S=(yield ot.getAll()).filter(B=>B.fechaVisita);s(S)}catch(C){console.error("Error al cargar casos:",C)}finally{a(!1)}}),x=C=>{const S=new Date(n);C==="prev"?S.setMonth(S.getMonth()-1):S.setMonth(S.getMonth()+1),i(S)},m=C=>t.filter(S=>S.fechaVisita?Dt(new Date(S.fechaVisita),C):!1),y=l?m(l):[],b=qs(n),D=Vs(n),j=Oa({start:b,end:D}),A=b.getDay(),g=Array(A).fill(null);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(qe,{className:"text-blue-600"}),"Calendario de Visitas"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Visualiza y gestiona las visitas programadas"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Visitas Programadas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:t.length})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Visitas Hoy"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:t.filter(C=>C.fechaVisita&&Dt(new Date(C.fechaVisita),new Date)).length})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Visitas Este Mes"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 mt-1",children:t.filter(C=>{if(!C.fechaVisita)return!1;const S=new Date(C.fechaVisita);return S.getMonth()===n.getMonth()&&S.getFullYear()===n.getFullYear()}).length})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(tt,{className:"text-purple-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:Oe(n,"MMMM yyyy",{locale:Tt})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>x("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ta,{size:20})}),e.jsx("button",{onClick:()=>i(new Date),className:"px-3 py-2 text-sm bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg transition-colors",children:"Hoy"}),e.jsx("button",{onClick:()=>x("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(sa,{size:20})})]})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"].map(C=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-600 py-2",children:C},C))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[g.map((C,S)=>e.jsx("div",{className:"aspect-square"},`empty-${S}`)),j.map(C=>{const S=m(C),B=La(C),Y=l&&Dt(C,l);return e.jsx("button",{onClick:()=>c(C),className:`aspect-square p-2 rounded-lg border transition-all ${B?"border-blue-500 bg-blue-50 font-bold":Y?"border-blue-500 bg-blue-100":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-full",children:[e.jsx("span",{className:`text-sm ${B?"text-blue-700":"text-gray-900"}`,children:Oe(C,"d")}),S.length>0&&e.jsxs("div",{className:"flex gap-1 mt-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),S.length>1&&e.jsxs("span",{className:"text-xs text-blue-600 font-medium",children:["+",S.length-1]})]})]})},C.toISOString())})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:l?Oe(l,"d 'de' MMMM",{locale:Tt}):"Selecciona un dia"}),l?y.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No hay visitas programadas para este dia"}):e.jsx("div",{className:"space-y-3",children:y.map(C=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded",children:C.numeroCaso}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${C.prioridad==="urgente"?"bg-red-100 text-red-700":C.prioridad==="alta"?"bg-orange-100 text-orange-700":C.prioridad==="media"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:C.prioridad})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-2",children:C.categoria}),e.jsxs("div",{className:"space-y-1 text-xs text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{size:14}),e.jsxs("span",{children:[C.condominio.nombre," - ",C.unidad]})]}),C.tecnicoAsignado&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(tt,{size:14}),e.jsx("span",{children:C.tecnicoAsignado.nombreCompleto})]}),C.fechaVisita&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{size:14}),e.jsx("span",{children:Oe(new Date(C.fechaVisita),"HH:mm")})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:C.descripcion})})]},C.id))}):e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"Haz clic en un dia del calendario para ver las visitas programadas"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Proximas Visitas (7 dias)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Caso"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Hora"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Ubicacion"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tecnico"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.filter(C=>{if(!C.fechaVisita)return!1;const S=new Date(C.fechaVisita),B=new Date,Y=Math.ceil((S.getTime()-B.getTime())/(1e3*60*60*24));return Y>=0&&Y<=7}).sort((C,S)=>new Date(C.fechaVisita).getTime()-new Date(S.fechaVisita).getTime()).slice(0,10).map(C=>{var S;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-600",children:C.numeroCaso}),e.jsx("p",{className:"text-xs text-gray-500",children:C.categoria})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:Oe(new Date(C.fechaVisita),"dd 'de' MMM",{locale:Tt})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:Oe(new Date(C.fechaVisita),"HH:mm")}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-gray-900",children:C.condominio.nombre}),e.jsxs("p",{className:"text-gray-500",children:["Unidad ",C.unidad]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:((S=C.tecnicoAsignado)==null?void 0:S.nombreCompleto)||"Sin asignar"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.estado==="en_visita"?"bg-blue-100 text-blue-800":C.estado==="asignado"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.estado})})]},C.id)})})]})})]})]})}function Lc(){const[t,s]=T.useState([]),[r,a]=T.useState(!0),[n,i]=T.useState(new Date),[l,c]=T.useState(null),[p,x]=T.useState("todos"),[m,y]=T.useState([]),[b,D]=T.useState(!1);T.useEffect(()=>{j()},[n]),T.useEffect(()=>{l&&A(l)},[l]);const j=()=>O(this,null,function*(){try{a(!0);const P=qs(n),R=Vs(n);s([])}catch(P){console.error("Error al cargar citas:",P)}finally{a(!1)}}),A=P=>O(this,null,function*(){try{const R=Oe(P,"yyyy-MM-dd");y([])}catch(R){console.error("Error al cargar disponibilidad:",R)}}),g=P=>{i(P==="prev"?Al(n):Da(n,1))},C=P=>t.filter(R=>Dt(new Date(R.fecha),P)),S=P=>{const R={pendiente:"bg-yellow-100 text-yellow-800 border-yellow-300",confirmada_propietario:"bg-blue-100 text-blue-800 border-blue-300",confirmada_ingenieria:"bg-green-100 text-green-800 border-green-300",completada:"bg-emerald-100 text-emerald-800 border-emerald-300",no_realizada:"bg-red-100 text-red-800 border-red-300",cancelada:"bg-gray-100 text-gray-800 border-gray-300"};return R[P]||R.pendiente},B=P=>{switch(P){case"completada":return e.jsx($e,{className:"w-4 h-4"});case"cancelada":case"no_realizada":return e.jsx(Wt,{className:"w-4 h-4"});default:return e.jsx(yt,{className:"w-4 h-4"})}},w=(l?C(l):[]).filter(P=>p==="todos"||P.estado===p),U=qs(n),z=Vs(n),o=Rt(U,{weekStartsOn:0}),u=Do(z,{weekStartsOn:0}),d=Oa({start:o,end:u}),E=t.length,f=t.filter(P=>P.estado==="pendiente").length,_=t.filter(P=>P.estado==="confirmada_propietario"||P.estado==="confirmada_ingenieria").length,I=t.filter(P=>P.estado==="completada").length;return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(qe,{className:"text-blue-600"}),"Calendario de Citas"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestión de citas y visitas técnicas"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Citas"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:E})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"text-gray-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:f})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(yt,{className:"text-yellow-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Confirmadas"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:_})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx($e,{className:"text-blue-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:I})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx($e,{className:"text-green-600",size:24})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsx("button",{onClick:()=>g("prev"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ta,{size:20})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:Oe(n,"MMMM yyyy",{locale:Tt})}),e.jsx("button",{onClick:()=>g("next"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(sa,{size:20})})]}),e.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"].map(P=>e.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600",children:P},P))}),e.jsx("div",{className:"grid grid-cols-7",children:d.map((P,R)=>{const V=C(P),K=La(P),W=P.getMonth()===n.getMonth(),ce=l&&Dt(P,l);return e.jsx("button",{onClick:()=>c(P),className:`
                      min-h-[100px] p-2 border-b border-r border-gray-200 text-left hover:bg-gray-50 transition-colors relative
                      ${W?"":"bg-gray-50 text-gray-400"}
                      ${ce?"bg-blue-50 ring-2 ring-blue-500":""}
                    `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("span",{className:`
                        text-sm font-medium
                        ${K?"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center":""}
                      `,children:Oe(P,"d")}),V.length>0&&e.jsxs("div",{className:"mt-1 space-y-1",children:[V.slice(0,2).map((J,Q)=>e.jsxs("div",{className:`text-xs px-1 py-0.5 rounded truncate ${S(J.estado)}`,children:[J.bloqueHorario.horaInicio," - ",J.caso.unidad]},Q)),V.length>2&&e.jsxs("div",{className:"text-xs text-gray-500",children:["+",V.length-2," más"]})]})]})},R)})})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 sticky top-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:l?Oe(l,"d 'de' MMMM",{locale:Tt}):"Selecciona un día"}),l&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Filtrar por estado"}),e.jsxs("select",{value:p,onChange:P=>x(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"todos",children:"Todos"}),e.jsx("option",{value:"pendiente",children:"Pendiente"}),e.jsx("option",{value:"confirmada_propietario",children:"Confirmada (Propietario)"}),e.jsx("option",{value:"confirmada_ingenieria",children:"Confirmada (Ingeniería)"}),e.jsx("option",{value:"completada",children:"Completada"}),e.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:w.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No hay citas para este día"}):w.map(P=>e.jsxs("div",{className:`border rounded-lg p-3 ${S(P.estado)}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[B(P.estado),e.jsx("span",{className:"font-semibold text-sm",children:P.caso.numeroCaso})]}),e.jsxs("span",{className:"text-xs",children:[P.bloqueHorario.horaInicio,"-",P.bloqueHorario.horaFin]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(tt,{size:12}),e.jsx("span",{children:P.caso.usuario.nombreCompleto})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ht,{size:12}),e.jsxs("span",{children:[P.caso.condominio.nombre," - ",P.caso.unidad]})]}),P.caso.tecnicoAsignado&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pt,{size:12}),e.jsx("span",{children:P.caso.tecnicoAsignado.nombreCompleto})]})]}),e.jsx("div",{className:"mt-2 pt-2 border-t border-current/20 flex gap-2",children:e.jsx("button",{className:"flex-1 text-xs py-1 bg-white/50 hover:bg-white/80 rounded transition-colors",children:"Ver detalle"})})]},P.id))}),m.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Disponibilidad"}),e.jsx("div",{className:"space-y-2",children:m.map(P=>e.jsxs("div",{className:"flex items-center justify-between text-xs p-2 bg-gray-50 rounded",children:[e.jsxs("span",{children:[P.horaInicio," - ",P.horaFin]}),e.jsxs("span",{className:P.disponible?"text-green-600":"text-red-600",children:[P.disponibles,"/",P.capacidad]})]},P.id))})]})]})]})})]})]})}function zc(){const[t,s]=T.useState([]),[r,a]=T.useState(!0),[n,i]=T.useState("pendiente"),[l,c]=T.useState(null),[p,x]=T.useState(!1),[m,y]=T.useState("aprobar"),[b,D]=T.useState(""),[j,A]=T.useState(!1);T.useEffect(()=>{g()},[n]);const g=()=>O(this,null,function*(){try{a(!0),s([])}catch(d){console.error("Error al cargar aprobaciones:",d)}finally{a(!1)}}),C=()=>O(this,null,function*(){if(l)try{switch(A(!0),m){case"aprobar":break;case"rechazar":break;case"solicitar_info":break}x(!1),D(""),c(null),g()}catch(d){console.error("Error al procesar acción:",d)}finally{A(!1)}}),S=(d,E)=>{c(d),y(E),x(!0)},B=d=>{const E={pendiente:"bg-yellow-100 text-yellow-800 border-yellow-300",aprobado:"bg-green-100 text-green-800 border-green-300",rechazado:"bg-red-100 text-red-800 border-red-300",solicitar_info:"bg-blue-100 text-blue-800 border-blue-300"};return E[d]||E.pendiente},Y=d=>({nueva_visita:"Nueva Visita",materiales:"Compra de Materiales",costo_extra:"Costo Adicional",otro:"Otro"})[d]||d,w=t.length,U=t.filter(d=>d.estado==="pendiente").length,z=t.filter(d=>d.estado==="aprobado").length,o=t.filter(d=>d.estado==="rechazado").length,u=t.filter(d=>d.estado==="pendiente").reduce((d,E)=>d+(E.costoEstimado||0),0);return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx($e,{className:"text-blue-600"}),"Aprobaciones"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestión de solicitudes de aprobación"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:w})]}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center",children:e.jsx(fs,{className:"text-gray-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 mt-1",children:U})]}),e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"text-yellow-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Aprobadas"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 mt-1",children:z})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx($e,{className:"text-green-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Rechazadas"}),e.jsx("p",{className:"text-2xl font-bold text-red-600 mt-1",children:o})]}),e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(Wt,{className:"text-red-600",size:24})})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Costo Estimado"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:["$",u.toLocaleString()]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(vn,{className:"text-blue-600",size:24})})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(gt,{size:20,className:"text-gray-600"}),e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"todos",children:"Todas"}),e.jsx("option",{value:"pendiente",children:"Pendientes"}),e.jsx("option",{value:"aprobado",children:"Aprobadas"}),e.jsx("option",{value:"rechazado",children:"Rechazadas"}),e.jsx("option",{value:"solicitar_info",children:"Requieren Info"})]})]})}),e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(yt,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-600",children:"No hay aprobaciones para mostrar"})]}):t.map(d=>{var E;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:Y(d.tipoAprobacion)}),e.jsx("span",{className:`text-xs px-3 py-1 rounded-full border ${B(d.estado)}`,children:d.estado})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Caso: ",e.jsx("span",{className:"font-medium",children:d.caso.numeroCaso})," -"," ",d.caso.condominio.nombre," - ",d.caso.unidad]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Solicitado por:"}),e.jsx("p",{className:"text-sm font-medium",children:((E=d.caso.tecnicoAsignado)==null?void 0:E.nombreCompleto)||"N/A"})]}),d.costoEstimado&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Costo Estimado:"}),e.jsxs("p",{className:"text-sm font-medium text-green-600",children:["$",d.costoEstimado.toLocaleString()]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Descripción:"}),e.jsx("p",{className:"text-sm text-gray-700",children:d.descripcion})]}),d.justificacion&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Justificación:"}),e.jsx("p",{className:"text-sm text-gray-700",children:d.justificacion})]}),d.comentarios&&e.jsxs("div",{className:"md:col-span-2 bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Comentarios:"}),e.jsx("p",{className:"text-sm text-gray-700",children:d.comentarios})]})]})]})}),d.estado==="pendiente"&&e.jsxs("div",{className:"flex gap-2 pt-4 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>S(d,"aprobar"),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx($e,{size:18}),"Aprobar"]}),e.jsxs("button",{onClick:()=>S(d,"rechazar"),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Wt,{size:18}),"Rechazar"]}),e.jsxs("button",{onClick:()=>S(d,"solicitar_info"),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(mt,{size:18}),"Solicitar Info"]})]}),d.fechaRespuesta&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 text-xs text-gray-500",children:["Fecha de respuesta:"," ",new Date(d.fechaRespuesta).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})]})]},d.id)})}),p&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[m==="aprobar"&&"Aprobar Solicitud",m==="rechazar"&&"Rechazar Solicitud",m==="solicitar_info"&&"Solicitar Más Información"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m==="rechazar"?"Motivo del rechazo":"Comentarios (opcional)"}),e.jsx("textarea",{value:b,onChange:d=>D(d.target.value),rows:4,required:m==="rechazar",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:m==="rechazar"?"Explica el motivo del rechazo...":"Agrega comentarios adicionales..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{x(!1),D("")},disabled:j,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),e.jsx("button",{onClick:C,disabled:j||m==="rechazar"&&!b,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:j?"Procesando...":"Confirmar"})]})]})})]})}function Uc(){const[t,s]=T.useState([]),[r,a]=T.useState({totalSolicitudes:0,solicitudesHoy:0,tiempoPromedioResolucion:"0h",satisfaccionPromedio:0}),[n,i]=T.useState(!0),[l,c]=T.useState(null),[p,x]=T.useState(!1),[m,y]=T.useState("todos"),[b,D]=T.useState("todos"),[j,A]=T.useState("todos"),[g,C]=T.useState("");T.useEffect(()=>{S()},[]);const S=()=>O(this,null,function*(){try{i(!0);const[o,u]=yield Promise.all([Bs.getAll(),Bs.getEstadisticas()]),d=o.data||[],E=u.estadisticas||{};s(d);const f=new Date().toISOString().split("T")[0],_=d.filter(I=>I.fechaCreacion.startsWith(f)).length;a({totalSolicitudes:E.totalSolicitudes||0,solicitudesHoy:_,tiempoPromedioResolucion:E.tiempoPromedioResolucionHoras?`${Math.round(E.tiempoPromedioResolucionHoras)}h`:"0h",satisfaccionPromedio:E.satisfaccionPromedio||0})}catch(o){console.error("Error al cargar datos:",o)}finally{i(!1)}}),B=o=>{const u={critica:{bg:"bg-red-100",text:"text-red-800",label:"CRÍTICA"},alta:{bg:"bg-orange-100",text:"text-orange-800",label:"ALTA"},media:{bg:"bg-yellow-100",text:"text-yellow-800",label:"MEDIA"},baja:{bg:"bg-green-100",text:"text-green-800",label:"BAJA"}},d=u[o.toLowerCase()]||u.media;return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${d.bg} ${d.text}`,children:d.label})},Y=o=>{const u={nueva:{bg:"bg-blue-100",text:"text-blue-800",icon:Cn,label:"NUEVA"},"en proceso":{bg:"bg-purple-100",text:"text-purple-800",icon:We,label:"EN PROCESO"},resuelta:{bg:"bg-green-100",text:"text-green-800",icon:gs,label:"RESUELTA"},pendiente:{bg:"bg-gray-100",text:"text-gray-800",icon:yt,label:"PENDIENTE"}},d=u[o.toLowerCase()]||u.pendiente,E=d.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-medium ${d.bg} ${d.text}`,children:[e.jsx(E,{size:12}),d.label]})},w=o=>{c(o),x(!0)},U=t.filter(o=>{if(m!=="todos"&&o.estado.toLowerCase()!==m||b!=="todos"&&o.urgencia.toLowerCase()!==b||j!=="todos"&&o.tipoSolicitud.toLowerCase()!==j)return!1;if(g){const u=g.toLowerCase();return o.codigoUnico.toLowerCase().includes(u)||o.telefono.includes(g)}return!0}),z=o=>new Date(o).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"});return n?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"p-8 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(mt,{className:"text-blue-600",size:32}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Solicitudes IA - WhatsApp"})]}),e.jsx("p",{className:"text-gray-600",children:"Gestión de solicitudes creadas automáticamente desde WhatsApp"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(mt,{className:"text-blue-600",size:24})}),e.jsx(Hs,{className:"text-green-500",size:20})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r.totalSolicitudes}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Solicitudes"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"text-green-600",size:24})}),e.jsx("span",{className:"text-xs font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"HOY"})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r.solicitudesHoy}),e.jsx("p",{className:"text-sm text-gray-600",children:"Solicitudes Hoy"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"text-purple-600",size:24})})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r.tiempoPromedioResolucion}),e.jsx("p",{className:"text-sm text-gray-600",children:"Tiempo Promedio Resolución"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(xr,{className:"text-yellow-600",size:24})}),e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((o,u)=>e.jsx(xr,{size:12,className:`${u<Math.round(r.satisfaccionPromedio)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},u))})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:r.satisfaccionPromedio.toFixed(1)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Satisfacción Promedio"})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Buscar por código o teléfono...",value:g,onChange:o=>C(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:m,onChange:o=>y(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[e.jsx("option",{value:"todos",children:"Todos los estados"}),e.jsx("option",{value:"nueva",children:"Nueva"}),e.jsx("option",{value:"en proceso",children:"En Proceso"}),e.jsx("option",{value:"resuelta",children:"Resuelta"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:b,onChange:o=>D(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[e.jsx("option",{value:"todos",children:"Todas las urgencias"}),e.jsx("option",{value:"critica",children:"Crítica"}),e.jsx("option",{value:"alta",children:"Alta"}),e.jsx("option",{value:"media",children:"Media"}),e.jsx("option",{value:"baja",children:"Baja"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsxs("select",{value:j,onChange:o=>A(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"mantenimiento",children:"Mantenimiento"}),e.jsx("option",{value:"pago",children:"Pago"}),e.jsx("option",{value:"reserva",children:"Reserva"}),e.jsx("option",{value:"consulta",children:"Consulta"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Código Único"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Categoría"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Urgencia"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:U.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"font-mono font-bold text-lg text-blue-600",children:o.codigoUnico})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-gray-900",children:[e.jsx(tt,{size:14,className:"text-gray-400"}),o.nombreUsuario||"Sin nombre"]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[e.jsx(Yt,{size:12,className:"text-gray-400"}),o.telefono]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 capitalize",children:o.tipoSolicitud})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:o.categoria||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(o.urgencia)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:Y(o.estado)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:z(o.fechaCreacion)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("button",{onClick:()=>w(o),className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(mt,{size:16}),"Ver Chat"]})})]},o.id))})]}),U.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"No se encontraron solicitudes"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Intenta ajustar los filtros de búsqueda"})]})]})}),p&&l&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-green-700 text-white p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-1",children:"Chat Completo - WhatsApp"}),e.jsxs("p",{className:"text-sm opacity-90",children:["Código: ",e.jsx("span",{className:"font-mono font-bold",children:l.codigoUnico})]})]}),e.jsx("button",{onClick:()=>x(!1),className:"w-10 h-10 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full flex items-center justify-center transition-colors",children:e.jsx(Bt,{size:24})})]}),e.jsx("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-full flex items-center justify-center",children:e.jsx(tt,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:l.nombreUsuario||"Usuario"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.telefono})]})]}),e.jsx("div",{className:"text-right",children:B(l.urgencia)})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-100",children:l.mensajesWhatsApp.map((o,u)=>e.jsx("div",{className:`flex ${o.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-[70%] ${o.role==="user"?"order-2":"order-1"}`,children:e.jsx("div",{className:`rounded-lg p-4 shadow-sm ${o.role==="user"?"bg-green-500 text-white rounded-br-none":"bg-white text-gray-900 rounded-bl-none"}`,children:e.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:o.content})})})},u))}),e.jsxs("div",{className:"bg-gray-50 border-t border-gray-200 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{size:16}),l.mensajesWhatsApp.length," mensajes"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qe,{size:16}),z(l.fechaCreacion)]})]}),e.jsx("button",{onClick:()=>x(!1),className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Cerrar"})]})]})})]})}var Ha={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,s){((r,a)=>{t.exports=a()})(dn,function r(){var a=typeof self!="undefined"?self:typeof window!="undefined"?window:a!==void 0?a:{},n,i=!a.document&&!!a.postMessage,l=a.IS_PAPA_WORKER||!1,c={},p=0,x={};function m(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(u){var d=w(u);d.chunkSize=parseInt(d.chunkSize),u.step||u.chunk||(d.chunkSize=null),this._handle=new A(d),(this._handle.streamer=this)._config=d}.call(this,o),this.parseChunk=function(u,d){var E=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<E){let _=this._config.newline;_||(f=this._config.quoteChar||'"',_=this._handle.guessLineEndings(u,f)),u=[...u.split(_).slice(E)].join(_)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&(f=this._config.beforeFirstChunk(u))!==void 0&&(u=f),this.isFirstChunk=!1,this._halted=!1;var E=this._partialLine+u,f=(this._partialLine="",this._handle.parse(E,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(u=f.meta.cursor,E=(this._finished||(this._partialLine=E.substring(u-this._baseIndex),this._baseIndex=u),f&&f.data&&(this._rowCount+=f.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)a.postMessage({results:f,workerId:x.WORKER_ID,finished:E});else if(z(this._config.chunk)&&!d){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=f=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!E||!z(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),E||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(u){z(this._config.error)?this._config.error(u):l&&this._config.error&&a.postMessage({workerId:x.WORKER_ID,error:u,finished:!1})}}function y(o){var u;(o=o||{}).chunkSize||(o.chunkSize=x.RemoteChunkSize),m.call(this,o),this._nextChunk=i?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(d){this._input=d,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),i||(u.onload=U(this._chunkLoaded,this),u.onerror=U(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var d,E=this._config.downloadRequestHeaders;for(d in E)u.setRequestHeader(d,E[d])}var f;this._config.chunkSize&&(f=this._start+this._config.chunkSize-1,u.setRequestHeader("Range","bytes="+this._start+"-"+f));try{u.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}i&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize||u.responseText.length,this._finished=!this._config.chunkSize||this._start>=(d=>(d=d.getResponseHeader("Content-Range"))!==null?parseInt(d.substring(d.lastIndexOf("/")+1)):-1)(u),this.parseChunk(u.responseText)))},this._chunkError=function(d){d=u.statusText||d,this._sendError(new Error(d))}}function b(o){(o=o||{}).chunkSize||(o.chunkSize=x.LocalChunkSize),m.call(this,o);var u,d,E=typeof FileReader!="undefined";this.stream=function(f){this._input=f,d=f.slice||f.webkitSlice||f.mozSlice,E?((u=new FileReader).onload=U(this._chunkLoaded,this),u.onerror=U(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),f=d.call(f,this._start,_)),u.readAsText(f,this._config.encoding));E||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(u.error)}}function D(o){var u;m.call(this,o=o||{}),this.stream=function(d){return u=d,this._nextChunk()},this._nextChunk=function(){var d,E;if(!this._finished)return d=this._config.chunkSize,u=d?(E=u.substring(0,d),u.substring(d)):(E=u,""),this._finished=!u,this.parseChunk(E)}}function j(o){m.call(this,o=o||{});var u=[],d=!0,E=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){E&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):d=!0},this._streamData=U(function(f){try{u.push(typeof f=="string"?f:f.toString(this._config.encoding)),d&&(d=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(_){this._streamError(_)}},this),this._streamError=U(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=U(function(){this._streamCleanUp(),E=!0,this._streamData("")},this),this._streamCleanUp=U(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function A(o){var u,d,E,f,_=Math.pow(2,53),I=-_,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,V=this,K=0,W=0,ce=!1,J=!1,Q=[],H={data:[],errors:[],meta:{}};function xe(ie){return o.skipEmptyLines==="greedy"?ie.join("").trim()==="":ie.length===1&&ie[0].length===0}function he(){if(H&&E&&(Ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+x.DefaultDelimiter+"'"),E=!1),o.skipEmptyLines&&(H.data=H.data.filter(function(te){return!xe(te)})),Ee()){let te=function(ge,je){z(o.transformHeader)&&(ge=o.transformHeader(ge,je)),Q.push(ge)};if(H)if(Array.isArray(H.data[0])){for(var ie=0;Ee()&&ie<H.data.length;ie++)H.data[ie].forEach(te);H.data.splice(0,1)}else H.data.forEach(te)}function le(te,ge){for(var je=o.header?{}:[],de=0;de<te.length;de++){var ue=de,oe=te[de],oe=((Be,ae)=>(pe=>(o.dynamicTypingFunction&&o.dynamicTyping[pe]===void 0&&(o.dynamicTyping[pe]=o.dynamicTypingFunction(pe)),(o.dynamicTyping[pe]||o.dynamicTyping)===!0))(Be)?ae==="true"||ae==="TRUE"||ae!=="false"&&ae!=="FALSE"&&((pe=>{if(P.test(pe)&&(pe=parseFloat(pe),I<pe&&pe<_))return 1})(ae)?parseFloat(ae):R.test(ae)?new Date(ae):ae===""?null:ae):ae)(ue=o.header?de>=Q.length?"__parsed_extra":Q[de]:ue,oe=o.transform?o.transform(oe,ue):oe);ue==="__parsed_extra"?(je[ue]=je[ue]||[],je[ue].push(oe)):je[ue]=oe}return o.header&&(de>Q.length?Ae("FieldMismatch","TooManyFields","Too many fields: expected "+Q.length+" fields but parsed "+de,W+ge):de<Q.length&&Ae("FieldMismatch","TooFewFields","Too few fields: expected "+Q.length+" fields but parsed "+de,W+ge)),je}var fe;H&&(o.header||o.dynamicTyping||o.transform)&&(fe=1,!H.data.length||Array.isArray(H.data[0])?(H.data=H.data.map(le),fe=H.data.length):H.data=le(H.data,0),o.header&&H.meta&&(H.meta.fields=Q),W+=fe)}function Ee(){return o.header&&Q.length===0}function Ae(ie,le,fe,te){ie={type:ie,code:le,message:fe},te!==void 0&&(ie.row=te),H.errors.push(ie)}z(o.step)&&(f=o.step,o.step=function(ie){H=ie,Ee()?he():(he(),H.data.length!==0&&(K+=ie.data.length,o.preview&&K>o.preview?d.abort():(H.data=H.data[0],f(H,V))))}),this.parse=function(ie,le,fe){var te=o.quoteChar||'"',te=(o.newline||(o.newline=this.guessLineEndings(ie,te)),E=!1,o.delimiter?z(o.delimiter)&&(o.delimiter=o.delimiter(ie),H.meta.delimiter=o.delimiter):((te=((ge,je,de,ue,oe)=>{var Be,ae,pe,h;oe=oe||[",","	","|",";",x.RECORD_SEP,x.UNIT_SEP];for(var N=0;N<oe.length;N++){for(var k,$=oe[N],F=0,L=0,q=0,Z=(pe=void 0,new C({comments:ue,delimiter:$,newline:je,preview:10}).parse(ge)),se=0;se<Z.data.length;se++)de&&xe(Z.data[se])?q++:(k=Z.data[se].length,L+=k,pe===void 0?pe=k:0<k&&(F+=Math.abs(k-pe),pe=k));0<Z.data.length&&(L/=Z.data.length-q),(ae===void 0||F<=ae)&&(h===void 0||h<L)&&1.99<L&&(ae=F,Be=$,h=L)}return{successful:!!(o.delimiter=Be),bestDelimiter:Be}})(ie,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess)).successful?o.delimiter=te.bestDelimiter:(E=!0,o.delimiter=x.DefaultDelimiter),H.meta.delimiter=o.delimiter),w(o));return o.preview&&o.header&&te.preview++,u=ie,d=new C(te),H=d.parse(u,le,fe),he(),ce?{meta:{paused:!0}}:H||{meta:{paused:!1}}},this.paused=function(){return ce},this.pause=function(){ce=!0,d.abort(),u=z(o.chunk)?"":u.substring(d.getCharIndex())},this.resume=function(){V.streamer._halted?(ce=!1,V.streamer.parseChunk(u,!0)):setTimeout(V.resume,3)},this.aborted=function(){return J},this.abort=function(){J=!0,d.abort(),H.meta.aborted=!0,z(o.complete)&&o.complete(H),u=""},this.guessLineEndings=function(ge,te){ge=ge.substring(0,1048576);var te=new RegExp(g(te)+"([^]*?)"+g(te),"gm"),fe=(ge=ge.replace(te,"")).split("\r"),te=ge.split(`
`),ge=1<te.length&&te[0].length<fe[0].length;if(fe.length===1||ge)return`
`;for(var je=0,de=0;de<fe.length;de++)fe[de][0]===`
`&&je++;return je>=fe.length/2?`\r
`:"\r"}}function g(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function C(o){var u=(o=o||{}).delimiter,d=o.newline,E=o.comments,f=o.step,_=o.preview,I=o.fastMode,P=null,R=!1,V=o.quoteChar==null?'"':o.quoteChar,K=V;if(o.escapeChar!==void 0&&(K=o.escapeChar),(typeof u!="string"||-1<x.BAD_DELIMITERS.indexOf(u))&&(u=","),E===u)throw new Error("Comment character same as delimiter");E===!0?E="#":(typeof E!="string"||-1<x.BAD_DELIMITERS.indexOf(E))&&(E=!1),d!==`
`&&d!=="\r"&&d!==`\r
`&&(d=`
`);var W=0,ce=!1;this.parse=function(J,Q,H){if(typeof J!="string")throw new Error("Input must be a string");var xe=J.length,he=u.length,Ee=d.length,Ae=E.length,ie=z(f),le=[],fe=[],te=[],ge=W=0;if(!J)return F();if(I||I!==!1&&J.indexOf(V)===-1){for(var je=J.split(d),de=0;de<je.length;de++){if(te=je[de],W+=te.length,de!==je.length-1)W+=d.length;else if(H)return F();if(!E||te.substring(0,Ae)!==E){if(ie){if(le=[],h(te.split(u)),L(),ce)return F()}else h(te.split(u));if(_&&_<=de)return le=le.slice(0,_),F(!0)}}return F()}for(var ue=J.indexOf(u,W),oe=J.indexOf(d,W),Be=new RegExp(g(K)+g(V),"g"),ae=J.indexOf(V,W);;)if(J[W]===V)for(ae=W,W++;;){if((ae=J.indexOf(V,ae+1))===-1)return H||fe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:le.length,index:W}),k();if(ae===xe-1)return k(J.substring(W,ae).replace(Be,V));if(V===K&&J[ae+1]===K)ae++;else if(V===K||ae===0||J[ae-1]!==K){ue!==-1&&ue<ae+1&&(ue=J.indexOf(u,ae+1));var pe=N((oe=oe!==-1&&oe<ae+1?J.indexOf(d,ae+1):oe)===-1?ue:Math.min(ue,oe));if(J.substr(ae+1+pe,he)===u){te.push(J.substring(W,ae).replace(Be,V)),J[W=ae+1+pe+he]!==V&&(ae=J.indexOf(V,W)),ue=J.indexOf(u,W),oe=J.indexOf(d,W);break}if(pe=N(oe),J.substring(ae+1+pe,ae+1+pe+Ee)===d){if(te.push(J.substring(W,ae).replace(Be,V)),$(ae+1+pe+Ee),ue=J.indexOf(u,W),ae=J.indexOf(V,W),ie&&(L(),ce))return F();if(_&&le.length>=_)return F(!0);break}fe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:le.length,index:W}),ae++}}else if(E&&te.length===0&&J.substring(W,W+Ae)===E){if(oe===-1)return F();W=oe+Ee,oe=J.indexOf(d,W),ue=J.indexOf(u,W)}else if(ue!==-1&&(ue<oe||oe===-1))te.push(J.substring(W,ue)),W=ue+he,ue=J.indexOf(u,W);else{if(oe===-1)break;if(te.push(J.substring(W,oe)),$(oe+Ee),ie&&(L(),ce))return F();if(_&&le.length>=_)return F(!0)}return k();function h(q){le.push(q),ge=W}function N(q){var Z=0;return Z=q!==-1&&(q=J.substring(ae+1,q))&&q.trim()===""?q.length:Z}function k(q){return H||(q===void 0&&(q=J.substring(W)),te.push(q),W=xe,h(te),ie&&L()),F()}function $(q){W=q,h(te),te=[],oe=J.indexOf(d,W)}function F(q){if(o.header&&!Q&&le.length&&!R){var Z=le[0],se=Object.create(null),be=new Set(Z);let Ge=!1;for(let ke=0;ke<Z.length;ke++){let Te=Z[ke];if(se[Te=z(o.transformHeader)?o.transformHeader(Te,ke):Te]){let Re,Nt=se[Te];for(;Re=Te+"_"+Nt,Nt++,be.has(Re););be.add(Re),Z[ke]=Re,se[Te]++,Ge=!0,(P=P===null?{}:P)[Re]=Te}else se[Te]=1,Z[ke]=Te;be.add(Te)}Ge&&console.warn("Duplicate headers found and renamed."),R=!0}return{data:le,errors:fe,meta:{delimiter:u,linebreak:d,aborted:ce,truncated:!!q,cursor:ge+(Q||0),renamedHeaders:P}}}function L(){f(F()),le=[],fe=[]}},this.abort=function(){ce=!0},this.getCharIndex=function(){return W}}function S(o){var u=o.data,d=c[u.workerId],E=!1;if(u.error)d.userError(u.error,u.file);else if(u.results&&u.results.data){var f={abort:function(){E=!0,B(u.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(z(d.userStep)){for(var _=0;_<u.results.data.length&&(d.userStep({data:u.results.data[_],errors:u.results.errors,meta:u.results.meta},f),!E);_++);delete u.results}else z(d.userChunk)&&(d.userChunk(u.results,f,u.file),delete u.results)}u.finished&&!E&&B(u.workerId,u.results)}function B(o,u){var d=c[o];z(d.userComplete)&&d.userComplete(u),d.terminate(),delete c[o]}function Y(){throw new Error("Not implemented.")}function w(o){if(typeof o!="object"||o===null)return o;var u,d=Array.isArray(o)?[]:{};for(u in o)d[u]=w(o[u]);return d}function U(o,u){return function(){o.apply(u,arguments)}}function z(o){return typeof o=="function"}return x.parse=function(o,u){var d=(u=u||{}).dynamicTyping||!1;if(z(d)&&(u.dynamicTypingFunction=d,d={}),u.dynamicTyping=d,u.transform=!!z(u.transform)&&u.transform,!u.worker||!x.WORKERS_SUPPORTED)return d=null,x.NODE_STREAM_INPUT,typeof o=="string"?(o=(E=>E.charCodeAt(0)!==65279?E:E.slice(1))(o),d=new(u.download?y:D)(u)):o.readable===!0&&z(o.read)&&z(o.on)?d=new j(u):(a.File&&o instanceof File||o instanceof Object)&&(d=new b(u)),d.stream(o);(d=(()=>{var E;return!!x.WORKERS_SUPPORTED&&(E=(()=>{var f=a.URL||a.webkitURL||null,_=r.toString();return x.BLOB_URL||(x.BLOB_URL=f.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(E=new a.Worker(E)).onmessage=S,E.id=p++,c[E.id]=E)})()).userStep=u.step,d.userChunk=u.chunk,d.userComplete=u.complete,d.userError=u.error,u.step=z(u.step),u.chunk=z(u.chunk),u.complete=z(u.complete),u.error=z(u.error),delete u.worker,d.postMessage({input:o,config:u,workerId:d.id})},x.unparse=function(o,u){var d=!1,E=!0,f=",",_=`\r
`,I='"',P=I+I,R=!1,V=null,K=!1,W=((()=>{if(typeof u=="object"){if(typeof u.delimiter!="string"||x.BAD_DELIMITERS.filter(function(Q){return u.delimiter.indexOf(Q)!==-1}).length||(f=u.delimiter),typeof u.quotes!="boolean"&&typeof u.quotes!="function"&&!Array.isArray(u.quotes)||(d=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(R=u.skipEmptyLines),typeof u.newline=="string"&&(_=u.newline),typeof u.quoteChar=="string"&&(I=u.quoteChar),typeof u.header=="boolean"&&(E=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");V=u.columns}u.escapeChar!==void 0&&(P=u.escapeChar+I),u.escapeFormulae instanceof RegExp?K=u.escapeFormulae:typeof u.escapeFormulae=="boolean"&&u.escapeFormulae&&(K=/^[=+\-@\t\r].*$/)}})(),new RegExp(g(I),"g"));if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return ce(null,o,R);if(typeof o[0]=="object")return ce(V||Object.keys(o[0]),o,R)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||V),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),ce(o.fields||[],o.data||[],R);throw new Error("Unable to serialize unrecognized input");function ce(Q,H,xe){var he="",Ee=(typeof Q=="string"&&(Q=JSON.parse(Q)),typeof H=="string"&&(H=JSON.parse(H)),Array.isArray(Q)&&0<Q.length),Ae=!Array.isArray(H[0]);if(Ee&&E){for(var ie=0;ie<Q.length;ie++)0<ie&&(he+=f),he+=J(Q[ie],ie);0<H.length&&(he+=_)}for(var le=0;le<H.length;le++){var fe=(Ee?Q:H[le]).length,te=!1,ge=Ee?Object.keys(H[le]).length===0:H[le].length===0;if(xe&&!Ee&&(te=xe==="greedy"?H[le].join("").trim()==="":H[le].length===1&&H[le][0].length===0),xe==="greedy"&&Ee){for(var je=[],de=0;de<fe;de++){var ue=Ae?Q[de]:de;je.push(H[le][ue])}te=je.join("").trim()===""}if(!te){for(var oe=0;oe<fe;oe++){0<oe&&!ge&&(he+=f);var Be=Ee&&Ae?Q[oe]:oe;he+=J(H[le][Be],oe)}le<H.length-1&&(!xe||0<fe&&!ge)&&(he+=_)}}return he}function J(Q,H){var xe,he;return Q==null?"":Q.constructor===Date?JSON.stringify(Q).slice(1,25):(he=!1,K&&typeof Q=="string"&&K.test(Q)&&(Q="'"+Q,he=!0),xe=Q.toString().replace(W,P),(he=he||d===!0||typeof d=="function"&&d(Q,H)||Array.isArray(d)&&d[H]||((Ee,Ae)=>{for(var ie=0;ie<Ae.length;ie++)if(-1<Ee.indexOf(Ae[ie]))return!0;return!1})(xe,x.BAD_DELIMITERS)||-1<xe.indexOf(f)||xe.charAt(0)===" "||xe.charAt(xe.length-1)===" ")?I+xe+I:xe)}},x.RECORD_SEP="",x.UNIT_SEP="",x.BYTE_ORDER_MARK="\uFEFF",x.BAD_DELIMITERS=["\r",`
`,'"',x.BYTE_ORDER_MARK],x.WORKERS_SUPPORTED=!i&&!!a.Worker,x.NODE_STREAM_INPUT=1,x.LocalChunkSize=10485760,x.RemoteChunkSize=5242880,x.DefaultDelimiter=",",x.Parser=C,x.ParserHandle=A,x.NetworkStreamer=y,x.FileStreamer=b,x.StringStreamer=D,x.ReadableStreamStreamer=j,a.jQuery&&((n=a.jQuery).fn.parse=function(o){var u=o.config||{},d=[];return this.each(function(_){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)d.push({file:this.files[I],inputElem:this,instanceConfig:n.extend({},u)})}),E(),this;function E(){if(d.length===0)z(o.complete)&&o.complete();else{var _,I,P,R,V=d[0];if(z(o.before)){var K=o.before(V.file,V.inputElem);if(typeof K=="object"){if(K.action==="abort")return _="AbortError",I=V.file,P=V.inputElem,R=K.reason,void(z(o.error)&&o.error({name:_},I,P,R));if(K.action==="skip")return void f();typeof K.config=="object"&&(V.instanceConfig=n.extend(V.instanceConfig,K.config))}else if(K==="skip")return void f()}var W=V.instanceConfig.complete;V.instanceConfig.complete=function(ce){z(W)&&W(ce,V.file,V.inputElem),f()},x.parse(V.file,V.instanceConfig)}}function f(){d.splice(0,1),E()}}),l&&(a.onmessage=function(o){o=o.data,x.WORKER_ID===void 0&&o&&(x.WORKER_ID=o.workerId),typeof o.input=="string"?a.postMessage({workerId:x.WORKER_ID,results:x.parse(o.input,o.config),finished:!0}):(a.File&&o.input instanceof File||o.input instanceof Object)&&(o=x.parse(o.input,o.config))&&a.postMessage({workerId:x.WORKER_ID,results:o,finished:!0})}),(y.prototype=Object.create(m.prototype)).constructor=y,(b.prototype=Object.create(m.prototype)).constructor=b,(D.prototype=Object.create(D.prototype)).constructor=D,(j.prototype=Object.create(m.prototype)).constructor=j,x})})(Ha);var Ic=Ha.exports;const Bc=un(Ic),Vc="modulepreload",qc=function(t){return"/amico-app/"+t},Qr={},Ya=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(p=>{if(p=qc(p),p in Qr)return;Qr[p]=!0;const x=p.endsWith(".css"),m=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const y=document.createElement("link");if(y.rel=x?"stylesheet":Vc,x||(y.as="script"),y.crossOrigin="",y.href=p,c&&y.setAttribute("nonce",c),document.head.appendChild(y),x)return new Promise((b,D)=>{y.addEventListener("load",b),y.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return n.then(l=>{for(const c of l||[])c.status==="rejected"&&i(c.reason);return s().catch(i)})};let Ps=null;function Xa(){return O(this,null,function*(){return Ps||(Ps=yield Ya(()=>import("./xlsx-BCVDnt67.js"),[])),Ps})}function $c(t,s=0){return O(this,null,function*(){try{const r=yield Xa(),a=r.read(t,{type:typeof t=="string"?"binary":"array"}),n=a.SheetNames[s];if(!n)throw new Error(`No se encontró la hoja en el índice ${s}`);const i=a.Sheets[n];return r.utils.sheet_to_json(i)}catch(r){throw console.error("Error leyendo archivo Excel:",r),r}})}function Wc(a){return O(this,arguments,function*(t,s=[],r="plantilla.xlsx"){try{const n=yield Xa(),i=s.length>0?s:[{}];i.forEach(p=>{t.forEach(x=>{x in p||(p[x]="")})});const l=n.utils.json_to_sheet(i,{header:t}),c=n.utils.book_new();return n.utils.book_append_sheet(c,l,"Plantilla"),n.writeFile(c,r),{success:!0}}catch(n){return console.error("Error creando plantilla:",n),{success:!1,error:n.message}}})}let Ts=null;function Hc(){return O(this,null,function*(){return Ts||(Ts=yield Ya(()=>import("./xlsx-BCVDnt67.js"),[])),Ts})}function Yc(t,s="export.xlsx",r="Datos"){return O(this,null,function*(){try{if(!t||t.length===0)return{success:!1,error:"No hay datos para exportar"};const a=yield Hc(),n=a.utils.json_to_sheet(t),i=Object.keys(t[0]).map(c=>({wch:Math.max(c.length,...t.map(p=>String(p[c]||"").length))+2}));n["!cols"]=i;const l=a.utils.book_new();return a.utils.book_append_sheet(l,n,r),a.writeFile(l,s),{success:!0}}catch(a){return console.error("Error al exportar Excel:",a),{success:!1,error:a.message}}})}function Xc(){const[t,s]=T.useState([]),[r,a]=T.useState([]),[n,i]=T.useState(!1),[l,c]=T.useState(null),p=T.useRef(null),[x,m]=T.useState(!1),[y,b]=T.useState(null),[D,j]=T.useState({nombreCompleto:"",unidad:"",telefono:"",condominioId:""});T.useEffect(()=>{A()},[]);const A=()=>O(this,null,function*(){yield Promise.all([g(),C()])}),g=()=>O(this,null,function*(){try{i(!0);const E=(yield Pe.getAll()).filter(f=>f.tipoUsuario==="propietario");s(E)}catch(d){console.error("Error cargando propietarios:",d),S("error","Error al cargar propietarios")}finally{i(!1)}}),C=()=>O(this,null,function*(){try{a([{id:"1",nombre:"Condominio Las Palmas"},{id:"2",nombre:"Residencial El Paraíso"},{id:"3",nombre:"Torres del Este"},{id:"4",nombre:"Villa Marina"}])}catch(d){console.error("Error cargando condominios:",d)}}),S=(d,E)=>{c({tipo:d,texto:E}),setTimeout(()=>c(null),5e3)},B=d=>O(this,null,function*(){var f,_,I;if(d.preventDefault(),!D.nombreCompleto||!D.unidad||!D.telefono){S("error","Todos los campos son obligatorios");return}const E=D.telefono.replace(/\D/g,"");if(E.length<10){S("error","El teléfono debe tener al menos 10 dígitos");return}try{i(!0);const P={nombreCompleto:D.nombreCompleto,telefono:E,unidad:D.unidad,condominioId:D.condominioId||void 0,tipoUsuario:"propietario",estado:"activo",puedeVotar:!0};y?(yield Pe.update(y,P),S("success","Propietario actualizado exitosamente")):(yield Pe.create(P),S("success","Propietario agregado exitosamente")),j({nombreCompleto:"",unidad:"",telefono:"",condominioId:""}),m(!1),b(null),yield g()}catch(P){console.error("Error guardando propietario:",P),(I=(_=(f=P.response)==null?void 0:f.data)==null?void 0:_.message)!=null&&I.includes("telefono")?S("error","Este número de teléfono ya está registrado"):S("error","Error al guardar propietario")}finally{i(!1)}}),Y=d=>{b(d.id||null),j({nombreCompleto:d.nombreCompleto,unidad:d.unidad,telefono:d.telefono,condominioId:d.condominioId||""}),m(!0)},w=d=>O(this,null,function*(){if(confirm("¿Estás seguro de eliminar este propietario?"))try{i(!0),yield Pe.delete(d),S("success","Propietario eliminado"),yield g()}catch(E){console.error("Error eliminando propietario:",E),S("error","Error al eliminar propietario")}finally{i(!1)}}),U=d=>{var _;const E=(_=d.target.files)==null?void 0:_[0];if(!E)return;const f=new FileReader;f.onload=I=>O(this,null,function*(){var P;try{i(!0);const R=(P=I.target)==null?void 0:P.result;let V=[];E.name.endsWith(".csv")?Bc.parse(R,{header:!0,skipEmptyLines:!0,complete:K=>O(this,null,function*(){V=K.data,yield z(V)}),error:K=>{console.error("Error parseando CSV:",K),S("error","Error al leer archivo CSV"),i(!1)}}):E.name.endsWith(".xlsx")||E.name.endsWith(".xls")?(V=yield $c(R),yield z(V)):(S("error","Formato de archivo no soportado. Use CSV o Excel"),i(!1))}catch(R){console.error("Error procesando archivo:",R),S("error","Error al procesar archivo"),i(!1)}}),E.name.endsWith(".csv")?f.readAsText(E):f.readAsBinaryString(E),d.target.value=""},z=d=>O(this,null,function*(){var E,f,_;try{let I=0,P=0;for(const R of d)try{const V=R.nombre||R.Nombre||R.nombreCompleto||R["Nombre Completo"]||"",K=R.unidad||R.Unidad||R.apartamento||R.Apartamento||"",W=R.telefono||R.Telefono||R.teléfono||R.Teléfono||R.celular||R.Celular||"",ce=R.condominio||R.Condominio||R.condominioId||"";if(!V||!K||!W){console.warn("Fila inválida, faltan campos:",R),P++;continue}const J=W.toString().replace(/\D/g,"");if(J.length<10){console.warn("Teléfono inválido:",W),P++;continue}let Q=ce;if(ce&&!ce.includes("-")){const H=r.find(xe=>xe.nombre.toLowerCase().includes(ce.toLowerCase()));Q=(H==null?void 0:H.id)||""}yield Pe.create({nombreCompleto:V,telefono:J,unidad:K,condominioId:Q||void 0,tipoUsuario:"propietario",estado:"activo",puedeVotar:!0}),I++}catch(V){(_=(f=(E=V.response)==null?void 0:E.data)==null?void 0:f.message)!=null&&_.includes("telefono")&&console.warn("Teléfono duplicado:",R.telefono),P++}S("success",`Importación completada: ${I} exitosos, ${P} con errores`),yield g()}catch(I){console.error("Error en importación masiva:",I),S("error","Error en la importación masiva")}finally{i(!1)}}),o=()=>O(this,null,function*(){try{const d=t.map(_=>{var I;return{"Nombre Completo":_.nombreCompleto,"Unidad/Apartamento":_.unidad,Teléfono:_.telefono,Estado:_.estado||"activo",Condominio:((I=r.find(P=>P.id===_.condominioId))==null?void 0:I.nombre)||"Sin asignar"}}),E=new Date().toISOString().split("T")[0],f=yield Yc(d,`propietarios_${E}.xlsx`,"Propietarios");f.success?S("success","Lista exportada exitosamente"):S("error",`Error al exportar: ${f.error}`)}catch(d){console.error("Error exportando:",d),S("error","Error al exportar lista")}}),u=()=>O(this,null,function*(){const E=yield Wc(["nombre","unidad","telefono","condominio"],[{nombre:"Juan Pérez",unidad:"Apt 402",telefono:"8095551234",condominio:"Condominio Las Palmas"},{nombre:"María García",unidad:"Torre A-301",telefono:"8095555678",condominio:"Residencial El Paraíso"},{nombre:"Pedro Martínez",unidad:"Casa 12",telefono:"8095559012",condominio:"Torres del Este"}],"plantilla_propietarios.xlsx");E.success?S("success",'Plantilla descargada. Complétala y súbela usando "Importar CSV/Excel"'):S("error",`Error al descargar plantilla: ${E.error}`)});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-slate-900 to-gray-900 p-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl font-bold text-white mb-2 flex items-center gap-3",children:[e.jsx(pt,{className:"text-blue-400",size:40}),"Base de Datos de Propietarios"]}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Carga manual o masiva de propietarios del condominio"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 shadow-lg hover:shadow-xl transition-all glow-purple",children:[e.jsx(hr,{size:20}),"Descargar Plantilla"]}),e.jsxs("button",{onClick:()=>{var d;return(d=p.current)==null?void 0:d.click()},disabled:n,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 shadow-lg hover:shadow-xl transition-all glow-green disabled:opacity-50",children:[e.jsx(En,{size:20}),"Importar CSV/Excel"]}),e.jsx("input",{ref:p,type:"file",accept:".csv,.xlsx,.xls",onChange:U,className:"hidden"}),e.jsxs("button",{onClick:o,disabled:t.length===0,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white rounded-lg hover:from-cyan-700 hover:to-cyan-800 shadow-lg hover:shadow-xl transition-all glow-cyan disabled:opacity-50",children:[e.jsx(Sn,{size:20}),"Exportar Excel"]}),e.jsxs("button",{onClick:()=>{b(null),j({nombreCompleto:"",unidad:"",telefono:"",condominioId:""}),m(!x)},className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 shadow-lg hover:shadow-xl transition-all glow-blue",children:[e.jsx(Ft,{size:20}),"Agregar Propietario"]})]})]})}),l&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center gap-3 ${l.tipo==="success"?"bg-green-900 bg-opacity-20 border border-green-500 text-green-400":"bg-red-900 bg-opacity-20 border border-red-500 text-red-400"}`,children:[l.tipo==="success"?e.jsx($e,{size:20}):e.jsx(Wt,{size:20}),l.texto]}),x&&e.jsxs("div",{className:"mb-8 bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-2xl p-8 border border-slate-700",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:y?"Editar Propietario":"Nuevo Propietario"}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Nombre del Propietario *"}),e.jsx("input",{type:"text",value:D.nombreCompleto,onChange:d=>j(ne(M({},D),{nombreCompleto:d.target.value})),placeholder:"Ej: Juan Pérez",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Unidad o Apartamento *"}),e.jsx("input",{type:"text",value:D.unidad,onChange:d=>j(ne(M({},D),{unidad:d.target.value})),placeholder:"Ej: Apt 402, Casa 12, Torre A-301",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Número Telefónico *"}),e.jsx("input",{type:"tel",value:D.telefono,onChange:d=>j(ne(M({},D),{telefono:d.target.value})),placeholder:"Ej: 8095551234 o 18095551234",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Solo números, sin guiones ni espacios"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-200 mb-2 uppercase tracking-wide",children:"Condominio (Opcional)"}),e.jsxs("select",{value:D.condominioId,onChange:d=>j(ne(M({},D),{condominioId:d.target.value})),className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Sin asignar"}),r.map(d=>e.jsx("option",{value:d.id,children:d.nombre},d.id))]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 shadow-lg hover:shadow-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed glow-green",children:n?"Guardando...":y?"Actualizar Propietario":"Guardar Propietario"}),e.jsx("button",{type:"button",onClick:()=>{m(!1),b(null),j({nombreCompleto:"",unidad:"",telefono:"",condominioId:""})},className:"px-6 py-3 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-all",children:"Cancelar"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-xl shadow-2xl p-6 glow-blue",children:[e.jsx("div",{className:"text-blue-200 text-sm font-bold uppercase mb-2",children:"Total Propietarios"}),e.jsx("div",{className:"text-6xl font-bold text-white",children:t.length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-600 to-green-800 rounded-xl shadow-2xl p-6 glow-green",children:[e.jsx("div",{className:"text-green-200 text-sm font-bold uppercase mb-2",children:"Activos"}),e.jsx("div",{className:"text-6xl font-bold text-white",children:t.filter(d=>d.estado==="activo").length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-purple-800 rounded-xl shadow-2xl p-6 glow-purple",children:[e.jsx("div",{className:"text-purple-200 text-sm font-bold uppercase mb-2",children:"Pendientes"}),e.jsx("div",{className:"text-6xl font-bold text-white",children:t.filter(d=>d.estado==="pendiente").length})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-600 to-orange-800 rounded-xl shadow-2xl p-6 glow-orange",children:[e.jsx("div",{className:"text-orange-200 text-sm font-bold uppercase mb-2",children:"Con Condominio"}),e.jsx("div",{className:"text-6xl font-bold text-white",children:t.filter(d=>d.condominioId).length})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl shadow-2xl overflow-hidden border border-slate-700",children:[e.jsx("div",{className:"p-6 border-b border-slate-700",children:e.jsxs("h2",{className:"text-2xl font-bold text-white",children:["Lista de Propietarios (",t.length,")"]})}),n&&t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"}),e.jsx("p",{className:"text-gray-300 mt-4",children:"Cargando propietarios..."})]}):t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(pt,{size:64,className:"mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"No hay propietarios registrados"}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:"Agrega propietarios manualmente o importa un archivo CSV/Excel"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Agregar Manualmente"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Descargar Plantilla"})]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-800 bg-opacity-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Nombre"}),e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Unidad"}),e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Teléfono"}),e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Condominio"}),e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Estado"}),e.jsx("th",{className:"text-left py-4 px-6 text-gray-400 font-bold uppercase text-sm",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-700",children:t.map(d=>{var E;return e.jsxs("tr",{className:"hover:bg-slate-700 hover:bg-opacity-30 transition-colors",children:[e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:d.nombreCompleto.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-white font-medium",children:d.nombreCompleto})]})}),e.jsx("td",{className:"py-4 px-6 text-gray-300",children:d.unidad}),e.jsx("td",{className:"py-4 px-6 text-gray-300 font-mono",children:d.telefono}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[e.jsx(At,{size:16,className:"text-purple-400"}),((E=r.find(f=>f.id===d.condominioId))==null?void 0:E.nombre)||"Sin asignar"]})}),e.jsx("td",{className:"py-4 px-6",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold shadow-lg ${d.estado==="activo"?"bg-green-600 text-white":"bg-yellow-600 text-white"}`,children:d.estado||"activo"})}),e.jsx("td",{className:"py-4 px-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Y(d),className:"p-2 bg-blue-600 bg-opacity-20 hover:bg-opacity-30 text-blue-400 rounded-lg transition-all",title:"Editar",children:e.jsx(Ys,{size:16})}),e.jsx("button",{onClick:()=>w(d.id),className:"p-2 bg-red-600 bg-opacity-20 hover:bg-opacity-30 text-red-400 rounded-lg transition-all",title:"Eliminar",children:e.jsx(ps,{size:16})})]})})]},d.id)})})]})})]}),e.jsxs("div",{className:"mt-8 bg-gradient-to-br from-blue-900 to-blue-950 bg-opacity-20 border border-blue-500 rounded-xl p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-400 mb-3 flex items-center gap-2",children:[e.jsx(hr,{size:20}),"Instrucciones para Importación Masiva"]}),e.jsxs("div",{className:"text-gray-300 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"1."}),' Haz clic en "Descargar Plantilla" para obtener un archivo de ejemplo']}),e.jsxs("p",{children:[e.jsx("strong",{children:"2."})," Completa el archivo con tus propietarios (columnas: nombre, unidad, telefono, condominio)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"3."})," Guarda como .CSV o .XLSX"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4."}),' Haz clic en "Importar CSV/Excel" y selecciona tu archivo']}),e.jsxs("p",{children:[e.jsx("strong",{children:"5."})," El sistema importará automáticamente todos los propietarios válidos"]}),e.jsxs("p",{className:"text-yellow-400",children:[e.jsx("strong",{children:"Nota:"})," Los teléfonos duplicados serán omitidos automáticamente"]})]})]})]})}const Jc={status:["prospecting","status"]};function Gc(){return Zr({queryKey:Jc.status,queryFn:Aa.getStatus,staleTime:1e3*60*5})}function Kc(){return sn({mutationFn:t=>Aa.smartEnrich(t)})}function Qc(){var g,C,S,B,Y,w,U,z,o,u,d,E,f,_,I,P;const[t,s]=T.useState(""),[r,a]=T.useState(""),[n,i]=T.useState(""),[l,c]=T.useState(!0),[p,x]=T.useState(!0),{data:m}=Gc(),y=Kc(),[b,D]=T.useState(null),j=R=>O(this,null,function*(){var V,K;if(R.preventDefault(),!t){alert("Por favor ingresa el dominio de la empresa");return}try{const W=yield y.mutateAsync({companyDomain:t,firstName:r||void 0,lastName:n||void 0,useHunter:l,useApollo:p});D(W)}catch(W){alert(`Error: ${((K=(V=W.response)==null?void 0:V.data)==null?void 0:K.message)||W.message}`)}}),A=()=>{s(""),a(""),i(""),D(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Prospección Inteligente"}),e.jsx("p",{className:"text-slate-600",children:"Busca y enriquece datos de empresas y contactos"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:`bg-white rounded-lg shadow border p-4 ${(g=m==null?void 0:m.hunter)!=null&&g.configured?"border-green-200":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xt,{size:20,className:"text-blue-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Hunter.io"})]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:(C=m==null?void 0:m.hunter)!=null&&C.configured?"Verificación de emails":"No configurado"})]}),(S=m==null?void 0:m.hunter)!=null&&S.configured?e.jsx(zt,{size:24,className:"text-green-500"}):e.jsx(Bt,{size:24,className:"text-gray-400"})]}),((B=m==null?void 0:m.hunter)==null?void 0:B.account)&&e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:e.jsxs("p",{children:["Disponibles: ",((Y=m.hunter.account.calls)==null?void 0:Y.available)||0]})})]}),e.jsxs("div",{className:`bg-white rounded-lg shadow border p-4 ${(w=m==null?void 0:m.apollo)!=null&&w.configured?"border-green-200":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(At,{size:20,className:"text-purple-600"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Apollo.io"})]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:(U=m==null?void 0:m.apollo)!=null&&U.configured?"275M+ contactos B2B":"No configurado"})]}),(z=m==null?void 0:m.apollo)!=null&&z.configured?e.jsx(zt,{size:24,className:"text-green-500"}):e.jsx(Bt,{size:24,className:"text-gray-400"})]}),((o=m==null?void 0:m.apollo)==null?void 0:o.account)&&e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:e.jsxs("p",{children:["Créditos: ",((u=m.apollo.account.credits)==null?void 0:u.available)||0]})})]}),e.jsxs("div",{className:`bg-white rounded-lg shadow border p-4 ${(d=m==null?void 0:m.phantombuster)!=null&&d.configured?"border-green-200":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fr,{size:20,className:"text-blue-700"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"PhantomBuster"})]}),e.jsx("p",{className:"text-xs text-slate-600 mt-1",children:(E=m==null?void 0:m.phantombuster)!=null&&E.configured?"Automatización LinkedIn":"No configurado"})]}),(f=m==null?void 0:m.phantombuster)!=null&&f.configured?e.jsx(zt,{size:24,className:"text-green-500"}):e.jsx(Bt,{size:24,className:"text-gray-400"})]}),((_=m==null?void 0:m.phantombuster)==null?void 0:_.account)&&e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:e.jsxs("p",{children:["Tiempo: ",Math.round((m.phantombuster.account.timeLeft||0)/60)," min"]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:["Dominio de la Empresa ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(kn,{size:20,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:t,onChange:R=>s(R.target.value),placeholder:"ejemplo: microsoft.com",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:y.isPending})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:'Ingresa el dominio de la empresa sin "www" ni "https://"'})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Nombre (Opcional)"}),e.jsx("input",{type:"text",value:r,onChange:R=>a(R.target.value),placeholder:"Juan",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:y.isPending})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-900 mb-2",children:"Apellido (Opcional)"}),e.jsx("input",{type:"text",value:n,onChange:R=>i(R.target.value),placeholder:"Pérez",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:y.isPending})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:R=>c(R.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:y.isPending||!((I=m==null?void 0:m.hunter)!=null&&I.configured)}),e.jsx("span",{className:"text-sm text-slate-700",children:"Usar Hunter.io"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:R=>x(R.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:y.isPending||!((P=m==null?void 0:m.apollo)!=null&&P.configured)}),e.jsx("span",{className:"text-sm text-slate-700",children:"Usar Apollo.io"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"submit",disabled:y.isPending||!t,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y.isPending?e.jsxs(e.Fragment,{children:[e.jsx(_n,{size:20,className:"animate-spin"}),"Buscando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{size:20}),"Buscar y Enriquecer"]})}),b&&e.jsx("button",{type:"button",onClick:A,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Limpiar"})]})]})}),b&&e.jsxs("div",{className:"space-y-4",children:[b.company&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(At,{size:20,className:"text-purple-600"}),"Información de la Empresa"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Nombre"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.company.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Sitio Web"}),e.jsx("a",{href:`https://${b.company.website}`,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-blue-600 hover:underline",children:b.company.website})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Industria"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.company.industry})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Empleados"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.company.employeeRange||b.company.employeeCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Ubicación"}),e.jsx("p",{className:"font-semibold text-slate-900",children:[b.company.city,b.company.state,b.company.country].filter(Boolean).join(", ")})]}),b.company.founded&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600",children:"Fundación"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.company.founded})]})]}),b.company.technologies&&b.company.technologies.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Tecnologías"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:b.company.technologies.map((R,V)=>e.jsx("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm",children:R},V))})]})]}),b.contact&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(xt,{size:20,className:"text-blue-600"}),"Información del Contacto"]}),e.jsxs("div",{className:"space-y-3",children:[b.contact.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xt,{size:18,className:"text-slate-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-slate-900",children:b.contact.email}),b.contact.verified!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[b.contact.verified?e.jsxs(e.Fragment,{children:[e.jsx(zt,{size:14,className:"text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:"Verificado"})]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:14,className:"text-orange-500"}),e.jsx("span",{className:"text-xs text-orange-600",children:"No verificado"})]}),b.contact.confidence&&e.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:["Confianza: ",b.contact.confidence,"%"]})]})]})]}),b.contact.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{size:18,className:"text-slate-400"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.contact.phone})]}),b.contact.title&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(At,{size:18,className:"text-slate-400"}),e.jsx("p",{className:"font-semibold text-slate-900",children:b.contact.title})]}),b.contact.linkedinUrl&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(fr,{size:18,className:"text-slate-400"}),e.jsx("a",{href:b.contact.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"font-semibold text-blue-600 hover:underline",children:"Ver perfil de LinkedIn"})]})]})]}),b.emails&&b.emails.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(xt,{size:20,className:"text-blue-600"}),"Otros Emails Encontrados (",b.emails.length,")"]}),e.jsx("div",{className:"space-y-2",children:b.emails.map((R,V)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:R.email}),e.jsx("p",{className:"text-sm text-slate-600",children:R.position})]}),e.jsx("div",{className:"flex items-center gap-2",children:R.verified?e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[e.jsx(zt,{size:12}),"Verificado"]}):e.jsx("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded-full text-xs font-medium",children:"No verificado"})})]},V))})]}),b.sources&&b.sources.length>0&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Fuentes de datos:"})," ",b.sources.join(", ")]})})]}),!b&&!y.isPending&&e.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-12 text-center",children:[e.jsx(ct,{size:48,className:"mx-auto text-slate-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"Comienza tu búsqueda"}),e.jsx("p",{className:"text-slate-600 max-w-md mx-auto",children:"Ingresa el dominio de una empresa y, opcionalmente, el nombre de un contacto para obtener información enriquecida desde múltiples fuentes."})]})]})}function Zc(){return e.jsx(Tn,{children:e.jsxs(mn,{children:[e.jsx(Fe,{path:"/",element:e.jsx(bo,{})}),e.jsx(Fe,{path:"/casos",element:e.jsx(ic,{})}),e.jsx(Fe,{path:"/casos/:id",element:e.jsx(oc,{})}),e.jsx(Fe,{path:"/tecnicos",element:e.jsx(Pc,{})}),e.jsx(Fe,{path:"/usuarios",element:e.jsx(Tc,{})}),e.jsx(Fe,{path:"/propietarios",element:e.jsx(Xc,{})}),e.jsx(Fe,{path:"/nuevo-caso",element:e.jsx(Rc,{})}),e.jsx(Fe,{path:"/solicitudes-ia",element:e.jsx(Uc,{})}),e.jsx(Fe,{path:"/citas",element:e.jsx(Lc,{})}),e.jsx(Fe,{path:"/aprobaciones",element:e.jsx(zc,{})}),e.jsx(Fe,{path:"/reportes",element:e.jsx(Fc,{})}),e.jsx(Fe,{path:"/calendario",element:e.jsx(Mc,{})}),e.jsx(Fe,{path:"/prospecting",element:e.jsx(Qc,{})}),e.jsx(Fe,{path:"*",element:e.jsx(xn,{to:"/",replace:!0})})]})})}const ed=new rn({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:1e3*60*5}}});Ms.createRoot(document.getElementById("root")).render(e.jsx(Me.StrictMode,{children:e.jsx(an,{client:ed,children:e.jsx(hn,{basename:"/amico-app",children:e.jsx(Zc,{})})})}))});export default td();
